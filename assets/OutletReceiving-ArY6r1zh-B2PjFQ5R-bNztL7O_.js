import{H as es,w as g,c as e,I as H,n as E,S as D,_ as Y,Y as M,B as P,a as V,r as ss,P as ts,O as as,l as T,W as is,d as ye,T as v,L as ee,j as se,k as _e}from"./index-D0a7Ul_G.js";import{_ as we,j as ke,C as Se,N as ze,P as A}from"./select-DqWpyIkf-D_8tzK0d-BBn-WGEA.js";import{v as ls}from"./textarea-TOFJikG_-C72QqR98-D5hWOVfE.js";import{V as $e,q as rs,_ as De,H as Fe,C as Oe}from"./dialog-NtgNh5u1-2hJTriox-IAMkB2HC.js";import{v as ds}from"./auditLogger-DsAnB0jd-BH5jyDaI-BCBSj_dH.js";import{h as Ie}from"./refresh-cw-BlPh9kri-DxVFEABi-aZB1kqTg.js";import{p as ns}from"./plus-FJ0CIBRX-DLM2sgk0-DVYylXdR.js";import{p as We}from"./circle-check-big-BZ9nasO6-BWVBSi9U-D_bzRs9E.js";import{t as cs}from"./scale-Coap2kcd-Bsk2bCpZ-BAcJJTw5.js";import{t as os}from"./ruler-CopLYj-b-CeXK_mRn-B8U3iJDq.js";import{o as xs}from"./map-pin-C-M6umvy-CUBiYWs8-BzOTRlrX.js";import{a as hs}from"./index-io8wS31O-C_L8DqSR-BTUohV_t.js";import{i as ms}from"./clock-sArWPAJm-BmsKQooK-qn3wSWAF.js";import{a as te}from"./weight-CtEhXJRi-DcPJONPf-CLEOuACO.js";import{y as Re}from"./dollar-sign-BhCk0N5D-BR4pe6-Y-C39FtWn3.js";import{p as us}from"./square-pen-BXk3qRWQ-BrUlDIvM-BHIo8QnW.js";import"./index-B7iGXlpc-YR4igk-O-CmE8Ucvu.js";import"./index-CEgc-Zw--jggqibQ8-DNEgScq_.js";var ps=Object.defineProperty,gs=Object.defineProperties,vs=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,bs=Object.prototype.hasOwnProperty,js=Object.prototype.propertyIsEnumerable,Pe=(b,m,u)=>m in b?ps(b,m,{enumerable:!0,configurable:!0,writable:!0,value:u}):b[m]=u,N=(b,m)=>{for(var u in m||(m={}))bs.call(m,u)&&Pe(b,u,m[u]);if(Ee)for(var u of Ee(m))js.call(m,u)&&Pe(b,u,m[u]);return b},y=(b,m)=>gs(b,vs(m)),w=(b,m,u)=>new Promise((B,C)=>{var K=f=>{try{I(u.next(f))}catch(W){C(W)}},q=f=>{try{I(u.throw(f))}catch(W){C(W)}},I=f=>f.done?B(f.value):Promise.resolve(f.value).then(K,q);I((u=u.apply(b,m)).next())});/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const fs=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ns=ss("calculator",fs);function Us({onNavigate:b}){var m,u,B,C,K,q,I,f,W,ae,ie,le,re,de,ne;const{user:o}=es(),[F,ce]=g.useState([]),[G,Q]=g.useState(!1),[Ve,oe]=g.useState(!0),[xe,he]=g.useState(!1),[J,me]=g.useState(!1),[R,Ce]=g.useState([]),[t,ue]=g.useState(null),[c,Le]=g.useState(null),[Ue,pe]=g.useState(!1),[X,Me]=g.useState(new Set),[l,k]=g.useState({dispatchId:"",outletId:"",actualWeight:"",actualValue:"",condition:"",receivedBy:o?`${o.first_name} ${o.last_name}`:"",notes:"",sizeDiscrepancies:{}});g.useEffect(()=>{o&&k(s=>y(N({},s),{receivedBy:`${o.first_name} ${o.last_name}`}))},[o]);const ge=s=>`REC${String(s+1).padStart(4,"0")}`,Te=s=>{const a={};return s.forEach((i,d)=>{var r,h,n;const x=((n=(h=(r=i.dispatch)==null?void 0:r.outlet_order)==null?void 0:h.outlet)==null?void 0:n.name)||"Unknown Outlet";a[x]||(a[x]=[]),a[x].push(y(N({},i),{displayIndex:d}))}),a},Ae=s=>{const a=new Set(X);a.has(s)?a.delete(s):a.add(s),Me(a)},Be=s=>{Le(s),pe(!0)},Z=()=>w(this,null,function*(){try{oe(!0);const s=ee(o==null?void 0:o.id),{data:a,error:i}=yield se(()=>w(this,null,function*(){return yield s.from("outlet_receiving").select(`
            *,
            dispatch_records!inner(
              id,
              destination,
              dispatch_date,
              outlet_orders!inner(
                id,
                order_number,
                outlets!inner(
                  id,
                  name,
                  location
                )
              )
            )
          `).order("received_date",{ascending:!1})}));if(i)throw i;const d=(a||[]).map(r=>{var h,n,x,S,O,z,p,$,j,_,Ne;return{id:r.id,dispatch_id:r.dispatch_id,outlet_order_id:r.outlet_order_id,received_date:r.received_date,received_by:r.received_by,expected_weight:parseFloat(r.expected_weight)||0,actual_weight_received:parseFloat(r.actual_weight_received)||0,expected_value:parseFloat(r.expected_value)||0,actual_value_received:parseFloat(r.actual_value_received)||0,condition:r.condition||"good",size_discrepancies:r.size_discrepancies||null,discrepancy_notes:r.discrepancy_notes||null,status:r.status||"confirmed",outlet_name:r.outlet_name||"Unknown",outlet_location:r.outlet_location||"Unknown",created_at:r.created_at,updated_at:r.updated_at,dispatch:{id:((h=r.dispatch_records)==null?void 0:h.id)||r.dispatch_id,destination:((n=r.dispatch_records)==null?void 0:n.destination)||"Unknown",dispatch_date:(x=r.dispatch_records)==null?void 0:x.dispatch_date,outlet_order:{order_number:((O=(S=r.dispatch_records)==null?void 0:S.outlet_orders)==null?void 0:O.order_number)||"N/A",outlet:{name:(($=(p=(z=r.dispatch_records)==null?void 0:z.outlet_orders)==null?void 0:p.outlets)==null?void 0:$.name)||r.outlet_name||"Unknown",location:((Ne=(_=(j=r.dispatch_records)==null?void 0:j.outlet_orders)==null?void 0:_.outlets)==null?void 0:Ne.location)||r.outlet_location||"Unknown"}}}}});ce(d)}catch(s){const a=_e(s,"fetching receiving records");v.error(a),ce([])}finally{oe(!1)}}),Ke=()=>w(this,null,function*(){try{const s=ee(o==null?void 0:o.id),{data:a,error:i}=yield se(()=>w(this,null,function*(){return yield s.from("dispatch_records").select(`
            id,
            outlet_order_id,
            destination,
            total_weight,
            total_value,
            size_breakdown,
            status,
            dispatch_date,
            notes,
            picking_date,
            picking_time,
            assigned_driver,
            outlet_order:outlet_orders(
              id,
              order_number,
              total_value,
              outlet:outlets(name, location, phone)
            )
          `).in("status",["in-transit","dispatched","scheduled"]).order("dispatch_date",{ascending:!1})}));if(i)throw i;return console.log("Fetched dispatches:",a),a==null||a.forEach((d,r)=>{console.log(`Dispatch ${r} size breakdown:`,d.size_breakdown)}),a||[]}catch(s){return console.error("Error fetching dispatches:",s),[]}}),L=()=>{if(!(t!=null&&t.size_breakdown))return 0;let s=0;return Object.entries(t.size_breakdown).forEach(([a,i])=>{const d=l.sizeDiscrepancies[parseInt(a)]||0,r=i+d;s+=r}),s},ve=()=>{const s=L(),a=parseFloat(l.actualWeight)||0,i=(t==null?void 0:t.size_breakdown)&&Object.keys(t.size_breakdown).length>0,d=Object.keys(l.sizeDiscrepancies).length>0;return!!(l.dispatchId&&t&&l.actualWeight&&l.actualWeight.trim()!==""&&parseFloat(l.actualWeight)>0&&l.actualValue&&l.actualValue.trim()!==""&&parseFloat(l.actualValue)>0&&l.condition&&l.condition.trim()!==""&&o&&o.id&&(!i||d)&&(s===0||Math.abs(s-a)<=.1))},qe=()=>{const s=[];(!l.dispatchId||!t)&&s.push("Please select a valid dispatch");const a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(l.dispatchId&&!a.test(l.dispatchId)&&(s.push("Invalid dispatch ID format. Please refresh and select a dispatch again."),console.error("Invalid dispatch ID:",l.dispatchId)),!l.actualWeight||l.actualWeight.trim()===""?s.push("Please enter the weight received"):parseFloat(l.actualWeight)<=0?s.push("Weight received must be greater than 0"):parseFloat(l.actualWeight)<.1&&s.push("Weight received seems too low (<0.1kg). Please verify the value"),!l.actualValue||l.actualValue.trim()===""?s.push("Please enter the value received"):parseFloat(l.actualValue)<=0&&s.push("Value received must be greater than 0"),(!l.condition||l.condition.trim()==="")&&s.push("Please select the condition of received items"),(!o||!o.id)&&s.push("User session expired. Please refresh and try again"),t){const i=t.total_weight||0,d=t.total_value||0;i>1e4&&console.warn(`âš ï¸ WARNING: Expected weight (${i}kg) seems unrealistic. Please verify dispatch data.`),d>1e6&&console.warn(`âš ï¸ WARNING: Expected value (KES ${d.toLocaleString()}) seems unrealistic. Please verify dispatch data.`)}if(t&&t.total_weight>0){const i=t.total_weight||0,d=parseFloat(l.actualWeight)||0,r=Math.abs(d-i),h=i>0?r/i*100:0;h>20&&console.warn(`Weight discrepancy is ${h.toFixed(1)}% - please verify the received weight`)}if(l.actualWeight&&isNaN(parseFloat(l.actualWeight))&&s.push("Weight received must be a valid number"),l.actualValue&&isNaN(parseFloat(l.actualValue))&&s.push("Value received must be a valid number"),t!=null&&t.size_breakdown&&Object.keys(t.size_breakdown).length>0)if(!(Object.keys(l.sizeDiscrepancies).length>0))s.push("This dispatch has size breakdown data. Please fill in the size discrepancies section below.");else{const i=L(),d=parseFloat(l.actualWeight)||0,r=Math.abs(i-d);r>.1&&s.push(`Size breakdown total (${i.toFixed(1)}kg) does not match total weight received (${d.toFixed(1)}kg). Difference: ${r.toFixed(1)}kg`)}return s},He=(s,a,i,d,r)=>w(this,null,function*(){try{yield ds.custom(s,a,i,{old_values:d,new_values:r})}catch(h){console.warn("Failed to log audit event:",h)}}),Ye=()=>w(this,null,function*(){var s,a,i,d,r,h;if(J){v.warning("Please wait, submission in progress...");return}try{me(!0);const n=qe();if(n.length>0){n.forEach(p=>v.error(p));return}if(t){const p=t.total_weight||0,$=t.total_value||0,j=parseFloat(l.actualWeight)||0;p>1e4&&v.warning(`âš ï¸ Large expected weight: ${p}kg`),$>1e6&&v.warning(`âš ï¸ Large expected value: KES ${$.toLocaleString()}`),j>p&&j>1e4&&v.warning(`âš ï¸ Received weight (${j}kg) is larger than expected (${p}kg)`);const _=p>0?Math.abs(j-p)/p*100:0;_>20&&v.warning(`âš ï¸ Large discrepancy: ${_.toFixed(1)}%`)}const x={dispatch_id:l.dispatchId,outlet_order_id:t.outlet_order_id,received_date:new Date().toISOString().split("T")[0],received_by:(o==null?void 0:o.id)||null,expected_weight:parseFloat((t.total_weight||0).toString()),actual_weight_received:parseFloat(l.actualWeight)||0,expected_pieces:0,actual_pieces_received:0,expected_value:parseFloat((t.total_value||((s=t.outlet_order)==null?void 0:s.total_value)||0).toString()),actual_value_received:parseFloat(l.actualValue)||0,condition:l.condition||"good",size_discrepancies:Object.keys(l.sizeDiscrepancies).length>0?l.sizeDiscrepancies:null,discrepancy_notes:l.notes||null,status:"confirmed",outlet_name:((i=(a=t.outlet_order)==null?void 0:a.outlet)==null?void 0:i.name)||t.destination,outlet_location:((r=(d=t.outlet_order)==null?void 0:d.outlet)==null?void 0:r.location)||"Unknown"};console.log("Creating receiving record with data:",x),console.log("Form data dispatchId:",l.dispatchId),console.log("Form data dispatchId type:",typeof l.dispatchId),console.log("Selected dispatch:",t),console.log("Selected dispatch ID:",t==null?void 0:t.id),console.log("Selected dispatch ID type:",typeof(t==null?void 0:t.id));const S=ee(o==null?void 0:o.id),{data:O,error:z}=yield se(()=>w(this,null,function*(){return yield S.from("outlet_receiving").insert([x]).select("id").single()}));if(z)throw z;yield S.from("dispatch_records").update({status:"delivered",updated_at:new Date().toISOString()}).eq("id",l.dispatchId);try{yield He("INSERT","outlet_receiving",O.id,null,y(N({},x),{entry_code:`RCV-${Date.now()}`,fish_type:t.fish_type||"Tilapia",condition:x.condition,weight_received:x.actual_weight_received,outlet_id:(h=t.outlet_order)==null?void 0:h.outlet_id,receiving_date:x.received_date}))}catch(p){console.warn("Audit logging failed (non-critical):",p)}v.success("Receiving record created successfully"),k({dispatchId:"",outletId:"",actualWeight:"",actualValue:"",condition:"",receivedBy:o?`${o.first_name} ${o.last_name}`:"",notes:"",sizeDiscrepancies:{}}),ue(null),Q(!1),yield Z()}catch(n){const x=_e(n,"creating receiving record");v.error(x)}finally{me(!1)}}),Ge=()=>w(this,null,function*(){try{const s=yield Ke();console.log("Fetched dispatches:",s),Ce(s)}catch(s){console.error("Error loading dispatches:",s),v.error("Failed to load available dispatches")}});g.useEffect(()=>{console.log("Available dispatches updated:",R),R.forEach((s,a)=>{console.log(`Dispatch ${a}:`,{id:s.id,idType:typeof s.id,destination:s.destination,total_weight:s.total_weight,size_breakdown:s.size_breakdown})})},[R]);const Qe=s=>{console.log("Selected dispatch ID:",s),console.log("Available dispatches:",R);const a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!a.test(s)){console.error("Invalid dispatch ID format:",s),v.error("Invalid dispatch selection. Please refresh and try again.");return}const i=R.find(d=>d.id===s);if(console.log("Found dispatch:",i),!i){console.error("Dispatch not found for ID:",s),v.error("Selected dispatch not found. Please refresh and try again.");return}if(!i.id||!a.test(i.id)){console.error("Dispatch has invalid ID:",i.id),v.error("Selected dispatch has invalid ID. Please refresh and try again.");return}ue(i),console.log("Selected dispatch size breakdown:",i.size_breakdown),console.log("Size breakdown keys:",i.size_breakdown?Object.keys(i.size_breakdown):"No size breakdown"),console.log("Size breakdown entries:",i.size_breakdown?Object.entries(i.size_breakdown):"No size breakdown"),k(d=>{var r,h,n,x;return y(N({},d),{dispatchId:i.id,outletId:((h=(r=i.outlet_order)==null?void 0:r.outlet)==null?void 0:h.name)||"",actualWeight:((n=i.total_weight)==null?void 0:n.toString())||"",actualValue:((x=i.total_value)==null?void 0:x.toString())||"",condition:"good"})})},Je=()=>w(this,null,function*(){he(!0),yield Z(),he(!1)});g.useEffect(()=>{Z()},[]),g.useEffect(()=>{G&&Ge()},[G]);const be=s=>{switch(s){case"confirmed":return"bg-emerald-500 text-white";case"disputed":return"bg-red-500 text-white";case"pending":return"bg-amber-500 text-white";default:return"bg-gray-500 text-white"}},je=s=>{switch(s){case"excellent":return"bg-green-500 text-white";case"good":return"bg-blue-500 text-white";case"fair":return"bg-orange-500 text-white";case"poor":return"bg-red-500 text-white";default:return"bg-gray-500 text-white"}},Xe=s=>`KES ${s.toLocaleString()}`,fe=(s,a)=>{const i=a-s,d=s>0?(i/s*100).toFixed(1):"0";return{diff:i,percentage:d}},Ze=s=>{if(!s)return"No size discrepancies";const a=Object.entries(s).filter(([i,d])=>d!==0).map(([i,d])=>`Size ${i}: ${d>0?"+":""}${d}`);return a.length>0?a.join(", "):"No size discrepancies"},U={totalReceivings:F.length,confirmed:F.filter(s=>s.status==="confirmed").length,disputed:F.filter(s=>s.status==="disputed").length,totalValue:F.reduce((s,a)=>s+(a.actual_value_received||0),0),totalWeight:F.reduce((s,a)=>s+(a.actual_weight_received||0),0)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50 content-container responsive-padding",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl shadow-lg",children:e.jsx(H,{className:"h-10 w-10 text-white"})}),"Outlet Receiving Records"]}),e.jsx("p",{className:"text-xl text-gray-600 ml-16",children:"Track what outlets received â€¢ Size-based verification â€¢ Quality control"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(E,{variant:"outline",onClick:Je,disabled:xe,className:"px-6 py-3 rounded-2xl font-semibold",children:[e.jsx(Ie,{className:`h-5 w-5 mr-2 ${xe?"animate-spin":""}`}),"Refresh"]}),e.jsxs($e,{open:G,onOpenChange:Q,children:[e.jsx(rs,{asChild:!0,children:e.jsxs(E,{className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-4 rounded-2xl font-semibold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(ns,{className:"h-6 w-6 mr-3"}),"Record Receiving"]})}),e.jsxs(De,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Fe,{children:[e.jsx(Oe,{className:"text-2xl font-bold text-gray-900",children:"Record Outlet Receiving"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Fields marked with ",e.jsx("span",{className:"text-red-500",children:"*"})," are required"]})]}),e.jsxs("div",{className:"space-y-6 py-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{className:"text-base font-semibold text-gray-700",children:["Select Dispatch ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(we,{value:l.dispatchId,onValueChange:Qe,children:[e.jsx(ke,{className:"h-14 text-base",children:e.jsx(Se,{placeholder:"Select dispatch to receive"})}),e.jsx(ze,{children:R.map(s=>{var a,i;return e.jsxs(A,{value:s.id,children:[((a=s.outlet_order)==null?void 0:a.order_number)||`ORD-${(i=s.id)==null?void 0:i.slice(-6)}`," - ",s.destination,s.total_weight>0?` (${s.total_weight}kg)`:" (Not picked yet)"," ","- ",s.status.toUpperCase()]},s.id)})})]})]}),t&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border-l-4 border-blue-400",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Dispatch Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Outlet:"})," ",((u=(m=t.outlet_order)==null?void 0:m.outlet)==null?void 0:u.name)||t.destination]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",((C=(B=t.outlet_order)==null?void 0:B.outlet)==null?void 0:C.location)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Order Number:"})," ",((K=t.outlet_order)==null?void 0:K.order_number)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 rounded text-xs font-medium ${t.status==="dispatched"?"bg-green-100 text-green-800":t.status==="in-transit"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expected Weight:"}),e.jsxs("span",{className:`font-medium ${t.total_weight>1e4?"text-red-600":"text-green-600"}`,children:[t.total_weight,"kg",t.total_weight>1e4&&e.jsx("span",{className:"text-xs text-red-500 ml-1",children:"âš ï¸"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expected Value:"}),e.jsxs("span",{className:`font-medium ${(t.total_value||0)>1e6?"text-red-600":"text-gray-900"}`,children:["KES ",(t.total_value||((q=t.outlet_order)==null?void 0:q.total_value)||0).toLocaleString(),(t.total_value||0)>1e6&&e.jsx("span",{className:"text-xs text-red-500 ml-1",children:"âš ï¸"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Dispatch Date:"})," ",new Date(t.dispatch_date).toLocaleDateString()]}),t.assigned_driver&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Driver:"})," ",t.assigned_driver]}),t.picking_date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Picking Date:"})," ",new Date(t.picking_date).toLocaleDateString()]})]}),t.size_breakdown&&Object.keys(t.size_breakdown).length>0?e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:"Size Breakdown Available:"}),e.jsxs("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-medium",children:[Object.keys(t.size_breakdown).length," sizes"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.size_breakdown).map(([s,a])=>e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium border border-blue-300",children:["Size ",s,": ",a,"kg"]},s))}),e.jsx("div",{className:"mt-2 text-xs text-blue-700",children:"âš ï¸ Size discrepancies must be filled below before submitting"})]}):e.jsx("div",{className:"mt-3 p-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600",children:"No size breakdown data available for this dispatch"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{className:"text-base font-semibold text-gray-700",children:["Weight Received (kg) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Y,{type:"number",step:"0.1",placeholder:"202.5",className:"h-14 text-base",value:l.actualWeight,onChange:s=>k(y(N({},l),{actualWeight:s.target.value}))}),t&&l.actualWeight&&e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-gray-600",children:["Expected: ",t.total_weight,"kg"]}),(()=>{const s=t.total_weight||0,a=parseFloat(l.actualWeight)||0,i=s-a,d=a-s,r=s>0?(d/s*100).toFixed(1):"0",h=Math.abs(d)>s*.1;return e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`${h?"text-orange-600 font-medium":"text-green-600"}`,children:d>0?`+${d.toFixed(1)}kg (${r}% over)`:d<0?`${d.toFixed(1)}kg (${r}% under)`:"Exact match"}),e.jsxs("div",{className:"text-blue-600 font-medium",children:["Remaining: ",i>0?i.toFixed(1):0,"kg"]})]})})()]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{className:"text-base font-semibold text-gray-700",children:["Value Received (KES) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Y,{type:"number",placeholder:"101250",className:"h-14 text-base",value:l.actualValue,onChange:s=>k(y(N({},l),{actualValue:s.target.value}))}),t&&l.actualValue&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Expected: KES ",(I=t.total_value)==null?void 0:I.toLocaleString()]}),(()=>{const s=t.total_value||0,a=(parseFloat(l.actualValue)||0)-s,i=s>0?(a/s*100).toFixed(1):"0",d=Math.abs(a)>s*.1;return e.jsxs("span",{className:`ml-2 ${d?"text-orange-600 font-medium":"text-green-600"}`,children:["(",a>0?"+":"","KES ",a.toLocaleString(),", ",i,"%)"]})})()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{className:"text-base font-semibold text-gray-700",children:["Quality Condition ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(we,{value:l.condition,onValueChange:s=>k(y(N({},l),{condition:s})),children:[e.jsx(ke,{className:"h-14 text-base",children:e.jsx(Se,{placeholder:"Select condition"})}),e.jsxs(ze,{children:[e.jsx(A,{value:"excellent",children:"ðŸŸ¢ Excellent - Perfect condition"}),e.jsx(A,{value:"good",children:"ðŸ”µ Good - Minor issues"}),e.jsx(A,{value:"fair",children:"ðŸŸ¡ Fair - Some quality concerns"}),e.jsx(A,{value:"poor",children:"ðŸ”´ Poor - Significant quality issues"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(D,{className:"text-base font-semibold text-gray-700",children:"Received By"}),e.jsx(Y,{placeholder:"Staff member name",className:"h-14 text-base bg-gray-50",value:l.receivedBy,readOnly:!0,title:"Automatically set to logged-in user"})]}),(t==null?void 0:t.size_breakdown)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{className:"text-base font-semibold text-gray-700",children:["Size Discrepancies ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-blue-600"}),e.jsx("div",{className:"text-sm text-blue-800 font-medium",children:"This dispatch has size breakdown data. Please fill in the actual quantities received for each size."})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(t.size_breakdown).map(([s,a])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{className:"text-sm font-medium text-gray-600",children:["Size ",s," (Expected: ",a,"kg)"]}),e.jsx(Y,{type:"number",step:"0.1",placeholder:"Actual received",className:"h-10 text-sm",onChange:i=>{const d=(parseFloat(i.target.value)||0)-a;k(r=>y(N({},r),{sizeDiscrepancies:y(N({},r.sizeDiscrepancies),{[parseInt(s)]:d})}))}})]},s))}),Object.keys(l.sizeDiscrepancies).length>0&&e.jsxs("div",{className:"mt-4 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Size Breakdown Total:"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[L().toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Weight Received:"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[parseFloat(l.actualWeight||"0").toFixed(1)," kg"]})]}),(()=>{const s=L(),a=parseFloat(l.actualWeight||"0"),i=Math.abs(s-a),d=i<=.1;return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${d?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:"Match Status:"}),e.jsx("span",{className:`text-sm font-bold ${d?"text-green-600":"text-red-600"}`,children:d?"âœ… Match":`âŒ ${i.toFixed(1)}kg difference`})]})})()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(D,{className:"text-base font-semibold text-gray-700",children:"Quality & Discrepancy Notes"}),e.jsx(ls,{placeholder:"Any quality issues, missing items, or other discrepancies...",className:"h-24 text-base",value:l.notes,onChange:s=>k(y(N({},l),{notes:s.target.value}))})]}),e.jsxs("div",{className:"flex flex-col gap-4 pt-6",children:[!ve()&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-amber-600"}),e.jsx("div",{className:"text-sm text-amber-800 font-medium",children:(()=>{const s=L(),a=parseFloat(l.actualWeight||"0"),i=Math.abs(s-a),d=(t==null?void 0:t.size_breakdown)&&Object.keys(t.size_breakdown).length>0,r=Object.keys(l.sizeDiscrepancies).length>0;return d&&!r?"This dispatch has size breakdown data. Please fill in the size discrepancies section below.":s>0&&i>.1?`Size breakdown total (${s.toFixed(1)}kg) does not match total weight (${a.toFixed(1)}kg). Please adjust the values.`:"Please fill in all required fields to continue"})()})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(E,{variant:"outline",onClick:()=>Q(!1),className:"px-8 py-3 text-base",children:"Cancel"}),e.jsx(E,{onClick:Ye,disabled:J||!ve(),className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 px-8 py-3 text-base disabled:opacity-50 disabled:cursor-not-allowed",children:J?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 mr-2 animate-spin"}),"Recording..."]}):"Record Receiving"})]})]})]})]})]})]})," "]}),"   ",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(P,{className:"border-0 shadow-xl bg-gradient-to-br from-green-50 to-emerald-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wide",children:"Total Records"}),e.jsx("p",{className:"text-4xl font-bold text-green-900 mt-2",children:U.totalReceivings})]}),e.jsx("div",{className:"p-4 bg-green-600 rounded-2xl shadow-lg",children:e.jsx(H,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(P,{className:"border-0 shadow-xl bg-gradient-to-br from-emerald-50 to-green-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-600 uppercase tracking-wide",children:"Confirmed"}),e.jsx("p",{className:"text-4xl font-bold text-emerald-900 mt-2",children:U.confirmed})]}),e.jsx("div",{className:"p-4 bg-emerald-600 rounded-2xl shadow-lg",children:e.jsx(We,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(P,{className:"border-0 shadow-xl bg-gradient-to-br from-red-50 to-red-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-red-600 uppercase tracking-wide",children:"Disputed"}),e.jsx("p",{className:"text-4xl font-bold text-red-900 mt-2",children:U.disputed})]}),e.jsx("div",{className:"p-4 bg-red-600 rounded-2xl shadow-lg",children:e.jsx(M,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(P,{className:"border-0 shadow-xl bg-gradient-to-br from-blue-50 to-blue-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wide",children:"Total Weight"}),e.jsx("p",{className:"text-4xl font-bold text-blue-900 mt-2",children:U.totalWeight.toFixed(1)}),e.jsx("p",{className:"text-sm text-blue-600",children:"kg"})]}),e.jsx("div",{className:"p-4 bg-blue-600 rounded-2xl shadow-lg",children:e.jsx(cs,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(P,{className:"border-0 shadow-xl bg-gradient-to-br from-purple-50 to-purple-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wide",children:"Total Value"}),e.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-2",children:Xe(U.totalValue)})]}),e.jsx("div",{className:"p-4 bg-purple-600 rounded-2xl shadow-lg",children:e.jsx(Ns,{className:"h-8 w-8 text-white"})})]})})})]}),e.jsxs(P,{className:"border-0 shadow-2xl bg-white/80 backdrop-blur-sm",children:[e.jsx(ts,{className:"pb-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-t-3xl",children:e.jsxs(as,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(os,{className:"h-8 w-8 text-green-600"}),"Receiving Records by Size"]})}),e.jsx(V,{className:"p-8",children:Ve?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading receiving records..."})]}):F.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(H,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No receiving records found"}),e.jsx("p",{className:"text-gray-500",children:"Start by recording your first outlet receiving"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(Te(F)).map(([s,a])=>{var i,d,r,h;return e.jsxs("div",{className:"border-2 border-gray-100 rounded-3xl p-6 hover:shadow-xl transition-all duration-300 bg-gradient-to-r from-white to-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>Ae(s),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xs,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s}),e.jsx("p",{className:"text-sm text-gray-500",children:((h=(r=(d=(i=a[0])==null?void 0:i.dispatch)==null?void 0:d.outlet_order)==null?void 0:r.outlet)==null?void 0:h.location)||"Unknown Location"})]})]}),e.jsxs(T,{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:[a.length," ",a.length===1?"Order":"Orders"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Total Received: ",a.reduce((n,x)=>n+(x.actual_weight_received||0),0).toFixed(1)," kg"]}),e.jsx(hs,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 ${X.has(s)?"rotate-180":""}`})]})]}),X.has(s)&&e.jsx("div",{className:"mt-6 space-y-4",children:a.map((n,x)=>{var S,O,z,p,$;const j=fe(n.expected_weight||0,n.actual_weight_received||0),_=fe(n.expected_value||0,n.actual_value_received||0);return e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:ge(n.displayIndex||x)})]}),e.jsx(T,{className:`text-sm font-semibold px-3 py-1 rounded-xl ${be(n.status)}`,children:n.status.toUpperCase()}),e.jsx(T,{className:`text-sm font-semibold px-3 py-1 rounded-xl ${je(n.condition)}`,children:n.condition.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(is,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium",children:["Order: ",((O=(S=n.dispatch)==null?void 0:S.outlet_order)==null?void 0:O.order_number)||`ORD-${(z=n.dispatch_id)==null?void 0:z.slice(-6)}`]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Dispatch: ",((p=n.dispatch)==null?void 0:p.destination)||`DSP-${($=n.dispatch_id)==null?void 0:$.slice(-6)}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(We,{className:"h-4 w-4 text-purple-500"}),e.jsxs("span",{className:"text-sm font-medium",children:["By: ",n.received_by_user?`${n.received_by_user.first_name} ${n.received_by_user.last_name}`:"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(ms,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(n.received_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(te,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[n.actual_weight_received||0," kg"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Weight"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Expected:"}),e.jsxs("span",{className:"font-medium",children:[n.expected_weight||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Received:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[n.actual_weight_received||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Diff:"}),e.jsxs("span",{className:`font-medium ${j.diff>=0?"text-green-600":"text-red-600"}`,children:[j.diff>=0?"+":"",j.diff.toFixed(2)," kg"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Re,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Value"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Expected:"}),e.jsxs("span",{className:"font-medium",children:["KSh ",(n.expected_value||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Received:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["KSh ",(n.actual_value_received||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Diff:"}),e.jsxs("span",{className:`font-medium ${_.diff>=0?"text-green-600":"text-red-600"}`,children:[_.diff>=0?"+":"","KSh ",_.diff.toLocaleString()]})]})]})]})]}),n.discrepancy_notes&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-yellow-800 text-sm mb-1",children:"Discrepancy Notes"}),e.jsx("div",{className:"text-xs text-yellow-700",children:n.discrepancy_notes})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",className:"h-10 px-4 border-2 border-blue-200 text-blue-700 hover:bg-blue-50 hover:border-blue-300",onClick:()=>Be(n),children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(E,{variant:"outline",size:"sm",className:"h-10 px-4 border-2 border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})},n.id)})})]},s)})})})]})]}),e.jsx($e,{open:Ue,onOpenChange:pe,children:e.jsxs(De,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Fe,{children:e.jsxs(Oe,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(ye,{className:"h-6 w-6 text-blue-600"}),"Receiving Record Details - ",c&&ge(0)]})}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Outlet Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",((ae=(W=(f=c.dispatch)==null?void 0:f.outlet_order)==null?void 0:W.outlet)==null?void 0:ae.name)||"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",((re=(le=(ie=c.dispatch)==null?void 0:ie.outlet_order)==null?void 0:le.outlet)==null?void 0:re.location)||"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Order Number:"})," ",((ne=(de=c.dispatch)==null?void 0:de.outlet_order)==null?void 0:ne.order_number)||"N/A"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"Receiving Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Received By:"})," ",c.received_by_user?`${c.received_by_user.first_name} ${c.received_by_user.last_name}`:"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(c.received_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",e.jsx(T,{className:be(c.status),children:c.status.toUpperCase()})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-blue-600"}),"Weight Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expected Weight:"}),e.jsxs("span",{className:"font-medium",children:[c.expected_weight||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Actual Weight:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[c.actual_weight_received||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Difference:"}),e.jsxs("span",{className:`font-medium ${(c.actual_weight_received||0)>=(c.expected_weight||0)?"text-green-600":"text-red-600"}`,children:[(c.actual_weight_received||0)-(c.expected_weight||0)>=0?"+":"",((c.actual_weight_received||0)-(c.expected_weight||0)).toFixed(2)," kg"]})]})]})]})}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5 text-purple-600"}),"Value Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Expected Value"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["KSh ",(c.expected_value||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Actual Value"}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["KSh ",(c.actual_value_received||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Difference"}),e.jsxs("div",{className:`text-lg font-bold ${(c.actual_value_received||0)-(c.expected_value||0)>=0?"text-green-600":"text-red-600"}`,children:[(c.actual_value_received||0)-(c.expected_value||0)>=0?"+":"","KSh ",((c.actual_value_received||0)-(c.expected_value||0)).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-orange-900 mb-3",children:"Condition"}),e.jsx(T,{className:je(c.condition),children:c.condition.toUpperCase()})]}),c.discrepancy_notes&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-yellow-600"}),"Discrepancy Notes"]}),e.jsx("p",{className:"text-sm text-yellow-800",children:c.discrepancy_notes})]})]}),c.size_discrepancies&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Size Discrepancies"}),e.jsx("div",{className:"text-sm text-gray-700",children:Ze(c.size_discrepancies)})]})]})]})})]})}export{Us as default};
