import{r as n,j as e,p as ie,e as ne,P as ce,s as v,m as gs,t as M,B as k,a as w,f as R,g as z,b as N,L as j,I as ee,X as ps,l as P,A as Le,i as Pe,E as We}from"./main-DSup42DO.js";import{S as ue,a as fe,b as je,c as _e,d as Y}from"./select-JcD96R-n.js";import{T as hs}from"./textarea-BFloyzWt.js";import{D as ve,a as xs,b as be,c as De,d as ye,f as we,e as Ne}from"./dialog-CARo6Rko.js";import{C as qe}from"./checkbox-cme_QW9J.js";import{T as us,a as fs,b as Be,c as W,d as js,e as q}from"./table-Cn0b3AyJ.js";import{D as _s}from"./dollar-sign-CDPLbzL9.js";import{T as vs}from"./trending-down-CP0ceXCq.js";import{C as Ke}from"./clock-DSBTPoJF.js";import{S as bs}from"./scale-CCjVAmZH.js";import{A as Ds}from"./activity-CxM_Mmro.js";import{P as ys}from"./plus-sv7jvrZ1.js";import{a as Ue,C as ws}from"./index-B45oUSAH.js";import{R as Ns}from"./refresh-cw-DpzMwsnQ.js";import{B as Ss}from"./building-2-B1dq9oI4.js";import{W as Ve}from"./weight-BZkQDAgF.js";import{D as Cs}from"./download-DZhAxJ4k.js";import{F as ks}from"./file-text-DrnlKmnW.js";import{C as Fs}from"./circle-check-big-CQh1-QOa.js";import"./index-I4apKRuN.js";import"./index-e-y2qn7X.js";function Ts({stats:T}){const[r,d]=n.useState([]);return n.useEffect(()=>{const i=[{id:"1",type:"warning",icon:e.jsx(ie,{className:"h-5 w-5"}),text:`🗑️ Total Disposals: ${T?.totalDisposals||0} records | ${(T?.totalDisposedWeight||0).toFixed(1)}kg disposed`,bgColor:"bg-orange-100",textColor:"text-orange-800"},{id:"2",type:"info",icon:e.jsx(_s,{className:"h-5 w-5"}),text:`💰 Disposal Costs: KES ${(T?.totalDisposalCost||0).toLocaleString()} total cost | ${(T?.averageDisposalAge||0).toFixed(1)} days avg age`,bgColor:"bg-red-100",textColor:"text-red-800"},{id:"3",type:"warning",icon:e.jsx(ne,{className:"h-5 w-5"}),text:`⚠️ Pending Disposals: ${T?.pendingDisposals||0} awaiting approval | ${T?.recentDisposals||0} this week`,bgColor:"bg-yellow-100",textColor:"text-yellow-800"},{id:"4",type:"info",icon:e.jsx(vs,{className:"h-5 w-5"}),text:`📉 Disposal Trend: ${T?.monthlyDisposalTrend||0}% change this month | Top reason: ${T?.topDisposalReason||"Age"}`,bgColor:"bg-purple-100",textColor:"text-purple-800"},{id:"5",type:"info",icon:e.jsx(Ke,{className:"h-5 w-5"}),text:`⏰ Average Age: ${(T?.averageDisposalAge||0).toFixed(1)} days before disposal | Quality control active`,bgColor:"bg-indigo-100",textColor:"text-indigo-800"},{id:"6",type:"success",icon:e.jsx(ce,{className:"h-5 w-5"}),text:"📦 Waste Management: Efficient disposal system | Environmental compliance maintained",bgColor:"bg-green-100",textColor:"text-green-800"},{id:"7",type:"info",icon:e.jsx(bs,{className:"h-5 w-5"}),text:"⚖️ Quality Control: Automated disposal triggers | Storage optimization active",bgColor:"bg-blue-100",textColor:"text-blue-800"},{id:"8",type:"achievement",icon:e.jsx(Ds,{className:"h-5 w-5"}),text:"🎯 Rio Fish Farm: Leading waste management practices in Kenya's fish industry",bgColor:"bg-emerald-100",textColor:"text-emerald-800"}];d(i)},[T]),e.jsx("div",{className:"w-full bg-gradient-to-r from-orange-50 to-red-50 border-b border-orange-200 shadow-sm overflow-hidden relative z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"relative py-2 sm:py-3 overflow-hidden",children:e.jsxs("div",{className:"flex animate-marquee-simple whitespace-nowrap",children:[r.map(i=>e.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 px-3 sm:px-6 py-1 sm:py-2 rounded-full ${i.bgColor} ${i.textColor} font-medium text-xs sm:text-sm whitespace-nowrap mx-2 sm:mx-4 shadow-sm border flex-shrink-0`,children:[i.icon,e.jsx("span",{children:i.text})]},i.id)),r.map(i=>e.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 px-3 sm:px-6 py-1 sm:py-2 rounded-full ${i.bgColor} ${i.textColor} font-medium text-xs sm:text-sm whitespace-nowrap mx-2 sm:mx-4 shadow-sm border flex-shrink-0`,children:[i.icon,e.jsx("span",{children:i.text})]},`duplicate-${i.id}`))]})})})})}class As{async getDisposalStats(){try{console.log("🔍 [DisposalService] Fetching disposal statistics...");const{data:r,error:d}=await v.from("disposal_records").select(`
          *,
          disposal_reason:disposal_reasons(name)
        `).order("created_at",{ascending:!1});if(d)throw console.error("❌ [DisposalService] Error fetching disposal records:",d),d;console.log("📊 [DisposalService] Disposal records:",r?.length||0);const i=r?.length||0,b=r?.reduce((p,h)=>p+(h.total_weight_kg||0),0)||0,x=r?.reduce((p,h)=>p+(h.disposal_cost||0),0)||0,S=r?.filter(p=>p.status==="pending").length||0,$=new Date;$.setDate($.getDate()-7);const G=r?.filter(p=>new Date(p.created_at)>=$).length||0,a=r?.filter(p=>p.status==="completed")||[];let B=0;a.length>0&&(B=a.reduce((h,le)=>{const X=new Date(le.created_at),_=new Date(le.disposal_date),ge=Math.floor((_.getTime()-X.getTime())/(1e3*60*60*24));return h+ge},0)/a.length);const E={};r?.forEach(p=>{const h=p.disposal_reason?.name||"Unknown";E[h]=(E[h]||0)+1});const A=Object.keys(E).reduce((p,h)=>E[p]>E[h]?p:h,"Age"),F=new Date,I=F.getMonth(),se=F.getFullYear(),te=I===0?11:I-1,de=I===0?se-1:se,y=r?.filter(p=>{const h=new Date(p.created_at);return h.getMonth()===I&&h.getFullYear()===se}).length||0,O=r?.filter(p=>{const h=new Date(p.created_at);return h.getMonth()===te&&h.getFullYear()===de}).length||0,me=O>0?(y-O)/O*100:0,Q={totalDisposals:i,totalDisposedWeight:b,totalDisposalCost:x,pendingDisposals:S,recentDisposals:G,averageDisposalAge:B,topDisposalReason:A,monthlyDisposalTrend:me};return console.log("📊 [DisposalService] Calculated stats:",Q),Q}catch(r){return console.error("❌ [DisposalService] Error getting disposal stats:",r),{totalDisposals:0,totalDisposedWeight:0,totalDisposalCost:0,pendingDisposals:0,recentDisposals:0,averageDisposalAge:0,topDisposalReason:"Age",monthlyDisposalTrend:0}}}async getDisposalRecords(r=50,d=0){try{const{data:i,error:b}=await v.from("disposal_records").select(`
          *,
          disposal_reason:disposal_reasons(name)
        `).order("created_at",{ascending:!1}).range(d,d+r-1);if(b)throw b;return i||[]}catch(i){return console.error("Error fetching disposal records:",i),[]}}async getDisposalReasons(){try{const{data:r,error:d}=await v.from("disposal_reasons").select("*").eq("is_active",!0).order("name");if(d)throw d;return r||[]}catch(r){return console.error("Error fetching disposal reasons:",r),[]}}async getInventoryForDisposal(r=30,d=!0){try{console.log("🔍 [DisposalService] Getting inventory for disposal with direct query...");const i=new Date;i.setDate(i.getDate()-r),console.log("📅 [DisposalService] Cutoff date for disposal:",i.toISOString().split("T")[0]),console.log("📅 [DisposalService] Days old threshold:",r);const{data:b,error:x}=await v.from("sorting_results").select(`
          id,
          size_class,
          total_pieces,
          total_weight_grams,
          storage_location_id,
          sorting_batch:sorting_batches(
            id,
            batch_number,
            status,
            created_at,
            processing_record:processing_records(
              id,
              processing_date,
              warehouse_entry:warehouse_entries(
                id,
                entry_date,
                farmer_id,
                farmers(name, phone, location)
              )
            )
          ),
          storage_locations(
            id,
            name,
            status,
            capacity_kg,
            current_usage_kg
          )
        `).not("storage_location_id","is",null).gt("total_weight_grams",0).gt("total_pieces",0).order("created_at",{ascending:!1});if(x)throw console.error("❌ [DisposalService] Direct query error:",x),x;console.log("📊 [DisposalService] Raw data from direct query:",b?.length||0,"items"),console.log("🔍 [DisposalService] Filtering items with criteria:",{daysOld:r,includeStorageIssues:d});const S=(b||[]).filter(a=>{if(console.log("🔍 [DisposalService] Checking item:",{id:a.id,batchStatus:a.sorting_batch?.status,hasProcessingRecord:!!a.sorting_batch?.processing_record,processingDate:a.sorting_batch?.processing_record?.processing_date,batchCreatedAt:a.sorting_batch?.created_at,storageStatus:a.storage_locations?.status,totalPieces:a.total_pieces,totalWeight:a.total_weight_grams}),!a.sorting_batch||a.sorting_batch.status!=="completed")return console.log("❌ [DisposalService] Item filtered out - batch not completed:",a.sorting_batch?.status),!1;const B=a.sorting_batch?.processing_record?.processing_date||a.sorting_batch?.created_at?.split("T")[0];if(!B)return console.log("❌ [DisposalService] Item filtered out - no processing date"),!1;const E=new Date(B),A=Math.floor((new Date().getTime()-E.getTime())/(1e3*60*60*24)),F=A>=r,I=d&&(!a.storage_locations||a.storage_locations.status!=="active"||a.storage_locations.current_usage_kg>a.storage_locations.capacity_kg);return console.log("📊 [DisposalService] Item criteria check:",{daysInStorage:A,isOldEnough:F,hasStorageIssues:I,storageStatus:a.storage_locations?.status,eligible:F||I}),F||I});console.log("📊 [DisposalService] Eligible items after filtering:",S.length);let $=S;S.length===0&&b&&b.length>0&&(console.log("⚠️ [DisposalService] No items found with current criteria, showing all items for debugging"),$=b.filter(a=>a.sorting_batch&&a.sorting_batch.status==="completed"),console.log("📊 [DisposalService] Showing all completed items:",$.length));const G=$.map(a=>({sorting_result_id:a.id,size_class:a.size_class,total_pieces:a.total_pieces,total_weight_grams:a.total_weight_grams,batch_number:a.sorting_batch?.batch_number||"BATCH-"+a.sorting_batch?.id?.substring(0,8),storage_location_name:a.storage_locations?.name||"Unknown Storage",farmer_name:a.sorting_batch?.processing_record?.warehouse_entry?.farmers?.name||"Unknown Farmer",processing_date:a.sorting_batch?.processing_record?.processing_date||a.sorting_batch?.created_at?.split("T")[0],days_in_storage:Math.floor((new Date().getTime()-new Date(a.sorting_batch?.processing_record?.processing_date||a.sorting_batch?.created_at?.split("T")[0]).getTime())/(1e3*60*60*24)),disposal_reason:a.storage_locations?.status!=="active"?"Storage Inactive":"Age",quality_notes:`Fish from ${a.sorting_batch?.processing_record?.warehouse_entry?.farmers?.name||"Unknown Farmer"}`}));return console.log("📊 [DisposalService] Transformed items:",G.length),G}catch(i){return console.error("❌ [DisposalService] Error getting inventory for disposal:",i),[]}}async getInventoryForDisposalFallback(r=30){try{const d=new Date;d.setDate(d.getDate()-r);const{data:i,error:b}=await v.from("sorting_results").select(`
          id,
          size_class,
          total_weight_grams,
          batch_number,
          storage_location_name,
          farmer_name,
          processing_date,
          quality_notes,
          storage_locations!inner(status)
        `).eq("status","available").lte("processing_date",d.toISOString().split("T")[0]).gte("total_weight_grams",0);if(b)throw b;return i?.map(x=>({sorting_result_id:x.id,size_class:x.size_class,total_weight_grams:x.total_weight_grams,batch_number:x.batch_number,storage_location_name:x.storage_location_name,storage_status:x.storage_locations?.status||"active",farmer_name:x.farmer_name,processing_date:x.processing_date,days_in_storage:Math.floor((new Date().getTime()-new Date(x.processing_date).getTime())/(1e3*60*60*24)),disposal_reason:x.storage_locations?.status==="inactive"?"Storage Inactive":"Age",quality_notes:x.quality_notes}))||[]}catch(d){return console.error("Error in fallback method:",d),[]}}}const He=new As;function Zs({onNavigate:T}){const{user:r}=gs(),[d,i]=n.useState([]),[b,x]=n.useState([]),[S,$]=n.useState([]),[G,a]=n.useState(null),[B,E]=n.useState(!0),[A,F]=n.useState(!1),[I,se]=n.useState(""),[te,de]=n.useState("all"),[y,O]=n.useState([]),[me,Q]=n.useState(!1),[p,h]=n.useState(!1),[le,X]=n.useState(!1),[_,ge]=n.useState(null),[C,pe]=n.useState(null),[L,J]=n.useState([]),[Z,Se]=n.useState(""),[Ce,ke]=n.useState("waste"),[Fe,Te]=n.useState(""),[Ae,Ie]=n.useState(0),[Me,$e]=n.useState(""),[c,Ye]=n.useState(0),[Ge,Qe]=n.useState(!0),[U,re]=n.useState(""),[V,ae]=n.useState(""),[Ee,Xe]=n.useState(new Set),Je=[{value:"waste",label:"Waste Disposal",description:"General waste disposal"},{value:"compost",label:"Compost",description:"Convert to compost"},{value:"donation",label:"Donation",description:"Donate to charity"},{value:"return_to_farmer",label:"Return to Farmer",description:"Return to original farmer"}];n.useEffect(()=>{oe()},[]),n.useEffect(()=>{if(c>0&&c<=7){const s=new Date,t=new Date;t.setDate(s.getDate()-c),re(t.toISOString().split("T")[0]),ae(s.toISOString().split("T")[0])}else c===0&&(re(""),ae(""))},[c]);const oe=async()=>{try{E(!0),await Promise.all([Ze(),es(),Re(),ss()])}catch(s){console.error("Error loading disposal data:",s),M.error("Failed to load disposal data")}finally{E(!1)}},Ze=async()=>{const{data:s,error:t}=await v.from("disposal_records").select(`
        *,
        disposal_reason:disposal_reasons(*)
      `).order("created_at",{ascending:!1});if(t)throw console.error("Error loading disposal records:",t),t;if(s&&s.length>0){const o=new Set;if(s.forEach(m=>{m.disposed_by&&o.add(m.disposed_by),m.approved_by&&o.add(m.approved_by)}),o.size>0){const{data:m,error:g}=await v.from("profiles").select("id, full_name").in("id",Array.from(o));if(!g&&m){const l=new Map(m.map(f=>[f.id,f.full_name])),u=s.map(f=>({...f,disposed_by:f.disposed_by?l.get(f.disposed_by)||`User ${f.disposed_by.slice(0,8)}`:null,approved_by:f.approved_by?l.get(f.approved_by)||`User ${f.approved_by.slice(0,8)}`:null}));i(u);return}}}i(s||[])},es=async()=>{const{data:s,error:t}=await v.from("disposal_reasons").select("*").eq("is_active",!0).order("name");if(t)throw t;x(s||[])},ss=async()=>{try{console.log("🔍 [DisposalManagement] Loading disposal statistics...");const s=await He.getDisposalStats();a(s),console.log("📊 [DisposalManagement] Disposal stats loaded:",s)}catch(s){console.error("❌ [DisposalManagement] Error loading disposal stats:",s),a({totalDisposals:0,totalDisposedWeight:0,totalDisposalCost:0,pendingDisposals:0,recentDisposals:0,averageDisposalAge:0,topDisposalReason:"Age",monthlyDisposalTrend:0})}},Re=async()=>{try{console.log("🔍 [DisposalManagement] Loading inventory for disposal with threshold:",c);const s=await He.getInventoryForDisposal(c,!0);console.log("📊 [DisposalManagement] Raw data from service:",s);let t=s||[];(U||V)&&(console.log("🔍 [DisposalManagement] Applying date filtering:",{fromDate:U,toDate:V}),console.log("📊 [DisposalManagement] Items before date filtering:",t.length),t=t.filter(o=>{const m=new Date(o.processing_date),g=U?new Date(U):null,l=V?new Date(V):null;return console.log("🔍 [DisposalManagement] Checking item date:",{processingDate:o.processing_date,processingDateObj:m,from:g,to:l,passesFrom:!g||m>=g,passesTo:!l||m<=l}),!(g&&m<g||l&&m>l)}),console.log("📊 [DisposalManagement] Items after date filtering:",t.length)),console.log("📊 [DisposalManagement] Filtered data:",t),$(t)}catch(s){console.error("❌ [DisposalManagement] Error loading inventory for disposal:",s),$([])}},ts=async()=>{if(!Z||y.length===0){M.error("Please select a reason and at least one item");return}if(A){M.error("Please wait, operation in progress...");return}F(!0);try{console.log("🔍 [DisposalManagement] Starting disposal creation..."),console.log("📊 [DisposalManagement] Selected reason:",Z),console.log("📊 [DisposalManagement] Selected items:",y.length),console.log("📊 [DisposalManagement] User ID:",r?.id);const s=b.find(D=>D.id===Z);if(!s){console.error("❌ [DisposalManagement] Disposal reason not found:",Z),M.error("Selected disposal reason is invalid. Please refresh and try again.");return}console.log("✅ [DisposalManagement] Disposal reason verified:",s.name);const o=`DISPOSAL-${new Date().toISOString().replace(/[-:T]/g,"").substring(0,14)}`;console.log("📊 [DisposalManagement] Generated disposal number:",o);const m={disposal_number:o,disposal_reason_id:Z,disposal_method:Ce,disposal_location:Fe||null,disposal_cost:Ae||0,notes:Me||null,disposed_by:r?.id||null,status:"pending",total_weight_kg:0};console.log("📊 [DisposalManagement] Disposal record data:",m);const{data:g,error:l}=await v.from("disposal_records").insert(m).select().single();if(l)throw console.error("❌ [DisposalManagement] Error creating disposal record:",l),console.error("❌ [DisposalManagement] Error details:",{code:l.code,message:l.message,details:l.details,hint:l.hint}),l;console.log("✅ [DisposalManagement] Disposal record created:",g);const u=S.filter(D=>y.includes(D.sorting_result_id));console.log("📊 [DisposalManagement] Selected inventory items:",u.length);let f=0;for(const D of u){const xe=D.total_weight_grams/1e3;f+=xe,console.log(`📦 [DisposalManagement] Adding item to disposal: ${D.batch_number} Size ${D.size_class} - ${xe}kg (${D.total_weight_grams}g)`);const Oe={disposal_record_id:g.id,sorting_result_id:D.sorting_result_id,size_class:D.size_class,weight_kg:xe,batch_number:D.batch_number,storage_location_name:D.storage_location_name,farmer_name:D.farmer_name,processing_date:D.processing_date,quality_notes:D.quality_notes,disposal_reason:D.disposal_reason};console.log("📊 [DisposalManagement] Disposal item data:",Oe);const{error:K}=await v.from("disposal_items").insert(Oe);if(K)throw console.error("❌ [DisposalManagement] Error creating disposal item:",K),console.error("❌ [DisposalManagement] Item error details:",{code:K.code,message:K.message,details:K.details,hint:K.hint}),K}console.log(`Updating disposal record ${g.id} with total weight: ${f}kg`);const{error:he}=await v.from("disposal_records").update({total_weight_kg:f}).eq("id",g.id);if(he)throw console.error("Error updating disposal record:",he),he;M.success(`Disposal created successfully! ${y.length} items added (${f.toFixed(2)} kg)`),Q(!1),ns(),oe()}catch(s){console.error("Error creating disposal:",s),M.error("Failed to create disposal record")}finally{F(!1)}},as=async s=>{pe(s),X(!0);try{const{data:t,error:o}=await v.from("disposal_items").select("*").eq("disposal_record_id",s.id);o?(console.error("Error loading disposal items:",o),J([])):J(t||[])}catch(t){console.error("Error loading disposal items:",t),J([])}},os=async s=>{ge(s),h(!0);try{const{data:t,error:o}=await v.from("disposal_items").select("*").eq("disposal_record_id",s.id);o?(console.error("Error loading disposal items:",o),J([])):J(t||[])}catch(t){console.error("Error loading disposal items:",t),J([])}},ls=async s=>{try{const{error:t}=await v.rpc("complete_disposal",{p_disposal_id:s});if(t)throw t;M.success("Disposal completed successfully"),oe()}catch(t){console.error("Error completing disposal:",t),M.error("Failed to complete disposal")}},rs=async()=>{if(C)try{F(!0);const{error:s}=await v.from("disposal_records").update({status:"completed",approved_by:r?.id||null}).eq("id",C.id);if(s)throw s;const{error:t}=await v.from("disposal_items").select("sorting_result_id").eq("disposal_record_id",C.id);if(t)throw t;if(L&&L.length>0){const o=L.map(g=>g.sorting_result_id);console.log(`Removing ${o.length} items from inventory:`,o);const{error:m}=await v.from("sorting_results").update({total_weight_grams:0,total_pieces:0}).in("id",o);if(m)throw console.error("Error removing items from inventory:",m),m;console.log(`Successfully removed ${o.length} items from inventory`)}M.success("Disposal completed and items removed from storage"),X(!1),pe(null),oe()}catch(s){console.error("Error approving disposal:",s),M.error("Failed to approve disposal")}finally{F(!1)}},is=async()=>{if(C)try{F(!0),console.log(`Attempting to decline disposal: ${C.id}`);const{error:s}=await v.from("disposal_records").update({status:"cancelled",notes:(C.notes||"")+`

[Declined by user]`}).eq("id",C.id);if(s)throw console.error("Error updating disposal record:",s),s;console.log(`Declining disposal record ${C.id}`),M.success("Disposal declined and marked as cancelled"),X(!1),pe(null),oe()}catch(s){console.error("Error declining disposal:",s),M.error("Failed to decline disposal")}finally{F(!1)}},ns=()=>{Se(""),ke("waste"),Te(""),Ie(0),$e(""),O([]),re(""),ae("")},ze=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},cs=()=>{const s=["Number","Date","Reason","Weight (kg)","Status","Created By","Approved/Denied By"],t=H.map(u=>[u.disposal_number,new Date(u.disposal_date).toLocaleDateString(),u.disposal_reason?.name||"N/A",u.total_weight_kg.toFixed(1),u.status,u.disposed_by||"N/A",u.approved_by||(u.status==="pending"?"Pending":"-")]),o=[s.join(","),...t.map(u=>u.map(f=>`"${f}"`).join(","))].join(`
`),m=new Blob([o],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),l=URL.createObjectURL(m);g.setAttribute("href",l),g.setAttribute("download",`disposal-records-${new Date().toISOString().split("T")[0]}.csv`),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g)},ds=()=>{const s=window.open("","_blank");if(!s)return;const t=`
      <html>
        <head>
          <title>Disposal Records Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #1f2937; margin-bottom: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f3f4f6; font-weight: bold; }
            .status-pending { background-color: #fef3c7; color: #92400e; }
            .status-approved { background-color: #dbeafe; color: #1e40af; }
            .status-completed { background-color: #d1fae5; color: #065f46; }
            .status-cancelled { background-color: #fee2e2; color: #991b1b; }
          </style>
        </head>
        <body>
          <h1>Rio Fish Farm - Disposal Records Report</h1>
          <p>Generated on: ${new Date().toLocaleDateString()}</p>
          <p>Total Records: ${H.length}</p>
          <table>
            <thead>
              <tr>
                <th>Number</th>
                <th>Date</th>
                <th>Reason</th>
                <th>Weight (kg)</th>
                <th>Status</th>
                <th>Created By</th>
                <th>Approved/Denied By</th>
              </tr>
            </thead>
            <tbody>
              ${H.map(o=>`
                <tr>
                  <td>${o.disposal_number}</td>
                  <td>${new Date(o.disposal_date).toLocaleDateString()}</td>
                  <td>${o.disposal_reason?.name||"N/A"}</td>
                  <td>${o.total_weight_kg.toFixed(1)}</td>
                  <td class="status-${o.status}">${o.status}</td>
                  <td>${o.disposed_by||"N/A"}</td>
                  <td>${o.approved_by||(o.status==="pending"?"Pending":"-")}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `;s.document.write(t),s.document.close(),s.print()},H=d.filter(s=>{const t=s.disposal_number.toLowerCase().includes(I.toLowerCase())||s.disposal_reason?.name.toLowerCase().includes(I.toLowerCase()),o=te==="all"||s.status===te;return t&&o}),ms=S.reduce((s,t)=>s+t.total_weight_grams/1e3,0);return B?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 font-medium",children:"Loading disposal management..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 content-container",children:[e.jsx(Ts,{stats:G}),e.jsxs("div",{className:"container mx-auto responsive-padding max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Disposal Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage fish disposal and waste handling"})]}),e.jsxs(ve,{open:me,onOpenChange:Q,children:[e.jsx(xs,{asChild:!0,children:e.jsxs(k,{className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Create Disposal"]})}),e.jsxs(be,{className:"max-w-4xl w-[95vw] max-h-[90vh] overflow-y-auto overflow-x-hidden",children:[e.jsxs(De,{children:[e.jsx(ye,{className:"text-xl font-semibold",children:"Create New Disposal Record"}),e.jsx(we,{children:"Configure disposal criteria and select items for disposal"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 max-w-full overflow-x-hidden",children:[e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsx(z,{className:"text-lg",children:"Filter Items for Disposal"})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"daysOld",className:"text-sm font-medium",children:"Days Old Threshold"}),e.jsx(ee,{id:"daysOld",type:"number",value:c,onChange:s=>Ye(Number(s.target.value)),placeholder:"30",className:"mt-1",min:"0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"includeStorageIssues",checked:Ge,onCheckedChange:Qe}),e.jsx(j,{htmlFor:"includeStorageIssues",className:"text-sm",children:"Include Storage Issues"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"fromDate",className:"text-sm font-medium break-words",children:["From Date ",c===0?"(Optional)":c<=7?`(Auto-set to ${c} days ago)`:`(Manual selection for ${c}+ days)`]}),e.jsx(ee,{id:"fromDate",type:"date",value:U,onChange:s=>{re(s.target.value),s.target.value&&ae(new Date().toISOString().split("T")[0])},className:"mt-1",max:new Date().toISOString().split("T")[0],disabled:c>0&&c<=7}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 break-words",children:c===0?"Leave empty to show all items. Selecting a date will auto-set To Date to today.":c<=7?`Automatically set based on ${c} days threshold`:`Select start date for items ${c}+ days old. To Date will be auto-set to today.`})]}),e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"toDate",className:"text-sm font-medium break-words",children:["To Date ",c===0?"(Optional)":c<=7?"(Auto-set to today)":"(Manual selection)"]}),e.jsx(ee,{id:"toDate",type:"date",value:V,onChange:s=>ae(s.target.value),className:"mt-1",max:new Date().toISOString().split("T")[0],disabled:c>0&&c<=7}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 break-words",children:c===0?"Automatically set to today when From Date is selected":c<=7?"Automatically set to today":"Automatically set to today when From Date is selected"})]})]})]})]}),e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsx(z,{className:"text-lg",children:"Disposal Details"})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"reason",className:"text-sm font-medium",children:"Disposal Reason *"}),e.jsxs(ue,{value:Z,onValueChange:Se,children:[e.jsx(fe,{className:"mt-1",children:e.jsx(je,{placeholder:"Select reason"})}),e.jsx(_e,{children:b.map(s=>e.jsx(Y,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"method",className:"text-sm font-medium",children:"Disposal Method *"}),e.jsxs(ue,{value:Ce,onValueChange:ke,children:[e.jsx(fe,{className:"mt-1",children:e.jsx(je,{placeholder:"Select method"})}),e.jsx(_e,{children:Je.map(s=>e.jsx(Y,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"location",className:"text-sm font-medium",children:"Disposal Location"}),e.jsx(ee,{id:"location",value:Fe,onChange:s=>Te(s.target.value),placeholder:"e.g., Waste Management Facility",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"cost",className:"text-sm font-medium",children:"Disposal Cost (KSh)"}),e.jsx(ee,{id:"cost",type:"number",value:Ae,onChange:s=>Ie(Number(s.target.value)),placeholder:"0",className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"notes",className:"text-sm font-medium",children:"Notes"}),e.jsx(hs,{id:"notes",value:Me,onChange:s=>$e(s.target.value),placeholder:"Additional disposal notes...",rows:3,className:"mt-1"})]})]})]})]}),e.jsxs(w,{className:"overflow-x-hidden",children:[e.jsxs(R,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(z,{className:"text-lg",children:"Select Items for Disposal"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>O(S.map(s=>s.sorting_result_id)),className:"text-green-600 hover:text-green-700",children:[e.jsx(Ue,{className:"w-4 h-4 mr-1"}),"Select All"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>O([]),className:"text-gray-600 hover:text-gray-700",children:[e.jsx(ps,{className:"w-4 h-4 mr-1"}),"Clear All"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:Re,className:"text-blue-600 hover:text-blue-700",children:[e.jsx(Ns,{className:"w-4 h-4 mr-1"}),"Refresh"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 break-words",children:[e.jsxs("span",{className:"font-medium",children:["Selected: ",y.length," items"]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("span",{className:"font-medium",children:["Total Weight: ",S.filter(s=>y.includes(s.sorting_result_id)).reduce((s,t)=>s+t.total_weight_grams/1e3,0).toFixed(2)," kg"]})]}),e.jsx(P,{variant:"outline",className:"text-xs break-words",children:c===0?"Showing all items (no age filter)":c<=7?`Showing items ${c}+ days old (auto-range: ${U} to ${V})`:`Showing items ${c}+ days old (manual range: ${U||"any"} to ${V||"any"})`})]}),y.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2 break-words",children:["Size Distribution: ",Object.entries(S.filter(s=>y.includes(s.sorting_result_id)).reduce((s,t)=>(s[t.size_class]=(s[t.size_class]||0)+t.total_weight_grams/1e3,s),{})).map(([s,t])=>`Size ${s}: ${t.toFixed(1)}kg`).join(" | ")]})]}),e.jsxs(N,{children:[e.jsx("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:Object.entries(S.reduce((s,t)=>{const o=t.storage_location_name;return s[o]||(s[o]=[]),s[o].push(t),s},{})).map(([s,t])=>{const o=Ee.has(s),m=t.reduce((l,u)=>l+u.total_weight_grams/1e3,0),g=t.filter(l=>y.includes(l.sorting_result_id)).length;return e.jsxs("div",{className:"border-b last:border-b-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 cursor-pointer",onClick:()=>{const l=new Set(Ee);o?l.delete(s):l.add(s),Xe(l)},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ss,{className:"w-4 h-4 text-gray-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s}),t[0]?.storage_status==="inactive"&&e.jsx(P,{variant:"destructive",className:"text-xs",children:"Inactive"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.length," batches • ",m.toFixed(1),"kg",g>0&&` • ${g} selected`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:t[0]?.disposal_reason==="Storage Inactive"?"destructive":"secondary",children:t[0]?.disposal_reason}),e.jsx(ws,{className:`w-4 h-4 transition-transform ${o?"rotate-180":""}`})]})]}),o&&e.jsx("div",{className:"p-3 bg-white",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:t.map(l=>e.jsx("div",{className:`flex items-center justify-between p-2 rounded border ${y.includes(l.sorting_result_id)?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{checked:y.includes(l.sorting_result_id),onCheckedChange:u=>{O(u?[...y,l.sorting_result_id]:y.filter(f=>f!==l.sorting_result_id))}}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-blue-600",children:l.batch_number}),e.jsxs(P,{variant:"outline",className:"text-xs",children:["Size ",l.size_class]}),e.jsxs(P,{variant:l.days_in_storage>30?"destructive":"secondary",className:"text-xs",children:[l.days_in_storage," days"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l.farmer_name," • ",(l.total_weight_grams/1e3).toFixed(1),"kg"]})]})]})},l.sorting_result_id))})})]},s)})}),S.length===0&&e.jsxs(Le,{className:"mt-4",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx(Pe,{children:"No items found for disposal with current criteria."})]})]})]})]}),e.jsxs(Ne,{children:[e.jsx(k,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),e.jsx(k,{onClick:ts,className:"bg-red-600 hover:bg-red-700",disabled:A,children:A?"Processing...":"Create Disposal"})]})]})]}),e.jsx(ve,{open:le,onOpenChange:X,children:e.jsxs(be,{className:"max-w-2xl",children:[e.jsxs(De,{children:[e.jsxs(ye,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-orange-500"}),"Confirm Disposal"]}),e.jsx(we,{children:"Please review the disposal details and confirm or decline the action."})]}),C&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Disposal Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Disposal Number:"}),e.jsx("p",{className:"text-gray-600",children:C.disposal_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Method:"}),e.jsx("p",{className:"text-gray-600 capitalize",children:C.disposal_method})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Weight:"}),e.jsxs("p",{className:"text-gray-600",children:[C.total_weight_kg.toFixed(2)," kg"]})]})]}),C.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"font-medium",children:"Notes:"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:C.notes})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),"Items Being Disposed (",L.length," items)"]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:L.length>0?e.jsx("div",{className:"space-y-2",children:L.map((s,t)=>e.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-600 text-lg",children:s.batch_number}),e.jsxs(P,{variant:"outline",className:"text-sm",children:["Size ",s.size_class||"Unknown"]})]}),e.jsxs("span",{className:"text-lg font-semibold text-gray-700",children:[s.weight_kg.toFixed(2)," kg"]})]})},t))}):e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(ce,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Loading disposal items..."})]})})]}),e.jsxs(Le,{children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsxs(Pe,{children:[e.jsx("strong",{children:"Warning:"})," Approving this disposal will permanently remove the ",L.length," items shown above from storage. This action cannot be undone."]})]})]}),e.jsxs(Ne,{className:"gap-2",children:[e.jsx(k,{variant:"outline",onClick:is,disabled:A,className:"text-red-600 hover:text-red-700",children:A?"Processing...":"Decline"}),e.jsx(k,{onClick:rs,disabled:A,className:"bg-green-600 hover:bg-green-700",children:A?"Processing...":"Approve & Remove from Storage"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Disposals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]}),e.jsx(ie,{className:"h-8 w-8 text-gray-400"})]})})}),e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:d.filter(s=>s.status==="pending").length})]}),e.jsx(Ke,{className:"h-8 w-8 text-yellow-400"})]})})}),e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available Items"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:S.length})]}),e.jsx(ce,{className:"h-8 w-8 text-orange-400"})]})})}),e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Weight"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[ms.toFixed(1),"kg"]})]}),e.jsx(Ve,{className:"h-8 w-8 text-blue-400"})]})})})]}),e.jsx(w,{className:"mb-6",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ee,{placeholder:"Search disposal records...",value:I,onChange:s=>se(s.target.value),className:"max-w-md"})}),e.jsxs(ue,{value:te,onValueChange:de,children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"Status"})}),e.jsxs(_e,{children:[e.jsx(Y,{value:"all",children:"All"}),e.jsx(Y,{value:"pending",children:"Pending"}),e.jsx(Y,{value:"approved",children:"Approved"}),e.jsx(Y,{value:"completed",children:"Completed"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"})]})]})]})})}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"Disposal Records"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{onClick:cs,variant:"outline",size:"sm",disabled:H.length===0,className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Export CSV"]}),e.jsxs(k,{onClick:ds,variant:"outline",size:"sm",disabled:H.length===0,className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"Export PDF"]})]})]})}),e.jsxs(N,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(us,{children:[e.jsx(fs,{children:e.jsxs(Be,{children:[e.jsx(W,{children:"Number"}),e.jsx(W,{children:"Date"}),e.jsx(W,{children:"Reason"}),e.jsx(W,{children:"Weight"}),e.jsx(W,{children:"Status"}),e.jsx(W,{children:"Created By"}),e.jsx(W,{children:"Approved/Denied By"}),e.jsx(W,{children:"Actions"})]})}),e.jsx(js,{children:H.map(s=>e.jsxs(Be,{className:"hover:bg-gray-50",children:[e.jsx(q,{className:"font-medium",children:s.disposal_number}),e.jsx(q,{children:new Date(s.disposal_date).toLocaleDateString()}),e.jsx(q,{children:s.disposal_reason?.name}),e.jsxs(q,{children:[s.total_weight_kg.toFixed(1),"kg"]}),e.jsx(q,{children:e.jsx(P,{className:ze(s.status),children:s.status})}),e.jsx(q,{children:s.disposed_by||"N/A"}),e.jsx(q,{children:s.approved_by||(s.status==="pending"?"Pending":"-")}),e.jsx(q,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>os(s),title:"View Details",children:e.jsx(We,{className:"w-4 h-4"})}),s.status==="pending"&&e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>as(s),className:"text-blue-600 hover:text-blue-700",title:"Review & Approve Disposal",children:e.jsx(Ue,{className:"w-4 h-4"})}),s.status==="approved"&&e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>ls(s.id),className:"text-green-600 hover:text-green-700",title:"Complete Disposal",children:e.jsx(Fs,{className:"w-4 h-4"})})]})})]},s.id))})]})}),H.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"No disposal records found"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Create your first disposal record to get started"})]})]})]}),e.jsx(ve,{open:p,onOpenChange:h,children:e.jsxs(be,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(De,{children:[e.jsxs(ye,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"Disposal Details"]}),e.jsx(we,{children:"View detailed information about this disposal record"})]}),_&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(z,{className:"text-lg",children:"Basic Information"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Disposal Number"}),e.jsx("p",{className:"text-lg font-semibold",children:_.disposal_number})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(P,{className:ze(_.status),children:_.status})})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(_.disposal_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Method"}),e.jsx("p",{className:"text-gray-900 capitalize",children:_.disposal_method})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Location"}),e.jsx("p",{className:"text-gray-900",children:_.disposal_location||"Not specified"})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Cost"}),e.jsxs("p",{className:"text-gray-900",children:["KSh ",_.disposal_cost.toFixed(2)]})]})]})})]}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(z,{className:"text-lg",children:"Disposal Reason"})}),e.jsx(N,{children:e.jsx("p",{className:"text-gray-900",children:_.disposal_reason?.name||"Not specified"})})]}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(z,{className:"text-lg",children:"Summary"})}),e.jsx(N,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Weight"}),e.jsxs("p",{className:"text-xl font-semibold",children:[_.total_weight_kg.toFixed(2)," kg"]})]})]})})})]}),_.notes&&e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(z,{className:"text-lg",children:"Notes"})}),e.jsx(N,{children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:_.notes})})]}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(z,{className:"text-lg",children:"Disposal Items"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Total Weight"}),e.jsxs("p",{className:"text-lg font-semibold",children:[_.total_weight_kg.toFixed(2)," kg"]})]})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Disposal Location"}),e.jsx("p",{className:"text-gray-900 font-medium",children:_.disposal_location||"Not specified"})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Disposal Method"}),e.jsx("p",{className:"text-gray-900 font-medium capitalize",children:_.disposal_method.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Disposal Cost"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:["KSh ",_.disposal_cost.toFixed(2)]})]})]})})]}),L.length>0&&e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(z,{className:"text-lg",children:"Detailed Items Breakdown"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:L.map((s,t)=>e.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-600 text-lg",children:s.batch_number}),e.jsxs(P,{variant:"outline",className:"text-sm",children:["Size ",s.size_class||"Unknown"]})]}),e.jsxs("span",{className:"text-lg font-semibold text-gray-700",children:[s.weight_kg.toFixed(2)," kg"]})]})},t))})})]})]}),e.jsx(Ne,{children:e.jsx(k,{variant:"outline",onClick:()=>h(!1),children:"Close"})})]})})]})]})}export{Zs as default};
