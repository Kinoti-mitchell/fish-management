import{c as De,s as ze,m as Re,r as h,j as e,N as F,B as N,L as b,I as E,e as k,a as w,b as _,f as Fe,g as Ee,l as D,F as We,E as Y,O,w as I,o as Z,t as m}from"./main-BRmubxtL.js";import{S as ee,a as te,b as se,c as ae,d as z}from"./select-D_9msCHQ.js";import{T as $e}from"./textarea-CoDOjvpH.js";import{D as ie,a as Ce,b as le,c as ne,d as re}from"./dialog-Bz3ntVCz.js";import{R as ce}from"./refresh-cw-DvbvjgcC.js";import{P as Oe}from"./plus-Cm8XecHb.js";import{C as de}from"./circle-check-big-CVxj8ACg.js";import{S as Ie}from"./scale-DETuzKgz.js";import{R as Ve}from"./ruler-Bz0k-UBQ.js";import{M as Pe}from"./map-pin-DsS6pfgm.js";import{C as Le}from"./index-CRLLa29k.js";import{C as Te}from"./clock-_CIzaxdv.js";import{W as V}from"./weight-7gXMaHKE.js";import{D as oe}from"./dollar-sign-Bm_RG5x9.js";import{S as Ue}from"./square-pen-DINYRZ-n.js";import"./index-D-ZiJKjQ.js";import"./index-DdgTQUhj.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ae=De("calculator",Me);class u{static async logEvent(c){try{const x=JSON.parse(sessionStorage.getItem("currentUser")||"null");if(!x){console.warn("No authenticated user found for audit logging");return}const g={user_id:x.id,action:c.action,table_name:c.table_name,record_id:c.record_id,old_values:c.old_values?JSON.stringify(c.old_values):null,new_values:c.new_values?JSON.stringify(c.new_values):null,ip_address:c.ip_address||null,user_agent:c.user_agent||navigator.userAgent,created_at:new Date().toISOString()},p=void 0;let v=null;p||(v=(await ze.from("audit_logs").insert([g])).error),v&&console.warn("Failed to log audit event:",v)}catch(x){console.warn("Failed to log audit event:",x)}}static async logCreate(c,x,g){await u.logEvent({action:"CREATE",table_name:c,record_id:x,new_values:g})}static async logUpdate(c,x,g,p){await u.logEvent({action:"UPDATE",table_name:c,record_id:x,old_values:g,new_values:p})}static async logDelete(c,x,g){await u.logEvent({action:"DELETE",table_name:c,record_id:x,old_values:g})}static async logLogin(c,x){await u.logEvent({action:"LOGIN",table_name:"profiles",record_id:c,new_values:{login_time:new Date().toISOString()},user_agent:x})}static async logLogout(c){await u.logEvent({action:"LOGOUT",table_name:"profiles",record_id:c,new_values:{logout_time:new Date().toISOString()}})}static async logCustomAction(c,x,g,p){await u.logEvent({action:c,table_name:x,record_id:g,new_values:p})}}const Be={create:u.logCreate,update:u.logUpdate,delete:u.logDelete,login:u.logLogin,logout:u.logLogout,custom:u.logCustomAction};function ot({onNavigate:Ke}){const{user:c}=Re(),[x,g]=h.useState([]),[p,v]=h.useState(!1),[P,L]=h.useState(!0),[T,U]=h.useState(!1),[W,M]=h.useState(!1),[j,xe]=h.useState([]),[i,A]=h.useState(null),[d,he]=h.useState(null),[me,B]=h.useState(!1),[$,ue]=h.useState(new Set),[l,f]=h.useState({dispatchId:"",outletId:"",actualWeight:"",actualValue:"",condition:"",receivedBy:c?`${c.first_name} ${c.last_name}`:"",notes:"",sizeDiscrepancies:{}});h.useEffect(()=>{c&&f(t=>({...t,receivedBy:`${c.first_name} ${c.last_name}`}))},[c]);const K=t=>`REC${String(t+1).padStart(4,"0")}`,ge=t=>{const a={};return t.forEach((s,r)=>{const n=s.dispatch?.outlet_order?.outlet?.name||"Unknown Outlet";a[n]||(a[n]=[]),a[n].push({...s,displayIndex:r})}),a},pe=t=>{const a=new Set($);a.has(t)?a.delete(t):a.add(t),ue(a)},fe=t=>{he(t),B(!0)},C=async()=>{try{L(!0);const t=O(c?.id),{data:a,error:s}=await I(async()=>await t.from("outlet_receiving").select(`
            *,
            dispatch_records!inner(
              id,
              destination,
              dispatch_date,
              outlet_orders!inner(
                id,
                order_number,
                outlets!inner(
                  id,
                  name,
                  location
                )
              )
            )
          `).order("received_date",{ascending:!1}));if(s)throw s;const r=(a||[]).map(n=>({id:n.id,dispatch_id:n.dispatch_id,outlet_order_id:n.outlet_order_id,received_date:n.received_date,received_by:n.received_by,expected_weight:parseFloat(n.expected_weight)||0,actual_weight_received:parseFloat(n.actual_weight_received)||0,expected_value:parseFloat(n.expected_value)||0,actual_value_received:parseFloat(n.actual_value_received)||0,condition:n.condition||"good",size_discrepancies:n.size_discrepancies||null,discrepancy_notes:n.discrepancy_notes||null,status:n.status||"confirmed",outlet_name:n.outlet_name||"Unknown",outlet_location:n.outlet_location||"Unknown",created_at:n.created_at,updated_at:n.updated_at,dispatch:{id:n.dispatch_records?.id||n.dispatch_id,destination:n.dispatch_records?.destination||"Unknown",dispatch_date:n.dispatch_records?.dispatch_date,outlet_order:{order_number:n.dispatch_records?.outlet_orders?.order_number||"N/A",outlet:{name:n.dispatch_records?.outlet_orders?.outlets?.name||n.outlet_name||"Unknown",location:n.dispatch_records?.outlet_orders?.outlets?.location||n.outlet_location||"Unknown"}}}}));g(r)}catch(t){const a=Z(t,"fetching receiving records");m.error(a),g([])}finally{L(!1)}},be=async()=>{try{const t=O(c?.id),{data:a,error:s}=await I(async()=>await t.from("dispatch_records").select(`
            id,
            outlet_order_id,
            destination,
            total_weight,
            total_value,
            size_breakdown,
            status,
            dispatch_date,
            notes,
            picking_date,
            picking_time,
            assigned_driver,
            outlet_order:outlet_orders(
              id,
              order_number,
              total_value,
              outlet:outlets(name, location, phone)
            )
          `).in("status",["in-transit","dispatched","scheduled"]).order("dispatch_date",{ascending:!1}));if(s)throw s;return console.log("Fetched dispatches:",a),a?.forEach((r,n)=>{console.log(`Dispatch ${n} size breakdown:`,r.size_breakdown)}),a||[]}catch(t){return console.error("Error fetching dispatches:",t),[]}},y=()=>{if(!i?.size_breakdown)return 0;let t=0;return Object.entries(i.size_breakdown).forEach(([a,s])=>{const r=l.sizeDiscrepancies[parseInt(a)]||0,n=s+r;t+=n}),t},q=()=>{const t=y(),a=parseFloat(l.actualWeight)||0,s=i?.size_breakdown&&Object.keys(i.size_breakdown).length>0,r=Object.keys(l.sizeDiscrepancies).length>0;return!!(l.dispatchId&&i&&l.actualWeight&&l.actualWeight.trim()!==""&&parseFloat(l.actualWeight)>0&&l.actualValue&&l.actualValue.trim()!==""&&parseFloat(l.actualValue)>0&&l.condition&&l.condition.trim()!==""&&c&&c.id&&(!s||r)&&(t===0||Math.abs(t-a)<=.1))},ve=()=>{const t=[];(!l.dispatchId||!i)&&t.push("Please select a valid dispatch");const a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(l.dispatchId&&!a.test(l.dispatchId)&&(t.push("Invalid dispatch ID format. Please refresh and select a dispatch again."),console.error("Invalid dispatch ID:",l.dispatchId)),!l.actualWeight||l.actualWeight.trim()===""?t.push("Please enter the weight received"):parseFloat(l.actualWeight)<=0?t.push("Weight received must be greater than 0"):parseFloat(l.actualWeight)<.1&&t.push("Weight received seems too low (<0.1kg). Please verify the value"),!l.actualValue||l.actualValue.trim()===""?t.push("Please enter the value received"):parseFloat(l.actualValue)<=0&&t.push("Value received must be greater than 0"),(!l.condition||l.condition.trim()==="")&&t.push("Please select the condition of received items"),(!c||!c.id)&&t.push("User session expired. Please refresh and try again"),i){const s=i.total_weight||0,r=i.total_value||0;s>1e4&&console.warn(`âš ï¸ WARNING: Expected weight (${s}kg) seems unrealistic. Please verify dispatch data.`),r>1e6&&console.warn(`âš ï¸ WARNING: Expected value (KES ${r.toLocaleString()}) seems unrealistic. Please verify dispatch data.`)}if(i&&i.total_weight>0){const s=i.total_weight||0,r=parseFloat(l.actualWeight)||0,n=Math.abs(r-s),o=s>0?n/s*100:0;o>20&&console.warn(`Weight discrepancy is ${o.toFixed(1)}% - please verify the received weight`)}if(l.actualWeight&&isNaN(parseFloat(l.actualWeight))&&t.push("Weight received must be a valid number"),l.actualValue&&isNaN(parseFloat(l.actualValue))&&t.push("Value received must be a valid number"),i?.size_breakdown&&Object.keys(i.size_breakdown).length>0)if(!(Object.keys(l.sizeDiscrepancies).length>0))t.push("This dispatch has size breakdown data. Please fill in the size discrepancies section below.");else{const r=y(),n=parseFloat(l.actualWeight)||0,o=Math.abs(r-n);o>.1&&t.push(`Size breakdown total (${r.toFixed(1)}kg) does not match total weight received (${n.toFixed(1)}kg). Difference: ${o.toFixed(1)}kg`)}return t},je=async(t,a,s,r,n)=>{try{await Be.custom(t,a,s,{old_values:r,new_values:n})}catch(o){console.warn("Failed to log audit event:",o)}},Ne=async()=>{if(W){m.warning("Please wait, submission in progress...");return}try{M(!0);const t=ve();if(t.length>0){t.forEach(o=>m.error(o));return}if(i){const o=i.total_weight||0,H=i.total_value||0,R=parseFloat(l.actualWeight)||0;o>1e4&&m.warning(`âš ï¸ Large expected weight: ${o}kg`),H>1e6&&m.warning(`âš ï¸ Large expected value: KES ${H.toLocaleString()}`),R>o&&R>1e4&&m.warning(`âš ï¸ Received weight (${R}kg) is larger than expected (${o}kg)`);const X=o>0?Math.abs(R-o)/o*100:0;X>20&&m.warning(`âš ï¸ Large discrepancy: ${X.toFixed(1)}%`)}const a={dispatch_id:l.dispatchId,outlet_order_id:i.outlet_order_id,received_date:new Date().toISOString().split("T")[0],received_by:c?.id||null,expected_weight:parseFloat((i.total_weight||0).toString()),actual_weight_received:parseFloat(l.actualWeight)||0,expected_pieces:0,actual_pieces_received:0,expected_value:parseFloat((i.total_value||i.outlet_order?.total_value||0).toString()),actual_value_received:parseFloat(l.actualValue)||0,condition:l.condition||"good",size_discrepancies:Object.keys(l.sizeDiscrepancies).length>0?l.sizeDiscrepancies:null,discrepancy_notes:l.notes||null,status:"confirmed",outlet_name:i.outlet_order?.outlet?.name||i.destination,outlet_location:i.outlet_order?.outlet?.location||"Unknown"};console.log("Creating receiving record with data:",a),console.log("Form data dispatchId:",l.dispatchId),console.log("Form data dispatchId type:",typeof l.dispatchId),console.log("Selected dispatch:",i),console.log("Selected dispatch ID:",i?.id),console.log("Selected dispatch ID type:",typeof i?.id);const s=O(c?.id),{data:r,error:n}=await I(async()=>await s.from("outlet_receiving").insert([a]).select("id").single());if(n)throw n;await s.from("dispatch_records").update({status:"delivered",updated_at:new Date().toISOString()}).eq("id",l.dispatchId);try{await je("INSERT","outlet_receiving",r.id,null,{...a,entry_code:`RCV-${Date.now()}`,fish_type:i.fish_type||"Tilapia",condition:a.condition,weight_received:a.actual_weight_received,outlet_id:i.outlet_order?.outlet_id,receiving_date:a.received_date})}catch(o){console.warn("Audit logging failed (non-critical):",o)}m.success("Receiving record created successfully"),f({dispatchId:"",outletId:"",actualWeight:"",actualValue:"",condition:"",receivedBy:c?`${c.first_name} ${c.last_name}`:"",notes:"",sizeDiscrepancies:{}}),A(null),v(!1),await C()}catch(t){const a=Z(t,"creating receiving record");m.error(a)}finally{M(!1)}},we=async()=>{try{const t=await be();console.log("Fetched dispatches:",t),xe(t)}catch(t){console.error("Error loading dispatches:",t),m.error("Failed to load available dispatches")}};h.useEffect(()=>{console.log("Available dispatches updated:",j),j.forEach((t,a)=>{console.log(`Dispatch ${a}:`,{id:t.id,idType:typeof t.id,destination:t.destination,total_weight:t.total_weight,size_breakdown:t.size_breakdown})})},[j]);const _e=t=>{console.log("Selected dispatch ID:",t),console.log("Available dispatches:",j);const a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!a.test(t)){console.error("Invalid dispatch ID format:",t),m.error("Invalid dispatch selection. Please refresh and try again.");return}const s=j.find(r=>r.id===t);if(console.log("Found dispatch:",s),!s){console.error("Dispatch not found for ID:",t),m.error("Selected dispatch not found. Please refresh and try again.");return}if(!s.id||!a.test(s.id)){console.error("Dispatch has invalid ID:",s.id),m.error("Selected dispatch has invalid ID. Please refresh and try again.");return}A(s),console.log("Selected dispatch size breakdown:",s.size_breakdown),console.log("Size breakdown keys:",s.size_breakdown?Object.keys(s.size_breakdown):"No size breakdown"),console.log("Size breakdown entries:",s.size_breakdown?Object.entries(s.size_breakdown):"No size breakdown"),f(r=>({...r,dispatchId:s.id,outletId:s.outlet_order?.outlet?.name||"",actualWeight:s.total_weight?.toString()||"",actualValue:s.total_value?.toString()||"",condition:"good"}))},ye=async()=>{U(!0),await C(),U(!1)};h.useEffect(()=>{C()},[]),h.useEffect(()=>{p&&we()},[p]);const G=t=>{switch(t){case"confirmed":return"bg-emerald-500 text-white";case"disputed":return"bg-red-500 text-white";case"pending":return"bg-amber-500 text-white";default:return"bg-gray-500 text-white"}},J=t=>{switch(t){case"excellent":return"bg-green-500 text-white";case"good":return"bg-blue-500 text-white";case"fair":return"bg-orange-500 text-white";case"poor":return"bg-red-500 text-white";default:return"bg-gray-500 text-white"}},Se=t=>`KES ${t.toLocaleString()}`,Q=(t,a)=>{const s=a-t,r=t>0?(s/t*100).toFixed(1):"0";return{diff:s,percentage:r}},ke=t=>{if(!t)return"No size discrepancies";const a=Object.entries(t).filter(([s,r])=>r!==0).map(([s,r])=>`Size ${s}: ${r>0?"+":""}${r}`);return a.length>0?a.join(", "):"No size discrepancies"},S={totalReceivings:x.length,confirmed:x.filter(t=>t.status==="confirmed").length,disputed:x.filter(t=>t.status==="disputed").length,totalValue:x.reduce((t,a)=>t+(a.actual_value_received||0),0),totalWeight:x.reduce((t,a)=>t+(a.actual_weight_received||0),0)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50 content-container responsive-padding",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl shadow-lg",children:e.jsx(F,{className:"h-10 w-10 text-white"})}),"Outlet Receiving Records"]}),e.jsx("p",{className:"text-xl text-gray-600 ml-16",children:"Track what outlets received â€¢ Size-based verification â€¢ Quality control"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(N,{variant:"outline",onClick:ye,disabled:T,className:"px-6 py-3 rounded-2xl font-semibold",children:[e.jsx(ce,{className:`h-5 w-5 mr-2 ${T?"animate-spin":""}`}),"Refresh"]}),e.jsxs(ie,{open:p,onOpenChange:v,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(N,{className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-4 rounded-2xl font-semibold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(Oe,{className:"h-6 w-6 mr-3"}),"Record Receiving"]})}),e.jsxs(le,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ne,{children:[e.jsx(re,{className:"text-2xl font-bold text-gray-900",children:"Record Outlet Receiving"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Fields marked with ",e.jsx("span",{className:"text-red-500",children:"*"})," are required"]})]}),e.jsxs("div",{className:"space-y-6 py-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(b,{className:"text-base font-semibold text-gray-700",children:["Select Dispatch ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ee,{value:l.dispatchId,onValueChange:_e,children:[e.jsx(te,{className:"h-14 text-base",children:e.jsx(se,{placeholder:"Select dispatch to receive"})}),e.jsx(ae,{children:j.map(t=>e.jsxs(z,{value:t.id,children:[t.outlet_order?.order_number||`ORD-${t.id?.slice(-6)}`," - ",t.destination,t.total_weight>0?` (${t.total_weight}kg)`:" (Not picked yet)"," ","- ",t.status.toUpperCase()]},t.id))})]})]}),i&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border-l-4 border-blue-400",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Dispatch Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Outlet:"})," ",i.outlet_order?.outlet?.name||i.destination]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",i.outlet_order?.outlet?.location||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Order Number:"})," ",i.outlet_order?.order_number||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 rounded text-xs font-medium ${i.status==="dispatched"?"bg-green-100 text-green-800":i.status==="in-transit"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:i.status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expected Weight:"}),e.jsxs("span",{className:`font-medium ${i.total_weight>1e4?"text-red-600":"text-green-600"}`,children:[i.total_weight,"kg",i.total_weight>1e4&&e.jsx("span",{className:"text-xs text-red-500 ml-1",children:"âš ï¸"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expected Value:"}),e.jsxs("span",{className:`font-medium ${(i.total_value||0)>1e6?"text-red-600":"text-gray-900"}`,children:["KES ",(i.total_value||i.outlet_order?.total_value||0).toLocaleString(),(i.total_value||0)>1e6&&e.jsx("span",{className:"text-xs text-red-500 ml-1",children:"âš ï¸"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Dispatch Date:"})," ",new Date(i.dispatch_date).toLocaleDateString()]}),i.assigned_driver&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Driver:"})," ",i.assigned_driver]}),i.picking_date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Picking Date:"})," ",new Date(i.picking_date).toLocaleDateString()]})]}),i.size_breakdown&&Object.keys(i.size_breakdown).length>0?e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:"Size Breakdown Available:"}),e.jsxs("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-medium",children:[Object.keys(i.size_breakdown).length," sizes"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(i.size_breakdown).map(([t,a])=>e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium border border-blue-300",children:["Size ",t,": ",a,"kg"]},t))}),e.jsx("div",{className:"mt-2 text-xs text-blue-700",children:"âš ï¸ Size discrepancies must be filled below before submitting"})]}):e.jsx("div",{className:"mt-3 p-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600",children:"No size breakdown data available for this dispatch"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(b,{className:"text-base font-semibold text-gray-700",children:["Weight Received (kg) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(E,{type:"number",step:"0.1",placeholder:"202.5",className:"h-14 text-base",value:l.actualWeight,onChange:t=>f({...l,actualWeight:t.target.value})}),i&&l.actualWeight&&e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-gray-600",children:["Expected: ",i.total_weight,"kg"]}),(()=>{const t=i.total_weight||0,a=parseFloat(l.actualWeight)||0,s=t-a,r=a-t,n=t>0?(r/t*100).toFixed(1):"0",o=Math.abs(r)>t*.1;return e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`${o?"text-orange-600 font-medium":"text-green-600"}`,children:r>0?`+${r.toFixed(1)}kg (${n}% over)`:r<0?`${r.toFixed(1)}kg (${n}% under)`:"Exact match"}),e.jsxs("div",{className:"text-blue-600 font-medium",children:["Remaining: ",s>0?s.toFixed(1):0,"kg"]})]})})()]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(b,{className:"text-base font-semibold text-gray-700",children:["Value Received (KES) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(E,{type:"number",placeholder:"101250",className:"h-14 text-base",value:l.actualValue,onChange:t=>f({...l,actualValue:t.target.value})}),i&&l.actualValue&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Expected: KES ",i.total_value?.toLocaleString()]}),(()=>{const t=i.total_value||0,s=(parseFloat(l.actualValue)||0)-t,r=t>0?(s/t*100).toFixed(1):"0",n=Math.abs(s)>t*.1;return e.jsxs("span",{className:`ml-2 ${n?"text-orange-600 font-medium":"text-green-600"}`,children:["(",s>0?"+":"","KES ",s.toLocaleString(),", ",r,"%)"]})})()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(b,{className:"text-base font-semibold text-gray-700",children:["Quality Condition ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ee,{value:l.condition,onValueChange:t=>f({...l,condition:t}),children:[e.jsx(te,{className:"h-14 text-base",children:e.jsx(se,{placeholder:"Select condition"})}),e.jsxs(ae,{children:[e.jsx(z,{value:"excellent",children:"ðŸŸ¢ Excellent - Perfect condition"}),e.jsx(z,{value:"good",children:"ðŸ”µ Good - Minor issues"}),e.jsx(z,{value:"fair",children:"ðŸŸ¡ Fair - Some quality concerns"}),e.jsx(z,{value:"poor",children:"ðŸ”´ Poor - Significant quality issues"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{className:"text-base font-semibold text-gray-700",children:"Received By"}),e.jsx(E,{placeholder:"Staff member name",className:"h-14 text-base bg-gray-50",value:l.receivedBy,readOnly:!0,title:"Automatically set to logged-in user"})]}),i?.size_breakdown&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(b,{className:"text-base font-semibold text-gray-700",children:["Size Discrepancies ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-blue-600"}),e.jsx("div",{className:"text-sm text-blue-800 font-medium",children:"This dispatch has size breakdown data. Please fill in the actual quantities received for each size."})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(i.size_breakdown).map(([t,a])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{className:"text-sm font-medium text-gray-600",children:["Size ",t," (Expected: ",a,"kg)"]}),e.jsx(E,{type:"number",step:"0.1",placeholder:"Actual received",className:"h-10 text-sm",onChange:s=>{const n=(parseFloat(s.target.value)||0)-a;f(o=>({...o,sizeDiscrepancies:{...o.sizeDiscrepancies,[parseInt(t)]:n}}))}})]},t))}),Object.keys(l.sizeDiscrepancies).length>0&&e.jsxs("div",{className:"mt-4 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Size Breakdown Total:"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[y().toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Weight Received:"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[parseFloat(l.actualWeight||"0").toFixed(1)," kg"]})]}),(()=>{const t=y(),a=parseFloat(l.actualWeight||"0"),s=Math.abs(t-a),r=s<=.1;return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${r?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:"Match Status:"}),e.jsx("span",{className:`text-sm font-bold ${r?"text-green-600":"text-red-600"}`,children:r?"âœ… Match":`âŒ ${s.toFixed(1)}kg difference`})]})})()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{className:"text-base font-semibold text-gray-700",children:"Quality & Discrepancy Notes"}),e.jsx($e,{placeholder:"Any quality issues, missing items, or other discrepancies...",className:"h-24 text-base",value:l.notes,onChange:t=>f({...l,notes:t.target.value})})]}),e.jsxs("div",{className:"flex flex-col gap-4 pt-6",children:[!q()&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-amber-600"}),e.jsx("div",{className:"text-sm text-amber-800 font-medium",children:(()=>{const t=y(),a=parseFloat(l.actualWeight||"0"),s=Math.abs(t-a),r=i?.size_breakdown&&Object.keys(i.size_breakdown).length>0,n=Object.keys(l.sizeDiscrepancies).length>0;return r&&!n?"This dispatch has size breakdown data. Please fill in the size discrepancies section below.":t>0&&s>.1?`Size breakdown total (${t.toFixed(1)}kg) does not match total weight (${a.toFixed(1)}kg). Please adjust the values.`:"Please fill in all required fields to continue"})()})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(N,{variant:"outline",onClick:()=>v(!1),className:"px-8 py-3 text-base",children:"Cancel"}),e.jsx(N,{onClick:Ne,disabled:W||!q(),className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 px-8 py-3 text-base disabled:opacity-50 disabled:cursor-not-allowed",children:W?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4 mr-2 animate-spin"}),"Recording..."]}):"Record Receiving"})]})]})]})]})]})]})," "]}),"   ",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(w,{className:"border-0 shadow-xl bg-gradient-to-br from-green-50 to-emerald-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wide",children:"Total Records"}),e.jsx("p",{className:"text-4xl font-bold text-green-900 mt-2",children:S.totalReceivings})]}),e.jsx("div",{className:"p-4 bg-green-600 rounded-2xl shadow-lg",children:e.jsx(F,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(w,{className:"border-0 shadow-xl bg-gradient-to-br from-emerald-50 to-green-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-600 uppercase tracking-wide",children:"Confirmed"}),e.jsx("p",{className:"text-4xl font-bold text-emerald-900 mt-2",children:S.confirmed})]}),e.jsx("div",{className:"p-4 bg-emerald-600 rounded-2xl shadow-lg",children:e.jsx(de,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(w,{className:"border-0 shadow-xl bg-gradient-to-br from-red-50 to-red-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-red-600 uppercase tracking-wide",children:"Disputed"}),e.jsx("p",{className:"text-4xl font-bold text-red-900 mt-2",children:S.disputed})]}),e.jsx("div",{className:"p-4 bg-red-600 rounded-2xl shadow-lg",children:e.jsx(k,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(w,{className:"border-0 shadow-xl bg-gradient-to-br from-blue-50 to-blue-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wide",children:"Total Weight"}),e.jsx("p",{className:"text-4xl font-bold text-blue-900 mt-2",children:S.totalWeight.toFixed(1)}),e.jsx("p",{className:"text-sm text-blue-600",children:"kg"})]}),e.jsx("div",{className:"p-4 bg-blue-600 rounded-2xl shadow-lg",children:e.jsx(Ie,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(w,{className:"border-0 shadow-xl bg-gradient-to-br from-purple-50 to-purple-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wide",children:"Total Value"}),e.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-2",children:Se(S.totalValue)})]}),e.jsx("div",{className:"p-4 bg-purple-600 rounded-2xl shadow-lg",children:e.jsx(Ae,{className:"h-8 w-8 text-white"})})]})})})]}),e.jsxs(w,{className:"border-0 shadow-2xl bg-white/80 backdrop-blur-sm",children:[e.jsx(Fe,{className:"pb-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-t-3xl",children:e.jsxs(Ee,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Ve,{className:"h-8 w-8 text-green-600"}),"Receiving Records by Size"]})}),e.jsx(_,{className:"p-8",children:P?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading receiving records..."})]}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No receiving records found"}),e.jsx("p",{className:"text-gray-500",children:"Start by recording your first outlet receiving"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(ge(x)).map(([t,a])=>e.jsxs("div",{className:"border-2 border-gray-100 rounded-3xl p-6 hover:shadow-xl transition-all duration-300 bg-gradient-to-r from-white to-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>pe(t),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t}),e.jsx("p",{className:"text-sm text-gray-500",children:a[0]?.dispatch?.outlet_order?.outlet?.location||"Unknown Location"})]})]}),e.jsxs(D,{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:[a.length," ",a.length===1?"Order":"Orders"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Total Received: ",a.reduce((s,r)=>s+(r.actual_weight_received||0),0).toFixed(1)," kg"]}),e.jsx(Le,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 ${$.has(t)?"rotate-180":""}`})]})]}),$.has(t)&&e.jsx("div",{className:"mt-6 space-y-4",children:a.map((s,r)=>{const n=Q(s.expected_weight||0,s.actual_weight_received||0),o=Q(s.expected_value||0,s.actual_value_received||0);return e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:K(s.displayIndex||r)})]}),e.jsx(D,{className:`text-sm font-semibold px-3 py-1 rounded-xl ${G(s.status)}`,children:s.status.toUpperCase()}),e.jsx(D,{className:`text-sm font-semibold px-3 py-1 rounded-xl ${J(s.condition)}`,children:s.condition.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(We,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium",children:["Order: ",s.dispatch?.outlet_order?.order_number||`ORD-${s.dispatch_id?.slice(-6)}`]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Dispatch: ",s.dispatch?.destination||`DSP-${s.dispatch_id?.slice(-6)}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(de,{className:"h-4 w-4 text-purple-500"}),e.jsxs("span",{className:"text-sm font-medium",children:["By: ",s.received_by_user?`${s.received_by_user.first_name} ${s.received_by_user.last_name}`:"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(Te,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(s.received_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(V,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.actual_weight_received||0," kg"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(V,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Weight"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Expected:"}),e.jsxs("span",{className:"font-medium",children:[s.expected_weight||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Received:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[s.actual_weight_received||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Diff:"}),e.jsxs("span",{className:`font-medium ${n.diff>=0?"text-green-600":"text-red-600"}`,children:[n.diff>=0?"+":"",n.diff.toFixed(2)," kg"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(oe,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Value"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Expected:"}),e.jsxs("span",{className:"font-medium",children:["KSh ",(s.expected_value||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Received:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["KSh ",(s.actual_value_received||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Diff:"}),e.jsxs("span",{className:`font-medium ${o.diff>=0?"text-green-600":"text-red-600"}`,children:[o.diff>=0?"+":"","KSh ",o.diff.toLocaleString()]})]})]})]})]}),s.discrepancy_notes&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-yellow-800 text-sm mb-1",children:"Discrepancy Notes"}),e.jsx("div",{className:"text-xs text-yellow-700",children:s.discrepancy_notes})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"h-10 px-4 border-2 border-blue-200 text-blue-700 hover:bg-blue-50 hover:border-blue-300",onClick:()=>fe(s),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(N,{variant:"outline",size:"sm",className:"h-10 px-4 border-2 border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})},s.id)})})]},t))})})]})]}),e.jsx(ie,{open:me,onOpenChange:B,children:e.jsxs(le,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ne,{children:e.jsxs(re,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Y,{className:"h-6 w-6 text-blue-600"}),"Receiving Record Details - ",d&&K(0)]})}),d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Outlet Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",d.dispatch?.outlet_order?.outlet?.name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",d.dispatch?.outlet_order?.outlet?.location||"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Order Number:"})," ",d.dispatch?.outlet_order?.order_number||"N/A"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"Receiving Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Received By:"})," ",d.received_by_user?`${d.received_by_user.first_name} ${d.received_by_user.last_name}`:"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(d.received_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",e.jsx(D,{className:G(d.status),children:d.status.toUpperCase()})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-blue-600"}),"Weight Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expected Weight:"}),e.jsxs("span",{className:"font-medium",children:[d.expected_weight||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Actual Weight:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[d.actual_weight_received||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Difference:"}),e.jsxs("span",{className:`font-medium ${(d.actual_weight_received||0)>=(d.expected_weight||0)?"text-green-600":"text-red-600"}`,children:[(d.actual_weight_received||0)-(d.expected_weight||0)>=0?"+":"",((d.actual_weight_received||0)-(d.expected_weight||0)).toFixed(2)," kg"]})]})]})]})}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-purple-600"}),"Value Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Expected Value"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["KSh ",(d.expected_value||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Actual Value"}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["KSh ",(d.actual_value_received||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Difference"}),e.jsxs("div",{className:`text-lg font-bold ${(d.actual_value_received||0)-(d.expected_value||0)>=0?"text-green-600":"text-red-600"}`,children:[(d.actual_value_received||0)-(d.expected_value||0)>=0?"+":"","KSh ",((d.actual_value_received||0)-(d.expected_value||0)).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-orange-900 mb-3",children:"Condition"}),e.jsx(D,{className:J(d.condition),children:d.condition.toUpperCase()})]}),d.discrepancy_notes&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5 text-yellow-600"}),"Discrepancy Notes"]}),e.jsx("p",{className:"text-sm text-yellow-800",children:d.discrepancy_notes})]})]}),d.size_discrepancies&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Size Discrepancies"}),e.jsx("div",{className:"text-sm text-gray-700",children:ke(d.size_discrepancies)})]})]})]})})]})}export{ot as default};
