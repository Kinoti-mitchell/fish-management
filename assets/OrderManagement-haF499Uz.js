import{c as ye,m as fs,r as p,j as e,S as ue,B as f,L as z,e as P,P as $,I as Y,a as L,b as M,F as ge,f as ys,g as js,l as q,E as Z,W as bs,X as Te,T as Ee,t as v,q as Ue,v as _s,s as w}from"./main-8N3o9mMm.js";import{S as Le,a as Me,b as Be,c as Ve,d as W}from"./select-YMU3Gsb0.js";import{T as We}from"./textarea-G5xl3sXf.js";import{D as ee,a as Ns,b as se,c as te,d as ae,f as re,e as vs}from"./dialog-BmuCPjhY.js";import{C as Ge}from"./checkbox-BmYsrMja.js";import{i as ws}from"./inventoryService-CONKB-y-.js";import{F as zs}from"./FishFarmMarquee-DCfu3OER.js";import{a as qs}from"./auditLogger-B5yJp87E.js";import{C as G}from"./clock-DzAVquri.js";import{C as O}from"./circle-check-big-DP8Ow5LW.js";import{C as he}from"./calendar-DGL0Uhhz.js";import{F as pe}from"./file-text-BLe5iXXS.js";import{S as ks}from"./star-v1NmmxdA.js";import{R as Ss}from"./ruler-KWCl0kX9.js";import{a as Os}from"./index-B_MyCMCN.js";import{M as Qe}from"./map-pin-zRbnR5TS.js";import{P as Cs}from"./phone-DtL_v1BQ.js";import{P as Ds}from"./plus-BP8gI5ri.js";import{D as Fs}from"./dollar-sign-BB0-JsHi.js";import{B as Is}from"./building-2-CSW-p6qx.js";import"./index-GiPM7N_v.js";import"./index-Cl6itz8u.js";import"./trending-up-fkU5Tn-x.js";import"./award-CaXD2Nbe.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],fe=ye("ban",Ps);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ke=ye("circle-plus",$s);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Re=ye("user-check",As),Ts=[{size:0,label:"Size 0 - Premium Large",description:"2.5+ kg each"},{size:1,label:"Size 1 - Extra Large",description:"2.0-2.5 kg each"},{size:2,label:"Size 2 - Large",description:"1.5-2.0 kg each"},{size:3,label:"Size 3 - Medium-Large",description:"1.2-1.5 kg each"},{size:4,label:"Size 4 - Medium",description:"1.0-1.2 kg each"},{size:5,label:"Size 5 - Medium-Small",description:"0.8-1.0 kg each"},{size:6,label:"Size 6 - Small-Medium",description:"0.6-0.8 kg each"},{size:7,label:"Size 7 - Small",description:"0.4-0.6 kg each"},{size:8,label:"Size 8 - Extra Small",description:"0.3-0.4 kg each"},{size:9,label:"Size 9 - Mini",description:"0.2-0.3 kg each"},{size:10,label:"Size 10 - Tiny",description:"0.1-0.2 kg each"}];function ct({onNavigate:ie}){const{user:A}=fs(),[y,B]=p.useState([]),[Q,je]=p.useState([]),[He,ne]=p.useState([]),[Es,be]=p.useState(!0),[Xe,K]=p.useState(!1),[Je,le]=p.useState(!1),[Ye,T]=p.useState(!1),[c,Ze]=p.useState(null),[es,R]=p.useState(!1),[h,_e]=p.useState(null),Ne=async(s,t,a,l,d)=>{try{await qs.custom(s,t,a,{old_values:l,new_values:d})}catch(i){console.warn("Failed to log audit event:",i)}},[_,H]=p.useState("all"),[r,k]=p.useState({outlet_id:"",requested_quantity:"",requested_grade:"",price_per_kg:"",requested_sizes:[],size_quantities:{},use_any_size:!1,delivery_date:"",notes:""}),[o,I]=p.useState({}),[de,ve]=p.useState(!1),[C,X]=p.useState({confirmedBy:"",notes:"",action:"approve"}),[ce,we]=p.useState(!1),[j,E]=p.useState([]),[S,ze]=p.useState(null),[qe,oe]=p.useState([]),[ss,ke]=p.useState(!1),[me,xe]=p.useState({}),ts=(s,t)=>{k(a=>({...a,size_quantities:{...a.size_quantities,[s]:t}}))},as=s=>{k(t=>({...t,use_any_size:s,requested_sizes:s?[]:t.requested_sizes,size_quantities:s?{}:t.size_quantities}))},rs=async s=>{ke(!0);try{const t=await ws.getInventoryByStorage();if(!t||t.length===0){console.log("No inventory data available"),oe([]),xe({});return}const a=new Set,l={};t.forEach(d=>{const i=d.size;!isNaN(i)&&d.total_quantity>0&&(a.add(i),l[i]||(l[i]={quantity:0,storageLocation:d.storage_location_name||"Unknown Storage",grade:"A",totalWeight:0}),l[i].quantity+=d.total_quantity,l[i].totalWeight+=d.total_weight_kg,l[i].storageLocation==="Unknown Storage"&&(l[i].storageLocation=d.storage_location_name||"Unknown Storage"))}),oe(Array.from(a).sort((d,i)=>d-i)),xe(l)}catch(t){console.error("Error fetching available sizes:",t),v.error("Failed to fetch available sizes",{description:"Please try again or check your connection",duration:5e3}),oe([]),xe({})}finally{ke(!1)}},Se=async()=>{try{const{data:s,error:t}=await w.from("processing_records").select(`
          *,
          warehouse_entries!inner(
            entry_date,
            total_weight,
            total_pieces,
            condition,
            temperature,
            price_per_kg,
            total_value,
            notes,
            farmers!inner(
              name,
              phone,
              location,
              rating,
              reliability
            )
          )
        `).gt("ready_for_dispatch_count",0).order("processing_date",{ascending:!1});if(t)throw t;const l=(s?.map(i=>{let n=0;if(i.size_distribution&&typeof i.size_distribution=="object"){const g=Object.keys(i.size_distribution);g.length>0&&(n=parseInt(g[0])||0)}let x="Unknown";if(i.grading_results&&typeof i.grading_results=="object"){const g=Object.keys(i.grading_results);g.length>0&&(x=g[0])}const u=i.warehouse_entries,m=u?.farmers;return{...i,final_grade:x,final_size:n,storage_location:"Processing Area",farmer_name:m?.name||"Unknown Farmer",entry_date:u?.entry_date,total_pieces:u?.total_pieces,condition:u?.condition,temperature:u?.temperature,price_per_kg:u?.price_per_kg,total_value:u?.total_value,notes:u?.notes,farmer_phone:m?.phone,farmer_location:m?.location,farmer_rating:m?.rating,farmer_reliability:m?.reliability}})||[]).reduce((i,n)=>{const x=n.final_size,u=n.storage_location,m=`${x}_${u}`;i[m]||(i[m]={id:`grouped_${m}`,final_size:x,final_grade:n.final_grade,storage_location:u,total_quantity:0,total_weight:0,total_value:0,processing_records:[],farmers:new Set,entry_dates:new Set,conditions:new Set,temperatures:[],processed_by_names:new Set,ready_for_dispatch_count:0,warehouse_entry_id:n.warehouse_entry_id,processing_date:n.processing_date,processed_by:n.processed_by,pre_processing_weight:n.pre_processing_weight,post_processing_weight:n.post_processing_weight,processing_waste:n.processing_waste,processing_yield:n.processing_yield,size_distribution:n.size_distribution,grading_results:n.grading_results,final_value:n.final_value,created_at:n.created_at,updated_at:n.updated_at,farmer_name:n.farmer_name,entry_date:n.entry_date,total_pieces:n.total_pieces,condition:n.condition,temperature:n.temperature,price_per_kg:n.price_per_kg,notes:n.notes,farmer_phone:n.farmer_phone,farmer_location:n.farmer_location,farmer_rating:n.farmer_rating,farmer_reliability:n.farmer_reliability});const g=n.size_distribution||{},N=g[x]||0;i[m].total_quantity+=N;const b=Object.values(g).reduce((U,ps)=>U+(Number(ps)||0),0),F=b>0?n.post_processing_weight/b:0,J=N*F;return i[m].total_weight+=J,i[m].total_value+=n.final_value||0,i[m].processing_records.push(n.id),i[m].farmers.add(n.farmer_name),i[m].entry_dates.add(n.entry_date),i[m].conditions.add(n.condition),n.temperature&&i[m].temperatures.push(n.temperature),i[m].ready_for_dispatch_count+=n.ready_for_dispatch_count||0,i},{}),d=Object.values(l).map(i=>({...i,farmers:Array.from(i.farmers).join(", "),entry_dates:Array.from(i.entry_dates).join(", "),conditions:Array.from(i.conditions).join(", "),average_temperature:i.temperatures.length>0?(i.temperatures.reduce((n,x)=>n+x,0)/i.temperatures.length).toFixed(1):null,processing_count:i.processing_records.length}));d.sort((i,n)=>i.final_size!==n.final_size?i.final_size-n.final_size:i.storage_location.localeCompare(n.storage_location)),ne(d)}catch(s){console.error("Error fetching inventory:",s),v.error("Failed to fetch inventory data",{description:"Please refresh the page or try again later",duration:5e3}),ne([])}},Oe=async()=>{try{be(!0);const[s,t]=await Promise.allSettled([Ue.getOutletOrders(),_s.getOutlets()]);B(s.status==="fulfilled"?s.value:[]),je(t.status==="fulfilled"?t.value:[]),await Se(),s.status==="rejected"&&console.warn("Outlet orders table not available yet:",s.reason),t.status==="rejected"&&console.warn("Outlets table not available yet:",t.reason)}catch(s){console.error("Error fetching data:",s),v.error("Failed to load order data",{description:"Please refresh the page or check your connection",duration:5e3}),B([]),je([]),ne([])}finally{be(!1)}};p.useEffect(()=>{Oe()},[]);const Ce=s=>{switch(s){case"pending":return"bg-amber-500 text-white";case"confirmed":return"bg-blue-500 text-white";case"dispatched":return"bg-emerald-500 text-white";case"completed":return"bg-green-600 text-white";default:return"bg-gray-500 text-white"}},De=s=>{switch(s){case"pending":return e.jsx(G,{className:"h-4 w-4"});case"confirmed":return e.jsx(O,{className:"h-4 w-4"});case"dispatched":return e.jsx(O,{className:"h-4 w-4"});case"completed":return e.jsx(O,{className:"h-4 w-4"});default:return e.jsx(G,{className:"h-4 w-4"})}},D=s=>`KES ${s.toLocaleString()}`,Fe=s=>{if(s.length===0)return"No sizes selected";const t=s.sort((a,l)=>a-l);return t.length===1?`Size ${t[0]}`:`Sizes ${t[0]}-${t[t.length-1]}`},is=s=>{k(t=>({...t,requested_sizes:t.requested_sizes.includes(s)?t.requested_sizes.filter(a=>a!==s):[...t.requested_sizes,s].sort((a,l)=>a-l),requested_grade:""}))},ns=()=>{const s={};if(r.outlet_id||(s.outlet_id="Please select an outlet"),r.use_any_size)(!r.requested_quantity||parseFloat(r.requested_quantity)<=0)&&(s.requested_quantity="Please enter a valid total quantity (greater than 0)");else if(r.requested_sizes.length===0)s.requested_sizes="Please select at least one fish size";else{Object.values(r.size_quantities).reduce((a,l)=>a+l,0)<=0&&(s.requested_sizes="Please specify quantities for selected sizes");for(const a of r.requested_sizes){const l=r.size_quantities[a]||0,d=me[a],i=d?d.totalWeight:0;if(l>i){s.requested_sizes=`Size ${a}: Requested ${l}kg exceeds available ${i.toFixed(1)}kg`;break}}}return(!r.price_per_kg||parseFloat(r.price_per_kg)<=0)&&(s.price_per_kg="Please enter a valid price per kg (greater than 0)"),r.requested_grade||(s.requested_grade="Please select a grade preference"),r.delivery_date&&new Date(r.delivery_date)<new Date&&(s.delivery_date="Delivery date cannot be in the past"),I(s),Object.keys(s).length===0},ls=async()=>{try{const{data:s,error:t}=await w.from("outlet_orders").select("order_number").not("order_number","is",null).order("created_at",{ascending:!1}).limit(1);if(t)throw t;let a=1;if(s&&s.length>0){const d=s[0].order_number?.match(/INV(\d+)/);d&&(a=parseInt(d[1])+1)}return`INV${a.toString().padStart(3,"0")}`}catch(s){return console.error("Error generating order number:",s),`INV${Date.now().toString().slice(-6)}`}},ds=async()=>{if(ns()){ve(!0);try{const s=await ls();let t,a;r.use_any_size?(t=parseFloat(r.requested_quantity),a=[]):(t=Object.values(r.size_quantities).reduce((n,x)=>n+x,0),a=r.requested_sizes);const l=t*parseFloat(r.price_per_kg),d={outlet_id:r.outlet_id,order_date:new Date().toISOString().split("T")[0],delivery_date:r.delivery_date||null,requested_sizes:a,requested_quantity:t,requested_grade:r.requested_grade==="any"?null:r.requested_grade,price_per_kg:parseFloat(r.price_per_kg),total_value:l,status:"pending",notes:r.notes,order_number:s,size_quantities:r.use_any_size?{}:r.size_quantities,use_any_size:r.use_any_size};console.log("Creating order with data:",d);const i=await Ue.createOutletOrder(d);B([i,...y]),k({outlet_id:"",requested_quantity:"",requested_grade:"",price_per_kg:"",requested_sizes:[],size_quantities:{},use_any_size:!1,delivery_date:"",notes:""}),I({}),K(!1),v.success(`Order ${s} created successfully!`,{description:`Order Number: ${s}`,duration:5e3})}catch(s){console.error("Error creating order:",s),v.error("Failed to create order",{description:s.message||"Unknown error occurred",duration:5e3})}finally{ve(!1)}}},Ie=s=>{const t=y.find(a=>a.id===s);t&&(_e(t),R(!0),X({confirmedBy:A?.email||"Current User",notes:"",action:"approve"}))},cs=async()=>{if(!h){v.error("No order selected for confirmation");return}we(!0);try{if(C.action==="approve"){const{error:s}=await w.from("outlet_orders").update({status:"confirmed",confirmed_date:new Date().toISOString().split("T")[0],notes:C.notes||h.notes}).eq("id",h.id);if(s)throw s;await Ne("UPDATE","outlet_orders",h.id,{status:h.status},{status:"confirmed",confirmed_date:new Date().toISOString().split("T")[0]}),await os(h),await ms(h),B(t=>t.map(a=>a.id===h.id?{...a,status:"confirmed",confirmedDate:new Date().toISOString().split("T")[0]}:a)),v.success(`Order ${h.order_number||h.id} approved, confirmed, and moved to dispatch!`)}else{const{error:s}=await w.from("outlet_orders").update({status:"cancelled",notes:`Order discarded by ${A?.email||"Current User"}. ${C.notes||""}`.trim()}).eq("id",h.id);if(s)throw s;await Ne("UPDATE","outlet_orders",h.id,{status:h.status},{status:"cancelled",notes:`Order discarded by ${A?.email||"Current User"}. ${C.notes||""}`.trim()}),B(t=>t.map(a=>a.id===h.id?{...a,status:"cancelled"}:a)),v.success(`Order ${h.order_number||h.id} has been discarded.`)}R(!1),_e(null)}catch(s){console.error("Error processing order confirmation:",s),v.error("Failed to process order confirmation",{description:"Please try again or contact support if the issue persists",duration:5e3})}finally{we(!1)}},os=async s=>{try{const{data:t,error:a}=await w.from("sorting_results").select(`
          *,
          sorting_batch:sorting_batches!inner(
            id,
            status
          )
        `).eq("sorting_batch.status","completed").gt("total_weight_grams",0);if(a)throw a;if(!t||t.length===0)throw new Error("No available inventory found for order confirmation");let d=s.requested_quantity||0;const i=[];if(s.size_quantities&&Object.keys(s.size_quantities).length>0)for(const[n,x]of Object.entries(s.size_quantities)){const u=parseInt(n),m=x,g=t.filter(b=>b.size_class===u&&b.total_weight_grams>0);let N=m;for(const b of g){if(N<=0)break;const F=Math.min(N,b.total_weight_grams/1e3),{error:J}=await w.from("sorting_results").update({total_weight_grams:b.total_weight_grams-F*1e3,total_pieces:Math.max(0,b.total_pieces-Math.ceil(F))}).eq("id",b.id);if(J)throw J;try{const{error:U}=await w.from("inventory_entries").insert({size:u,quantity_change:-Math.ceil(F),entry_type:"order_dispatch",reference_id:s.id,notes:`Order dispatch - Size ${u}, Weight: ${F.toFixed(2)}kg`});U&&console.warn("Could not create inventory entry:",U)}catch(U){console.warn("Inventory entries table might not exist:",U)}i.push({size:u,weight_deducted:F,remaining_stock:(b.total_weight_grams-F*1e3)/1e3}),N-=F}}else for(const n of t){if(d<=0)break;const x=Math.min(d,n.total_weight_grams/1e3),{error:u}=await w.from("sorting_results").update({total_weight_grams:n.total_weight_grams-x*1e3,total_pieces:Math.max(0,n.total_pieces-Math.ceil(x))}).eq("id",n.id);if(u)throw u;try{const{error:m}=await w.from("inventory_entries").insert({size:n.size_class||0,quantity_change:-Math.ceil(x),entry_type:"order_dispatch",reference_id:s.id,notes:`Order dispatch - Size ${n.size_class||0}, Weight: ${x.toFixed(2)}kg`});m&&console.warn("Could not create inventory entry:",m)}catch(m){console.warn("Inventory entries table might not exist:",m)}i.push({size:n.size_class||0,weight_deducted:x,remaining_stock:(n.total_weight_grams-x*1e3)/1e3}),d-=x}return console.log("Inventory deducted for order confirmation:",i),i}catch(t){throw console.error("Error deducting inventory on order confirmation:",t),t}},ms=async s=>{try{const a=Q.find(u=>u.id===s.outlet_id)?.name||"Unknown Outlet",l=s.requested_quantity||0,d=s.requested_quantity||0,i=s.size_quantities||{},{data:n,error:x}=await w.from("dispatch_records").insert({outlet_order_id:s.id,fish_ids:[],destination:a,dispatch_date:new Date().toISOString().split("T")[0],total_weight:l,total_pieces:d,size_breakdown:i,total_value:s.total_value||0,status:"scheduled",notes:`Auto-created dispatch for confirmed order ${s.order_number||s.id}`,dispatched_by:A?.id||null}).select().single();if(x)throw console.error("Error creating dispatch record:",x),x;return console.log("Automatic dispatch record created:",n),n}catch(t){console.error("Failed to create automatic dispatch record:",t),v.warning("Order confirmed but dispatch record creation failed. Please create dispatch manually.")}},xs=async()=>{if(!S||j.length===0){v.error("Please select items from inventory");return}try{const s=j.map(g=>g.inventoryItem.id),{error:t}=await w.from("processing_records").update({ready_for_dispatch_count:0}).in("id",s);if(t)throw t;const a=j.reduce((g,N)=>g+N.weight,0),l=j.reduce((g,N)=>g+N.quantity,0),d=j.reduce((g,N)=>{const b=N.inventoryItem.final_size||0;return g[b]=(g[b]||0)+N.quantity,g},{}),i=y.find(g=>g.id===S),n=Q.find(g=>g.id===i?.outlet_id),{data:x,error:u}=await w.from("dispatch_records").insert({outlet_order_id:S,fish_ids:s,destination:n?.name||"Unknown",dispatch_date:new Date().toISOString().split("T")[0],total_weight:a,total_pieces:l,size_breakdown:d,total_value:i?.total_value||0,status:"dispatched",notes:`Inventory picked for order ${i?.order_number||S}`,dispatched_by:A?.id||null}).select().single();if(u)throw u;const{error:m}=await w.from("outlet_orders").update({status:"dispatched",dispatch_date:new Date().toISOString().split("T")[0]}).eq("id",S);if(m)throw m;await Oe(),await Se(),le(!1),ze(null),E([]),v.success("Order dispatched successfully!",{description:`Order ${i?.order_number||S} has been dispatched with ${l} pieces`,duration:5e3})}catch(s){console.error("Error dispatching order:",s),v.error("Failed to dispatch order",{description:"Please try again or contact support if the issue persists",duration:5e3})}},Pe=()=>{switch(_){case"pending":return y.filter(s=>s.status==="pending");case"confirmed":return y.filter(s=>s.status==="confirmed");case"cancelled":return y.filter(s=>s.status==="cancelled");case"all":default:return y}},us=s=>{const t=y.find(a=>a.id===s);t&&(Ze(t),T(!0))},gs=(s,t)=>{const a=j.findIndex(l=>l.inventoryItem.id===s.id);if(a>=0){const l=[...j];l[a].quantity+=t,l[a].weight=l[a].quantity*(s.post_processing_weight/(s.total_pieces||1)),E(l)}else{const l=t*(s.post_processing_weight/(s.total_pieces||1));E(d=>[...d,{inventoryItem:s,quantity:t,weight:l}])}},$e=s=>{E(t=>t.filter(a=>a.inventoryItem.id!==s))},hs=(s,t)=>{if(t<=0){$e(s);return}E(a=>a.map(l=>{if(l.inventoryItem.id===s){const d=t*(l.inventoryItem.post_processing_weight/(l.inventoryItem.total_pieces||1));return{...l,quantity:t,weight:d}}return l}))},Ae=s=>He.filter(t=>!(!t.total_quantity||t.total_quantity<=0||t.ready_for_dispatch_count<=0||s.requested_sizes&&s.requested_sizes.length>0&&!s.requested_sizes.includes(t.final_size||0)||s.requested_grade&&s.requested_grade!=="any"&&t.final_grade!==s.requested_grade)),V={totalOrders:y.length,pendingOrders:y.filter(s=>s.status==="pending").length,confirmedOrders:y.filter(s=>s.status==="confirmed").length,totalValue:y.reduce((s,t)=>s+t.total_value,0),totalQuantity:y.reduce((s,t)=>s+(t.requested_quantity||0),0)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 content-container responsive-padding",children:[e.jsx(zs,{}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:e.jsx(ue,{className:"h-10 w-10 text-white"})}),"Order Management"]}),e.jsx("p",{className:"text-xl text-gray-600 ml-16",children:"Manage fish orders from outlets across Kenya • Size-based selection"})]}),e.jsxs(ee,{open:Xe,onOpenChange:s=>{console.log("Dialog state changing to:",s),K(s)},children:[e.jsx(Ns,{asChild:!0,children:e.jsxs(f,{onClick:()=>{console.log("New Order button clicked"),K(!0)},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-2xl font-semibold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(Ke,{className:"h-6 w-6 mr-3"}),"New Order"]})}),e.jsxs(se,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(te,{className:"pb-4",children:[e.jsxs(ae,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:e.jsx(Ke,{className:"h-5 w-5 text-white"})}),"Create New Order"]}),e.jsx(re,{className:"text-gray-600",children:"Create a new order for your outlet with real-time inventory validation"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(G,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"FIFO System Active: Orders will automatically use oldest batches first"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(z,{className:"text-base font-semibold text-gray-700",children:"Select Outlet *"}),e.jsxs(Le,{value:r.outlet_id,onValueChange:s=>{k({...r,outlet_id:s,requested_sizes:[]}),o.outlet_id&&I({...o,outlet_id:""}),rs()},children:[e.jsx(Me,{className:`h-12 ${o.outlet_id?"border-red-500":"border-gray-300"}`,children:e.jsx(Be,{placeholder:"Choose an outlet..."})}),e.jsx(Ve,{children:Q.map(s=>e.jsx(W,{value:s.id,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-sm text-gray-500",children:s.location})]})},s.id))})]}),o.outlet_id&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:o.outlet_id})]})]}),r.outlet_id&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(z,{className:"text-base font-semibold text-gray-700",children:"Select Fish Sizes *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{id:"any-size",checked:r.use_any_size,onCheckedChange:as,className:"h-4 w-4"}),e.jsx("label",{htmlFor:"any-size",className:"text-sm text-gray-600 cursor-pointer",children:"Use any available size"})]})]}),r.use_any_size?e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Any Size Selected"})]}),e.jsx("p",{className:"text-xs text-green-700",children:"The system will automatically select the best available sizes based on inventory and your total quantity requirement."})]}):e.jsxs(e.Fragment,{children:[ss?e.jsxs("div",{className:"p-6 text-center border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Loading available sizes..."})]}):e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-60 overflow-y-auto p-3 border border-gray-200 rounded-lg bg-gray-50",children:[Ts.filter(s=>qe.includes(s.size)).map(s=>{const t=me[s.size];return e.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${r.requested_sizes.includes(s.size)?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ge,{id:`size-${s.size}`,checked:r.requested_sizes.includes(s.size),onCheckedChange:()=>is(s.size),className:"h-4 w-4"}),e.jsxs("label",{htmlFor:`size-${s.size}`,className:"cursor-pointer text-sm font-medium",children:["Size ",s.size]})]}),t&&e.jsxs("div",{className:"text-xs text-gray-600 pl-6 mb-2",children:[e.jsxs("div",{children:[t.quantity," pcs"]}),e.jsxs("div",{children:[t.totalWeight?t.totalWeight.toFixed(1):"0.0"," kg"]})]})]},s.size)}),qe.length===0&&e.jsxs("div",{className:"col-span-full text-center py-4 text-gray-500",children:[e.jsx($,{className:"h-6 w-6 mx-auto mb-1 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No sizes available"})]})]})}),r.requested_sizes.length>0&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-800 mb-3",children:["Selected: ",Fe(r.requested_sizes)," (",r.requested_sizes.length," size",r.requested_sizes.length!==1?"s":"",")"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Specify quantity (kg) for each size:"}),r.requested_sizes.map(s=>{const t=me[s],a=t?t.totalWeight:0,l=r.size_quantities[s]||0;return e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Size ",s]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Available: ",a.toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{type:"number",placeholder:"0.0",min:"0.1",max:a,step:"0.1",className:"h-8 text-sm flex-1",value:l||"",onChange:d=>ts(s,parseFloat(d.target.value)||0)}),e.jsx("span",{className:"text-xs text-gray-500",children:"kg"})]}),l>a&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600 text-xs mt-1",children:[e.jsx(P,{className:"h-3 w-3"}),e.jsx("span",{children:"Exceeds available stock"})]})]},s)}),e.jsx("div",{className:"pt-2 border-t border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-blue-800",children:"Total Requested:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[Object.values(r.size_quantities).reduce((s,t)=>s+t,0).toFixed(1)," kg"]})]})})]})]})]}),o.requested_sizes&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:o.requested_sizes})]})]}),(r.requested_sizes.length>0||r.use_any_size)&&e.jsxs("div",{className:"space-y-4",children:[r.use_any_size?e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium text-gray-700",children:"Total Quantity (kg) *"}),e.jsx(Y,{type:"number",placeholder:"100",min:"1",step:"0.1",className:`h-10 ${o.requested_quantity?"border-red-500":"border-gray-300"}`,value:r.requested_quantity,onChange:s=>{k({...r,requested_quantity:s.target.value}),o.requested_quantity&&I({...o,requested_quantity:""})}}),o.requested_quantity&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(P,{className:"h-3 w-3"}),e.jsx("span",{children:o.requested_quantity})]})]}):e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Quantity:"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[Object.values(r.size_quantities).reduce((s,t)=>s+t,0).toFixed(1)," kg"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Calculated from individual size quantities above"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium text-gray-700",children:"Price per kg (KES) *"}),e.jsx(Y,{type:"number",placeholder:"500",min:"1",step:"0.01",className:`h-10 ${o.price_per_kg?"border-red-500":"border-gray-300"}`,value:r.price_per_kg,onChange:s=>{k({...r,price_per_kg:s.target.value}),o.price_per_kg&&I({...o,price_per_kg:""})}}),o.price_per_kg&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(P,{className:"h-3 w-3"}),e.jsx("span",{children:o.price_per_kg})]})]})]}),(r.requested_sizes.length>0||r.use_any_size)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium text-gray-700",children:"Grade Preference"}),e.jsxs(Le,{value:r.requested_grade,onValueChange:s=>{k({...r,requested_grade:s}),o.requested_grade&&I({...o,requested_grade:""})},children:[e.jsx(Me,{className:`h-10 ${o.requested_grade?"border-red-500":"border-gray-300"}`,children:e.jsx(Be,{placeholder:"Select grade preference"})}),e.jsxs(Ve,{children:[e.jsx(W,{value:"any",children:"Any Grade Available"}),e.jsx(W,{value:"A",children:"Grade A (Premium)"}),e.jsx(W,{value:"B",children:"Grade B (Standard)"}),e.jsx(W,{value:"C",children:"Grade C (Economy)"})]})]}),o.requested_grade&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(P,{className:"h-3 w-3"}),e.jsx("span",{children:o.requested_grade})]})]}),r.requested_sizes.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium text-gray-700",children:"Delivery Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Y,{type:"date",className:`h-10 pl-10 ${o.delivery_date?"border-red-500":"border-gray-300"}`,value:r.delivery_date,min:new Date().toISOString().split("T")[0],onChange:s=>{k({...r,delivery_date:s.target.value}),o.delivery_date&&I({...o,delivery_date:""})}})]}),o.delivery_date&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(P,{className:"h-3 w-3"}),e.jsx("span",{children:o.delivery_date})]})]}),r.requested_sizes.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium text-gray-700",children:"Notes (Optional)"}),e.jsx(We,{placeholder:"Special requirements, delivery instructions, etc...",className:"h-20 border-gray-300 resize-none",value:r.notes,onChange:s=>k({...r,notes:s.target.value})})]}),o.inventory&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"text-red-800 font-medium",children:"Inventory Insufficient"})]}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:o.inventory})]}),(r.use_any_size&&r.requested_quantity||!r.use_any_size&&r.requested_sizes.length>0)&&r.price_per_kg&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 border border-blue-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:e.jsx(pe,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Order Summary"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review your order details"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quantity"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.use_any_size?`${r.requested_quantity} kg`:`${Object.values(r.size_quantities).reduce((s,t)=>s+t,0).toFixed(1)} kg`})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Price per kg"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["KES ",parseFloat(r.price_per_kg||"0").toLocaleString()]})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl border border-blue-200 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Total Value"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["KES ",((r.use_any_size?parseFloat(r.requested_quantity||"0"):Object.values(r.size_quantities).reduce((s,t)=>s+t,0))*parseFloat(r.price_per_kg||"0")).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200",children:[e.jsx(f,{variant:"outline",onClick:()=>{K(!1),I({})},className:"px-8 py-3 text-base border-gray-300 hover:bg-gray-50",disabled:de,children:"Cancel"}),e.jsx(f,{onClick:ds,disabled:de||!r.outlet_id||!r.use_any_size&&r.requested_sizes.length===0||!r.price_per_kg||!r.requested_grade,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 px-8 py-3 text-base disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:de?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Order..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Create Order"]})})]})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(L,{className:"border-0 shadow-xl bg-gradient-to-br from-blue-50 to-blue-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wide",children:"Total Orders"}),e.jsx("p",{className:"text-4xl font-bold text-blue-900 mt-2",children:V.totalOrders})]}),e.jsx("div",{className:"p-4 bg-blue-600 rounded-2xl shadow-lg",children:e.jsx(ue,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(L,{className:"border-0 shadow-xl bg-gradient-to-br from-amber-50 to-amber-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-amber-600 uppercase tracking-wide",children:"Pending"}),e.jsx("p",{className:"text-4xl font-bold text-amber-900 mt-2",children:V.pendingOrders})]}),e.jsx("div",{className:"p-4 bg-amber-600 rounded-2xl shadow-lg",children:e.jsx(G,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(L,{className:"border-0 shadow-xl bg-gradient-to-br from-emerald-50 to-emerald-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-600 uppercase tracking-wide",children:"Confirmed"}),e.jsx("p",{className:"text-4xl font-bold text-emerald-900 mt-2",children:V.confirmedOrders})]}),e.jsx("div",{className:"p-4 bg-emerald-600 rounded-2xl shadow-lg",children:e.jsx(O,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(L,{className:"border-0 shadow-xl bg-gradient-to-br from-purple-50 to-purple-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wide",children:"Total Quantity"}),e.jsx("p",{className:"text-4xl font-bold text-purple-900 mt-2",children:V.totalQuantity}),e.jsx("p",{className:"text-sm text-purple-600",children:"kg"})]}),e.jsx("div",{className:"p-4 bg-purple-600 rounded-2xl shadow-lg",children:e.jsx(ge,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(L,{className:"border-0 shadow-xl bg-gradient-to-br from-green-50 to-green-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wide",children:"Total Value"}),e.jsx("p",{className:"text-3xl font-bold text-green-900 mt-2",children:D(V.totalValue)})]}),e.jsx("div",{className:"p-4 bg-green-600 rounded-2xl shadow-lg",children:e.jsx(ks,{className:"h-8 w-8 text-white"})})]})})})]}),e.jsxs(L,{className:"border-0 shadow-2xl bg-white/80 backdrop-blur-sm",children:[e.jsx(ys,{className:"pb-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-t-3xl",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs(js,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Ss,{className:"h-8 w-8 text-purple-600"}),"Orders Management"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(f,{variant:_==="all"?"default":"outline",size:"sm",onClick:()=>H("all"),className:`flex items-center gap-2 ${_==="all"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-white hover:bg-gray-50 text-gray-700 border-gray-300"}`,children:[e.jsx($,{className:"h-4 w-4"}),"All Orders (",y.length,")"]}),e.jsxs(f,{variant:_==="pending"?"default":"outline",size:"sm",onClick:()=>H("pending"),className:`flex items-center gap-2 ${_==="pending"?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-white hover:bg-gray-50 text-gray-700 border-gray-300"}`,children:[e.jsx(G,{className:"h-4 w-4"}),"Pending (",y.filter(s=>s.status==="pending").length,")"]}),e.jsxs(f,{variant:_==="confirmed"?"default":"outline",size:"sm",onClick:()=>H("confirmed"),className:`flex items-center gap-2 ${_==="confirmed"?"bg-green-600 hover:bg-green-700 text-white":"bg-white hover:bg-gray-50 text-gray-700 border-gray-300"}`,children:[e.jsx(Os,{className:"h-4 w-4"}),"Approved (",y.filter(s=>s.status==="confirmed").length,")"]}),e.jsxs(f,{variant:_==="cancelled"?"default":"outline",size:"sm",onClick:()=>H("cancelled"),className:`flex items-center gap-2 ${_==="cancelled"?"bg-red-600 hover:bg-red-700 text-white":"bg-white hover:bg-gray-50 text-gray-700 border-gray-300"}`,children:[e.jsx(fe,{className:"h-4 w-4"}),"Discarded (",y.filter(s=>s.status==="cancelled").length,")"]})]})]})}),e.jsx(M,{className:"p-8",children:Pe().length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx($,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["No ",_==="all"?"":_," orders found"]}),e.jsx("p",{className:"text-gray-500",children:_==="all"?"No orders have been created yet.":`No ${_} orders at the moment.`})]})]})}):e.jsx("div",{className:"space-y-6",children:Pe().map(s=>e.jsx("div",{className:`border-2 rounded-3xl p-8 hover:shadow-xl transition-all duration-300 ${s.status==="dispatched"?"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100":"border-gray-100 bg-gradient-to-r from-white to-gray-50 hover:from-blue-50 hover:to-purple-50"}`,children:e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[De(s.status),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["Order #",s.order_number||s.id]}),s.status==="dispatched"&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Dispatched"})]})]}),e.jsx(q,{className:`text-sm font-semibold px-4 py-2 rounded-xl ${Ce(s.status)}`,children:s.status.toUpperCase()}),s.requested_grade!=="any"&&e.jsxs(q,{variant:"secondary",className:"text-sm px-3 py-1 bg-indigo-100 text-indigo-700 rounded-xl",children:["Grade ",s.requested_grade]}),e.jsx(q,{variant:"outline",className:"text-sm px-3 py-1 bg-orange-100 text-orange-700 border-orange-200 rounded-xl",children:Fe(s.requested_sizes||[])})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(Qe,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.outlet?.name||"Unknown Outlet"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.outlet?.location||"Unknown Location"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(Cs,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:s.outlet?.phone||"Unknown Phone"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(he,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(s.order_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(ge,{className:"h-5 w-5 text-cyan-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.requested_quantity,"kg requested"]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-base text-gray-700",children:[e.jsxs("span",{className:"bg-gray-100 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Sizes:"})," ",s.requested_sizes?.join(", ")||"Any"]}),e.jsxs("span",{className:"bg-gray-100 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Quantity:"})," ",s.requested_quantity,"kg"]}),e.jsxs("span",{className:"bg-gray-100 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Price:"})," ",D(s.price_per_kg||0),"/kg"]})]}),s.notes&&e.jsxs("div",{className:"text-base text-gray-700 bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-2xl border-l-4 border-blue-400",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Notes:"})," ",s.notes]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-4 min-w-fit",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:D(s.total_value)}),e.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Value"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>us(s.id),className:"px-3 py-2 border-gray-300 hover:bg-gray-50",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"View"]}),s.status==="pending"&&e.jsx(f,{size:"sm",onClick:()=>Ie(s.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2",children:"Confirm"}),s.status==="confirmed"&&e.jsxs(f,{size:"sm",onClick:()=>ie("dispatch",s.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"View Dispatch"]})]})]})]})},s.id))})})]})]}),e.jsx(ee,{open:Je,onOpenChange:le,children:e.jsxs(se,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(te,{children:[e.jsxs(ae,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx($,{className:"h-6 w-6 text-orange-600"}),"Pick Items from Inventory"]}),e.jsx(re,{children:"Select items from available inventory to fulfill this order. Items will be deducted from inventory automatically."})]}),S&&e.jsxs("div",{className:"space-y-6 py-4",children:[(()=>{const s=y.find(t=>t.id===S);return s?e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-lg text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Order Requirements"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Outlet:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:s.outlet?.name||"Unknown Outlet"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Requested Quantity:"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[s.requested_quantity,"kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Requested Sizes:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:s.requested_sizes?.join(", ")||"Any"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Grade:"}),e.jsxs(q,{className:s.requested_grade==="A"?"bg-green-100 text-green-800":s.requested_grade==="B"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:["Grade ",s.requested_grade]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Price per kg:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:D(s.price_per_kg||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Total Value:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:D(s.total_value)})]})]})]}):null})(),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-900 flex items-center gap-2",children:[e.jsx(bs,{className:"h-5 w-5 text-green-600"}),"Available Inventory"]}),(()=>{const s=y.find(l=>l.id===S);if(!s)return null;const a=Ae(s).reduce((l,d)=>l+(d.total_quantity||0),0);return e.jsx("div",{className:"bg-green-50 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-sm font-medium text-green-800",children:[a," pieces available"]})})})()]}),e.jsx("div",{className:"grid gap-4 max-h-96 overflow-y-auto",children:(()=>{const s=y.find(a=>a.id===S);if(!s)return null;const t=Ae(s);return t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No inventory items match the order requirements"})]}):t.map(a=>e.jsx("div",{className:"border border-gray-200 rounded-xl p-4 bg-white hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 text-lg",children:["Size ",a.final_size||"Unknown"," Fish"]}),e.jsxs(q,{className:a.final_grade==="A"?"bg-green-100 text-green-800":a.final_grade==="B"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:["Grade ",a.final_grade||"Unknown"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Available Quantity:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-blue-900",children:[a.total_quantity||0," pieces"]}),e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["(",a.total_weight?a.total_weight.toFixed(1):"0.0"," kg)"]}),a.total_quantity&&a.total_quantity<=10&&e.jsx(q,{className:"bg-orange-100 text-orange-800 border-orange-200 text-xs",children:"Low Stock"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Storage Location:"})]}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:a.storage_location||"Processing Area"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs font-medium",children:"Processing Date"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:a.processing_date?new Date(a.processing_date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs font-medium",children:"Farmer"}),e.jsx("span",{className:"text-gray-900 font-semibold truncate",children:a.farmer_name||"Unknown"})]})]})]}),e.jsx("div",{className:"flex items-center gap-3 ml-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{size:"sm",variant:"outline",onClick:()=>gs(a,1),className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:e.jsx(Ds,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-sm font-medium min-w-[2rem] text-center",children:j.find(l=>l.inventoryItem.id===a.id)?.quantity||0}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>{const l=j.find(d=>d.inventoryItem.id===a.id);l&&l.quantity>0&&hs(a.id,l.quantity-1)},className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:e.jsx(Te,{className:"h-4 w-4"})})]})})]})},a.id))})()})]}),j.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[e.jsxs("h3",{className:"font-bold text-lg text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Selected Items Summary"]}),e.jsxs("div",{className:"space-y-3",children:[j.map(s=>e.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:["Size ",s.inventoryItem.final_size||"Unknown"," - Grade ",s.inventoryItem.final_grade||"Unknown"]}),e.jsxs(q,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[s.quantity," pieces"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[s.weight.toFixed(1),"kg"]}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>$e(s.inventoryItem.id),className:"border-red-200 text-red-700 hover:bg-red-50",children:e.jsx(Te,{className:"h-4 w-4"})})]})]},s.inventoryItem.id)),e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold text-green-900",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:[j.reduce((s,t)=>s+t.quantity,0)," pieces • "," ",j.reduce((s,t)=>s+t.weight,0).toFixed(1),"kg"]})]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-4 border-t",children:[e.jsx(f,{variant:"outline",onClick:()=>{le(!1),E([]),ze(null)},className:"px-6 py-2",children:"Cancel"}),e.jsxs(f,{onClick:xs,disabled:j.length===0,className:"px-6 py-2 bg-orange-600 hover:bg-orange-700 text-white disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Dispatch Order"]})]})]})]})}),e.jsx(ee,{open:Ye,onOpenChange:T,children:e.jsxs(se,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(te,{children:[e.jsxs(ae,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(pe,{className:"h-6 w-6 text-blue-600"})}),"Order Details - ",c?.order_number||c?.id]}),e.jsx(re,{className:"text-gray-600",children:"Complete information for this outlet order"})]}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[De(c.status),e.jsx(q,{className:`text-sm font-semibold px-4 py-2 rounded-xl ${Ce(c.status)}`,children:c.status.toUpperCase()}),c.requested_grade!=="any"&&e.jsxs(q,{variant:"secondary",className:"text-sm px-3 py-1 bg-indigo-100 text-indigo-700 rounded-xl",children:["Grade ",c.requested_grade]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D(c.total_value)}),e.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Value"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:new Date(c.order_date).toLocaleDateString()})]}),c.delivery_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delivery Date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:new Date(c.delivery_date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4 text-cyan-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[c.requested_quantity,"kg"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Price per kg:"}),e.jsx("span",{className:"text-sm text-gray-900",children:D(c.price_per_kg||0)})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5 text-blue-600"}),"Outlet Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Outlet Name:"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:c.outlet?.name||"Unknown Outlet"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Location:"}),e.jsx("p",{className:"text-sm text-gray-900",children:c.outlet?.location||"Unknown Location"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Phone:"}),e.jsx("p",{className:"text-sm text-gray-900",children:c.outlet?.phone||"Unknown Phone"})]}),c.outlet?.manager_name&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Manager:"}),e.jsx("p",{className:"text-sm text-gray-900",children:c.outlet.manager_name})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-orange-600"}),"Order Specifications"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Requested Sizes:"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:c.requested_sizes&&c.requested_sizes.length>0?c.requested_sizes.map((s,t)=>e.jsxs(q,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:["Size ",s]},t)):e.jsx(q,{variant:"outline",className:"bg-gray-50 text-gray-700",children:"Any Size"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Grade Preference:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:c.requested_grade==="any"?"Any Grade Available":`Grade ${c.requested_grade}`})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity Breakdown:"}),e.jsxs("div",{className:"mt-2 bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Weight:"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[c.requested_quantity,"kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Price per kg:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:D(c.price_per_kg||0)})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1 pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Value:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:D(c.total_value)})]})]})]})})]})]}),c.notes&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-gray-600"}),"Order Notes"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-700",children:c.notes})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx(f,{variant:"outline",onClick:()=>T(!1),className:"flex-1",children:"Close"}),c.status==="pending"&&e.jsx(f,{onClick:()=>{Ie(c.id),T(!1)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Confirm Order"}),c.status==="confirmed"&&e.jsxs(f,{onClick:()=>{ie("dispatch",c.id),T(!1)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"View Dispatch"]}),c.status==="dispatched"&&e.jsxs(f,{onClick:()=>{ie("dispatch",c.id),T(!1)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Check Dispatch Page"]})]})]})]})}),e.jsx(ee,{open:es,onOpenChange:R,children:e.jsxs(se,{className:"max-w-2xl",children:[e.jsxs(te,{children:[e.jsxs(ae,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Re,{className:"h-6 w-6 text-blue-600"})}),"Confirm Order"]}),e.jsx(re,{className:"text-gray-600",children:"Review and confirm this order. Select who is confirming and choose to approve or discard."})]}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Order Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Order Number:"}),e.jsx("span",{className:"ml-2 font-medium",children:h.order_number||h.id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Outlet:"}),e.jsx("span",{className:"ml-2 font-medium",children:Q.find(s=>s.id===h.outlet_id)?.name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[h.requested_quantity," kg"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Value:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["KES ",h.total_value.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium text-gray-700",children:"Confirmed By"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Re,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:A?.email||"Current User"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Logged in user"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium text-gray-700",children:"Action *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"approve",name:"action",value:"approve",checked:C.action==="approve",onChange:s=>X(t=>({...t,action:s.target.value})),className:"h-4 w-4 text-green-600"}),e.jsxs(z,{htmlFor:"approve",className:"flex items-center gap-2 text-green-700",children:[e.jsx(O,{className:"h-4 w-4"}),"Approve Order"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"discard",name:"action",value:"discard",checked:C.action==="discard",onChange:s=>X(t=>({...t,action:s.target.value})),className:"h-4 w-4 text-red-600"}),e.jsxs(z,{htmlFor:"discard",className:"flex items-center gap-2 text-red-700",children:[e.jsx(fe,{className:"h-4 w-4"}),"Discard Order"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium text-gray-700",children:"Notes (Optional)"}),e.jsx(We,{placeholder:"Add any notes about this confirmation...",className:"h-20 resize-none",value:C.notes,onChange:s=>X(t=>({...t,notes:s.target.value}))})]})]}),e.jsxs(vs,{className:"flex gap-3",children:[e.jsx(f,{variant:"outline",onClick:()=>R(!1),disabled:ce,className:"flex-1",children:"Cancel"}),e.jsx(f,{onClick:cs,disabled:ce,className:`flex-1 ${C.action==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white`,children:ce?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsx(e.Fragment,{children:C.action==="approve"?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Approve Order"]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Discard Order"]})})})]})]})]})})]})}export{ct as default};
