import{r as n,j as e,p as de,e as me,P as ge,s as _,m as gs,t as $,B as k,a as w,f as O,g as q,b as N,L as j,I as oe,X as ps,l as V,A as qe,i as Pe,E as We}from"./main-DB4uCdj-.js";import{S as je,a as _e,b as ve,c as De,d as Z}from"./select-Kkgy2rTa.js";import{T as hs}from"./textarea-DwEX2yrO.js";import{D as be,a as xs,b as ye,c as we,d as Ne,f as Se,e as Ce}from"./dialog-gcEtRVQ2.js";import{C as Be}from"./checkbox-DCZArAot.js";import{T as us,a as fs,b as Ue,c as Y,d as js,e as G}from"./table-4xsIKGF6.js";import{D as _s}from"./dollar-sign-Yg2MYWMc.js";import{T as vs}from"./trending-down-DU6bT4BC.js";import{C as Ye}from"./clock-BgPb-KpY.js";import{S as Ds}from"./scale-D5A3R3-8.js";import{A as bs}from"./activity-zNiBok2T.js";import{P as ys}from"./plus-DhCBbl-V.js";import{a as Ve,C as ws}from"./index-DAD_J4sl.js";import{R as Ns}from"./refresh-cw-DdWz1aH6.js";import{B as Ss}from"./building-2-UmmyAuuq.js";import{W as He}from"./weight-BTAtoM-8.js";import{D as Cs}from"./download-BjflFHRP.js";import{F as ks}from"./file-text-DMUxhdnm.js";import{C as Fs}from"./circle-check-big-4CPd352l.js";import"./index-Dfhx4fdS.js";import"./index-CNEemylg.js";function Ts({stats:T}){const[l,d]=n.useState([]);return n.useEffect(()=>{const i=[{id:"1",type:"warning",icon:e.jsx(de,{className:"h-5 w-5"}),text:`ðŸ—‘ï¸ Total Disposals: ${T?.totalDisposals||0} records | ${(T?.totalDisposedWeight||0).toFixed(1)}kg disposed`,bgColor:"bg-orange-100",textColor:"text-orange-800"},{id:"2",type:"info",icon:e.jsx(_s,{className:"h-5 w-5"}),text:`ðŸ’° Disposal Costs: KES ${(T?.totalDisposalCost||0).toLocaleString()} total cost | ${(T?.averageDisposalAge||0).toFixed(1)} days avg age`,bgColor:"bg-red-100",textColor:"text-red-800"},{id:"3",type:"warning",icon:e.jsx(me,{className:"h-5 w-5"}),text:`âš ï¸ Pending Disposals: ${T?.pendingDisposals||0} awaiting approval | ${T?.recentDisposals||0} this week`,bgColor:"bg-yellow-100",textColor:"text-yellow-800"},{id:"4",type:"info",icon:e.jsx(vs,{className:"h-5 w-5"}),text:`ðŸ“‰ Disposal Trend: ${T?.monthlyDisposalTrend||0}% change this month | Top reason: ${T?.topDisposalReason||"Age"}`,bgColor:"bg-purple-100",textColor:"text-purple-800"},{id:"5",type:"info",icon:e.jsx(Ye,{className:"h-5 w-5"}),text:`â° Average Age: ${(T?.averageDisposalAge||0).toFixed(1)} days before disposal | Quality control active`,bgColor:"bg-indigo-100",textColor:"text-indigo-800"},{id:"6",type:"success",icon:e.jsx(ge,{className:"h-5 w-5"}),text:"ðŸ“¦ Waste Management: Efficient disposal system | Environmental compliance maintained",bgColor:"bg-green-100",textColor:"text-green-800"},{id:"7",type:"info",icon:e.jsx(Ds,{className:"h-5 w-5"}),text:"âš–ï¸ Quality Control: Automated disposal triggers | Storage optimization active",bgColor:"bg-blue-100",textColor:"text-blue-800"},{id:"8",type:"achievement",icon:e.jsx(bs,{className:"h-5 w-5"}),text:"ðŸŽ¯ Rio Fish Farm: Leading waste management practices in Kenya's fish industry",bgColor:"bg-emerald-100",textColor:"text-emerald-800"}];d(i)},[T]),e.jsx("div",{className:"w-full bg-gradient-to-r from-orange-50 to-red-50 border-b border-orange-200 shadow-sm overflow-hidden relative z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"relative py-2 sm:py-3 overflow-hidden",children:e.jsxs("div",{className:"flex animate-marquee-simple whitespace-nowrap",children:[l.map(i=>e.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 px-3 sm:px-6 py-1 sm:py-2 rounded-full ${i.bgColor} ${i.textColor} font-medium text-xs sm:text-sm whitespace-nowrap mx-2 sm:mx-4 shadow-sm border flex-shrink-0`,children:[i.icon,e.jsx("span",{children:i.text})]},i.id)),l.map(i=>e.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 px-3 sm:px-6 py-1 sm:py-2 rounded-full ${i.bgColor} ${i.textColor} font-medium text-xs sm:text-sm whitespace-nowrap mx-2 sm:mx-4 shadow-sm border flex-shrink-0`,children:[i.icon,e.jsx("span",{children:i.text})]},`duplicate-${i.id}`))]})})})})}class Is{async getDisposalStats(){try{console.log("ðŸ” [DisposalService] Fetching disposal statistics...");const{data:l,error:d}=await _.from("disposal_records").select(`
          *,
          disposal_reason:disposal_reasons(name)
        `).order("created_at",{ascending:!1});if(d)throw console.error("âŒ [DisposalService] Error fetching disposal records:",d),d;console.log("ðŸ“Š [DisposalService] Disposal records:",l?.length||0);const i=l?.length||0,I=l?.reduce((u,f)=>u+(f.total_weight_kg||0),0)||0,v=l?.reduce((u,f)=>u+(f.disposal_cost||0),0)||0,S=l?.filter(u=>u.status==="pending").length||0,z=new Date;z.setDate(z.getDate()-7);const Q=l?.filter(u=>new Date(u.created_at)>=z).length||0,P=l?.filter(u=>u.status==="completed")||[];let H=0;P.length>0&&(H=P.reduce((f,ie)=>{const se=new Date(ie.created_at),b=new Date(ie.disposal_date),pe=Math.floor((b.getTime()-se.getTime())/(1e3*60*60*24));return f+pe},0)/P.length);const R={};l?.forEach(u=>{const f=u.disposal_reason?.name||"Unknown";R[f]=(R[f]||0)+1});const M=Object.keys(R).reduce((u,f)=>R[u]>R[f]?u:f,"Age"),r=new Date,x=r.getMonth(),A=r.getFullYear(),L=x===0?11:x-1,F=x===0?A-1:A,D=l?.filter(u=>{const f=new Date(u.created_at);return f.getMonth()===x&&f.getFullYear()===A}).length||0,E=l?.filter(u=>{const f=new Date(u.created_at);return f.getMonth()===L&&f.getFullYear()===F}).length||0,K=E>0?(D-E)/E*100:0,ee={totalDisposals:i,totalDisposedWeight:I,totalDisposalCost:v,pendingDisposals:S,recentDisposals:Q,averageDisposalAge:H,topDisposalReason:M,monthlyDisposalTrend:K};return console.log("ðŸ“Š [DisposalService] Calculated stats:",ee),ee}catch(l){return console.error("âŒ [DisposalService] Error getting disposal stats:",l),{totalDisposals:0,totalDisposedWeight:0,totalDisposalCost:0,pendingDisposals:0,recentDisposals:0,averageDisposalAge:0,topDisposalReason:"Age",monthlyDisposalTrend:0}}}async getDisposalRecords(l=50,d=0){try{const{data:i,error:I}=await _.from("disposal_records").select(`
          *,
          disposal_reason:disposal_reasons(name)
        `).order("created_at",{ascending:!1}).range(d,d+l-1);if(I)throw I;return i||[]}catch(i){return console.error("Error fetching disposal records:",i),[]}}async getDisposalReasons(){try{const{data:l,error:d}=await _.from("disposal_reasons").select("*").eq("is_active",!0).order("name");if(d)throw d;return l||[]}catch(l){return console.error("Error fetching disposal reasons:",l),[]}}async getInventoryForDisposal(l=30,d=!0){try{console.log("ðŸ” [DisposalService] Getting inventory for disposal with improved filtering..."),console.log("ðŸ“Š [DisposalService] Filter criteria:",{daysOld:l,includeStorageIssues:d});const i=new Date;i.setDate(i.getDate()-l);const I=i.toISOString().split("T")[0];console.log("ðŸ“… [DisposalService] Cutoff date:",I);const{data:v,error:S}=await _.from("storage_locations").select("id, name, status, capacity_kg, current_usage_kg").order("name");if(S)throw console.error("âŒ [DisposalService] Storage locations error:",S),S;console.log("ðŸ“ [DisposalService] Storage locations found:",v?.length||0);const z=new Map;v?.forEach(r=>{z.set(r.id,r)});let Q=_.from("sorting_results").select(`
          id,
          size_class,
          total_pieces,
          total_weight_grams,
          storage_location_id,
          sorting_batch:sorting_batches(
            id,
            batch_number,
            status,
            created_at,
            processing_record:processing_records(
              id,
              processing_date,
              warehouse_entry:warehouse_entries(
                id,
                entry_date,
                farmer_id,
                farmers(name, phone, location)
              )
            )
          )
        `).not("storage_location_id","is",null).gt("total_weight_grams",0);Q=Q.eq("sorting_batch.status","completed");const{data:P,error:H}=await Q.order("created_at",{ascending:!1});if(H)throw console.error("âŒ [DisposalService] Query error:",H),H;console.log("ðŸ“Š [DisposalService] Raw query results:",P?.length||0,"items");const R=(P||[]).filter(r=>{const x=z.get(r.storage_location_id),A=r.sorting_batch?.processing_record?.processing_date||r.sorting_batch?.created_at?.split("T")[0];if(!A)return console.log("âŒ [DisposalService] Item filtered out - no processing date:",r.id),!1;const L=new Date(A),F=Math.floor((new Date().getTime()-L.getTime())/(1e3*60*60*24)),D=l===0||F>=l,E=d&&(!r.storage_location_id||!x||x.status!=="active"||x.current_usage_kg>x.capacity_kg),K=D||E;return console.log("ðŸ” [DisposalService] Item check:",{id:r.id,batchNumber:r.sorting_batch?.batch_number,processingDate:A,daysInStorage:F,isOldEnough:D,hasStorageIssues:E,storageStatus:x?.status,isEligible:K}),K});console.log("ðŸ“Š [DisposalService] Eligible items after filtering:",R.length);const M=R.map(r=>{const x=z.get(r.storage_location_id),A=r.sorting_batch?.processing_record?.processing_date||r.sorting_batch?.created_at?.split("T")[0],L=Math.floor((new Date().getTime()-new Date(A).getTime())/(1e3*60*60*24));let F="Age";return r.storage_location_id?x?x.status!=="active"?F="Storage Inactive":x.current_usage_kg>x.capacity_kg?F="Storage Over Capacity":L>=l&&(F="Age"):F="Storage Not Found":F="No Storage Location",{sorting_result_id:r.id,size_class:r.size_class,total_pieces:r.total_pieces,total_weight_grams:r.total_weight_grams,batch_number:r.sorting_batch?.batch_number||"BATCH-"+r.sorting_batch?.id?.substring(0,8),storage_location_name:x?.name||"No Storage Assigned",farmer_name:r.sorting_batch?.processing_record?.warehouse_entry?.farmers?.name||"Unknown Farmer",processing_date:A,days_in_storage:L,disposal_reason:F,quality_notes:`Fish from ${r.sorting_batch?.processing_record?.warehouse_entry?.farmers?.name||"Unknown Farmer"}`,storage_status:x?.status||"unknown"}});return console.log("ðŸ“Š [DisposalService] Transformed items:",M.length),M}catch(i){return console.error("âŒ [DisposalService] Error getting inventory for disposal:",i),[]}}async getInventoryForDisposalFallback(l=30){try{const d=new Date;d.setDate(d.getDate()-l);const{data:i,error:I}=await _.from("sorting_results").select(`
          id,
          size_class,
          total_weight_grams,
          batch_number,
          storage_location_name,
          farmer_name,
          processing_date,
          quality_notes,
          storage_locations!inner(status)
        `).eq("status","available").lte("processing_date",d.toISOString().split("T")[0]).gte("total_weight_grams",0);if(I)throw I;return i?.map(v=>({sorting_result_id:v.id,size_class:v.size_class,total_weight_grams:v.total_weight_grams,batch_number:v.batch_number,storage_location_name:v.storage_location_name,storage_status:v.storage_locations?.status||"active",farmer_name:v.farmer_name,processing_date:v.processing_date,days_in_storage:Math.floor((new Date().getTime()-new Date(v.processing_date).getTime())/(1e3*60*60*24)),disposal_reason:v.storage_locations?.status==="inactive"?"Storage Inactive":"Age",quality_notes:v.quality_notes}))||[]}catch(d){return console.error("Error in fallback method:",d),[]}}}const Ke=new Is;function Zs({onNavigate:T}){const{user:l}=gs(),[d,i]=n.useState([]),[I,v]=n.useState([]),[S,z]=n.useState([]),[Q,P]=n.useState(null),[H,R]=n.useState(!0),[M,r]=n.useState(!1),[x,A]=n.useState(""),[L,F]=n.useState("all"),[D,E]=n.useState([]),[K,ee]=n.useState(!1),[u,f]=n.useState(!1),[ie,se]=n.useState(!1),[b,pe]=n.useState(null),[C,he]=n.useState(null),[W,te]=n.useState([]),[ae,ke]=n.useState(""),[Fe,Te]=n.useState("waste"),[Ie,Me]=n.useState(""),[Ae,Ee]=n.useState(0),[$e,Re]=n.useState(""),[c,Ge]=n.useState(0),[ne,Qe]=n.useState(!0),[B,ce]=n.useState(""),[U,le]=n.useState(""),[ze,Xe]=n.useState(new Set),Je=[{value:"waste",label:"Waste Disposal",description:"General waste disposal"},{value:"compost",label:"Compost",description:"Convert to compost"},{value:"donation",label:"Donation",description:"Donate to charity"},{value:"return_to_farmer",label:"Return to Farmer",description:"Return to original farmer"}];n.useEffect(()=>{re()},[]),n.useEffect(()=>{K&&xe()},[c,ne,B,U,K]),n.useEffect(()=>{if(c>0&&c<=7){const s=new Date,t=new Date;t.setDate(s.getDate()-c),ce(t.toISOString().split("T")[0]),le(s.toISOString().split("T")[0])}else c===0&&(ce(""),le(""))},[c]);const re=async()=>{try{R(!0),await Promise.all([Ze(),es(),xe(),ss()])}catch(s){console.error("Error loading disposal data:",s),$.error("Failed to load disposal data")}finally{R(!1)}},Ze=async()=>{const{data:s,error:t}=await _.from("disposal_records").select(`
        *,
        disposal_reason:disposal_reasons(*)
      `).order("created_at",{ascending:!1});if(t)throw console.error("Error loading disposal records:",t),t;if(s&&s.length>0){const a=new Set;if(s.forEach(m=>{m.disposed_by&&a.add(m.disposed_by),m.approved_by&&a.add(m.approved_by)}),a.size>0){const{data:m,error:h}=await _.from("profiles").select("id, full_name").in("id",Array.from(a));if(!h&&m){const o=new Map(m.map(p=>[p.id,p.full_name])),g=s.map(p=>({...p,disposed_by:p.disposed_by?o.get(p.disposed_by)||`User ${p.disposed_by.slice(0,8)}`:null,approved_by:p.approved_by?o.get(p.approved_by)||`User ${p.approved_by.slice(0,8)}`:null}));i(g);return}}}i(s||[])},es=async()=>{const{data:s,error:t}=await _.from("disposal_reasons").select("*").eq("is_active",!0).order("name");if(t)throw t;v(s||[])},ss=async()=>{try{console.log("ðŸ” [DisposalManagement] Loading disposal statistics...");const s=await Ke.getDisposalStats();P(s),console.log("ðŸ“Š [DisposalManagement] Disposal stats loaded:",s)}catch(s){console.error("âŒ [DisposalManagement] Error loading disposal stats:",s),P({totalDisposals:0,totalDisposedWeight:0,totalDisposalCost:0,pendingDisposals:0,recentDisposals:0,averageDisposalAge:0,topDisposalReason:"Age",monthlyDisposalTrend:0})}},xe=async()=>{try{console.log("ðŸ” [DisposalManagement] Loading inventory for disposal with improved filtering..."),console.log("ðŸ“Š [DisposalManagement] Filter criteria:",{daysOld:c,includeStorageIssues:ne,fromDate:B,toDate:U});const s=await Ke.getInventoryForDisposal(c,ne);console.log("ðŸ“Š [DisposalManagement] Raw data from service:",s?.length||0,"items");let t=s||[];(B||U)&&(console.log("ðŸ” [DisposalManagement] Applying additional date filtering:",{fromDate:B,toDate:U}),console.log("ðŸ“Š [DisposalManagement] Items before date filtering:",t.length),t=t.filter(a=>{if(!a.processing_date)return console.log("âŒ [DisposalManagement] Item has no processing date:",a.sorting_result_id),!1;const m=new Date(a.processing_date),h=B?new Date(B):null,o=U?new Date(U):null;if(isNaN(m.getTime()))return console.log("âŒ [DisposalManagement] Invalid processing date:",a.processing_date),!1;const g=!h||m>=h,p=!o||m<=o;return console.log("ðŸ” [DisposalManagement] Date check:",{itemId:a.sorting_result_id,processingDate:a.processing_date,processingDateObj:m,from:h,to:o,passesFrom:g,passesTo:p,passes:g&&p}),g&&p}),console.log("ðŸ“Š [DisposalManagement] Items after date filtering:",t.length)),console.log("ðŸ“Š [DisposalManagement] Final filtered data:",t.length,"items"),z(t)}catch(s){console.error("âŒ [DisposalManagement] Error loading inventory for disposal:",s),z([])}},ts=async()=>{if(!ae||D.length===0){$.error("Please select a reason and at least one item");return}if(M){$.error("Please wait, operation in progress...");return}r(!0);try{console.log("ðŸ” [DisposalManagement] Starting disposal creation..."),console.log("ðŸ“Š [DisposalManagement] Selected reason:",ae),console.log("ðŸ“Š [DisposalManagement] Selected items:",D.length),console.log("ðŸ“Š [DisposalManagement] User ID:",l?.id);const s=I.find(y=>y.id===ae);if(!s){console.error("âŒ [DisposalManagement] Disposal reason not found:",ae),$.error("Selected disposal reason is invalid. Please refresh and try again.");return}console.log("âœ… [DisposalManagement] Disposal reason verified:",s.name);const a=`DISPOSAL-${new Date().toISOString().replace(/[-:T]/g,"").substring(0,14)}`;console.log("ðŸ“Š [DisposalManagement] Generated disposal number:",a);const m={disposal_number:a,disposal_reason_id:ae,disposal_method:Fe,disposal_location:Ie||null,disposal_cost:Ae||0,notes:$e||null,disposed_by:l?.id||null,status:"pending",total_weight_kg:0};console.log("ðŸ“Š [DisposalManagement] Disposal record data:",m);const{data:h,error:o}=await _.from("disposal_records").insert(m).select().single();if(o)throw console.error("âŒ [DisposalManagement] Error creating disposal record:",o),console.error("âŒ [DisposalManagement] Error details:",{code:o.code,message:o.message,details:o.details,hint:o.hint}),o;console.log("âœ… [DisposalManagement] Disposal record created:",h);const g=S.filter(y=>D.includes(y.sorting_result_id));console.log("ðŸ“Š [DisposalManagement] Selected inventory items:",g.length);let p=0;for(const y of g){const fe=y.total_weight_grams/1e3;p+=fe,console.log(`ðŸ“¦ [DisposalManagement] Adding item to disposal: ${y.batch_number} Size ${y.size_class} - ${fe}kg (${y.total_weight_grams}g)`);const Oe={disposal_record_id:h.id,sorting_result_id:y.sorting_result_id,size_class:y.size_class,weight_kg:fe,batch_number:y.batch_number,storage_location_name:y.storage_location_name,farmer_name:y.farmer_name,processing_date:y.processing_date,quality_notes:y.quality_notes,disposal_reason:y.disposal_reason};console.log("ðŸ“Š [DisposalManagement] Disposal item data:",Oe);const{error:J}=await _.from("disposal_items").insert(Oe);if(J)throw console.error("âŒ [DisposalManagement] Error creating disposal item:",J),console.error("âŒ [DisposalManagement] Item error details:",{code:J.code,message:J.message,details:J.details,hint:J.hint}),J}console.log(`Updating disposal record ${h.id} with total weight: ${p}kg`);const{error:ue}=await _.from("disposal_records").update({total_weight_kg:p}).eq("id",h.id);if(ue)throw console.error("Error updating disposal record:",ue),ue;$.success(`Disposal created successfully! ${D.length} items added (${p.toFixed(2)} kg)`),ee(!1),ns(),re()}catch(s){console.error("Error creating disposal:",s),$.error("Failed to create disposal record")}finally{r(!1)}},as=async s=>{he(s),se(!0);try{const{data:t,error:a}=await _.from("disposal_items").select("*").eq("disposal_record_id",s.id);a?(console.error("Error loading disposal items:",a),te([])):te(t||[])}catch(t){console.error("Error loading disposal items:",t),te([])}},os=async s=>{pe(s),f(!0);try{const{data:t,error:a}=await _.from("disposal_items").select("*").eq("disposal_record_id",s.id);a?(console.error("Error loading disposal items:",a),te([])):te(t||[])}catch(t){console.error("Error loading disposal items:",t),te([])}},ls=async s=>{try{const{error:t}=await _.rpc("complete_disposal",{p_disposal_id:s});if(t)throw t;$.success("Disposal completed successfully"),re()}catch(t){console.error("Error completing disposal:",t),$.error("Failed to complete disposal")}},rs=async()=>{if(C)try{r(!0);const{error:s}=await _.from("disposal_records").update({status:"completed",approved_by:l?.id||null}).eq("id",C.id);if(s)throw s;const{error:t}=await _.from("disposal_items").select("sorting_result_id").eq("disposal_record_id",C.id);if(t)throw t;if(W&&W.length>0){const a=W.map(h=>h.sorting_result_id);console.log(`Removing ${a.length} items from inventory:`,a);const{error:m}=await _.from("sorting_results").update({total_weight_grams:0,total_pieces:0}).in("id",a);if(m)throw console.error("Error removing items from inventory:",m),m;console.log(`Successfully removed ${a.length} items from inventory`)}$.success("Disposal completed and items removed from storage"),se(!1),he(null),re()}catch(s){console.error("Error approving disposal:",s),$.error("Failed to approve disposal")}finally{r(!1)}},is=async()=>{if(C)try{r(!0),console.log(`Attempting to decline disposal: ${C.id}`);const{error:s}=await _.from("disposal_records").update({status:"cancelled",notes:(C.notes||"")+`

[Declined by user]`}).eq("id",C.id);if(s)throw console.error("Error updating disposal record:",s),s;console.log(`Declining disposal record ${C.id}`),$.success("Disposal declined and marked as cancelled"),se(!1),he(null),re()}catch(s){console.error("Error declining disposal:",s),$.error("Failed to decline disposal")}finally{r(!1)}},ns=()=>{ke(""),Te("waste"),Me(""),Ee(0),Re(""),E([]),ce(""),le("")},Le=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},cs=()=>{const s=["Number","Date","Reason","Weight (kg)","Status","Created By","Approved/Denied By"],t=X.map(g=>[g.disposal_number,new Date(g.disposal_date).toLocaleDateString(),g.disposal_reason?.name||"N/A",g.total_weight_kg.toFixed(1),g.status,g.disposed_by||"N/A",g.approved_by||(g.status==="pending"?"Pending":"-")]),a=[s.join(","),...t.map(g=>g.map(p=>`"${p}"`).join(","))].join(`
`),m=new Blob([a],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),o=URL.createObjectURL(m);h.setAttribute("href",o),h.setAttribute("download",`disposal-records-${new Date().toISOString().split("T")[0]}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)},ds=()=>{const s=window.open("","_blank");if(!s)return;const t=`
      <html>
        <head>
          <title>Disposal Records Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #1f2937; margin-bottom: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f3f4f6; font-weight: bold; }
            .status-pending { background-color: #fef3c7; color: #92400e; }
            .status-approved { background-color: #dbeafe; color: #1e40af; }
            .status-completed { background-color: #d1fae5; color: #065f46; }
            .status-cancelled { background-color: #fee2e2; color: #991b1b; }
          </style>
        </head>
        <body>
          <h1>Rio Fish Farm - Disposal Records Report</h1>
          <p>Generated on: ${new Date().toLocaleDateString()}</p>
          <p>Total Records: ${X.length}</p>
          <table>
            <thead>
              <tr>
                <th>Number</th>
                <th>Date</th>
                <th>Reason</th>
                <th>Weight (kg)</th>
                <th>Status</th>
                <th>Created By</th>
                <th>Approved/Denied By</th>
              </tr>
            </thead>
            <tbody>
              ${X.map(a=>`
                <tr>
                  <td>${a.disposal_number}</td>
                  <td>${new Date(a.disposal_date).toLocaleDateString()}</td>
                  <td>${a.disposal_reason?.name||"N/A"}</td>
                  <td>${a.total_weight_kg.toFixed(1)}</td>
                  <td class="status-${a.status}">${a.status}</td>
                  <td>${a.disposed_by||"N/A"}</td>
                  <td>${a.approved_by||(a.status==="pending"?"Pending":"-")}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `;s.document.write(t),s.document.close(),s.print()},X=d.filter(s=>{const t=s.disposal_number.toLowerCase().includes(x.toLowerCase())||s.disposal_reason?.name.toLowerCase().includes(x.toLowerCase()),a=L==="all"||s.status===L;return t&&a}),ms=S.reduce((s,t)=>s+t.total_weight_grams/1e3,0);return H?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 font-medium",children:"Loading disposal management..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 content-container",children:[e.jsx(Ts,{stats:Q}),e.jsxs("div",{className:"container mx-auto responsive-padding max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Disposal Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage fish disposal and waste handling"})]}),e.jsxs(be,{open:K,onOpenChange:ee,children:[e.jsx(xs,{asChild:!0,children:e.jsxs(k,{className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Create Disposal"]})}),e.jsxs(ye,{className:"max-w-4xl w-[95vw] max-h-[90vh] overflow-y-auto overflow-x-hidden",children:[e.jsxs(we,{children:[e.jsx(Ne,{className:"text-xl font-semibold",children:"Create New Disposal Record"}),e.jsx(Se,{children:"Configure disposal criteria and select items for disposal"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 max-w-full overflow-x-hidden",children:[e.jsxs(w,{children:[e.jsx(O,{className:"pb-3",children:e.jsx(q,{className:"text-lg",children:"Filter Items for Disposal"})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"daysOld",className:"text-sm font-medium",children:"Days Old Threshold"}),e.jsx(oe,{id:"daysOld",type:"number",value:c,onChange:s=>Ge(Number(s.target.value)),placeholder:"30",className:"mt-1",min:"0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{id:"includeStorageIssues",checked:ne,onCheckedChange:Qe}),e.jsx(j,{htmlFor:"includeStorageIssues",className:"text-sm",children:"Include Storage Issues"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"fromDate",className:"text-sm font-medium break-words",children:["From Date ",c===0?"(Optional)":c<=7?`(Auto-set to ${c} days ago)`:`(Manual selection for ${c}+ days)`]}),e.jsx(oe,{id:"fromDate",type:"date",value:B,onChange:s=>{ce(s.target.value),s.target.value&&le(new Date().toISOString().split("T")[0])},className:"mt-1",max:new Date().toISOString().split("T")[0],disabled:c>0&&c<=7}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 break-words",children:c===0?"Leave empty to show all items. Selecting a date will auto-set To Date to today.":c<=7?`Automatically set based on ${c} days threshold`:`Select start date for items ${c}+ days old. To Date will be auto-set to today.`})]}),e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"toDate",className:"text-sm font-medium break-words",children:["To Date ",c===0?"(Optional)":c<=7?"(Auto-set to today)":"(Manual selection)"]}),e.jsx(oe,{id:"toDate",type:"date",value:U,onChange:s=>le(s.target.value),className:"mt-1",max:new Date().toISOString().split("T")[0],disabled:c>0&&c<=7}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 break-words",children:c===0?"Automatically set to today when From Date is selected":c<=7?"Automatically set to today":"Automatically set to today when From Date is selected"})]})]})]})]}),e.jsxs(w,{children:[e.jsx(O,{className:"pb-3",children:e.jsx(q,{className:"text-lg",children:"Disposal Details"})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"reason",className:"text-sm font-medium",children:"Disposal Reason *"}),e.jsxs(je,{value:ae,onValueChange:ke,children:[e.jsx(_e,{className:"mt-1",children:e.jsx(ve,{placeholder:"Select reason"})}),e.jsx(De,{children:I.map(s=>e.jsx(Z,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"method",className:"text-sm font-medium",children:"Disposal Method *"}),e.jsxs(je,{value:Fe,onValueChange:Te,children:[e.jsx(_e,{className:"mt-1",children:e.jsx(ve,{placeholder:"Select method"})}),e.jsx(De,{children:Je.map(s=>e.jsx(Z,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"location",className:"text-sm font-medium",children:"Disposal Location"}),e.jsx(oe,{id:"location",value:Ie,onChange:s=>Me(s.target.value),placeholder:"e.g., Waste Management Facility",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"cost",className:"text-sm font-medium",children:"Disposal Cost (KSh)"}),e.jsx(oe,{id:"cost",type:"number",value:Ae,onChange:s=>Ee(Number(s.target.value)),placeholder:"0",className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"notes",className:"text-sm font-medium",children:"Notes"}),e.jsx(hs,{id:"notes",value:$e,onChange:s=>Re(s.target.value),placeholder:"Additional disposal notes...",rows:3,className:"mt-1"})]})]})]})]}),e.jsxs(w,{className:"overflow-x-hidden",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{className:"text-lg",children:"Select Items for Disposal"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>E(S.map(s=>s.sorting_result_id)),className:"text-green-600 hover:text-green-700",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"Select All"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>E([]),className:"text-gray-600 hover:text-gray-700",children:[e.jsx(ps,{className:"w-4 h-4 mr-1"}),"Clear All"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:xe,className:"text-blue-600 hover:text-blue-700",children:[e.jsx(Ns,{className:"w-4 h-4 mr-1"}),"Refresh"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 break-words",children:[e.jsxs("span",{className:"font-medium",children:["Selected: ",D.length," items"]}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsxs("span",{className:"font-medium",children:["Total Weight: ",S.filter(s=>D.includes(s.sorting_result_id)).reduce((s,t)=>s+t.total_weight_grams/1e3,0).toFixed(2)," kg"]})]}),e.jsx(V,{variant:"outline",className:"text-xs break-words",children:c===0?"Showing all items (no age filter)":c<=7?`Showing items ${c}+ days old (auto-range: ${B} to ${U})`:`Showing items ${c}+ days old (manual range: ${B||"any"} to ${U||"any"})`})]}),D.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2 break-words",children:["Size Distribution: ",Object.entries(S.filter(s=>D.includes(s.sorting_result_id)).reduce((s,t)=>(s[t.size_class]=(s[t.size_class]||0)+t.total_weight_grams/1e3,s),{})).map(([s,t])=>`Size ${s}: ${t.toFixed(1)}kg`).join(" | ")]})]}),e.jsxs(N,{children:[e.jsx("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:Object.entries(S.reduce((s,t)=>{const a=t.storage_location_name;return s[a]||(s[a]=[]),s[a].push(t),s},{})).map(([s,t])=>{const a=ze.has(s),m=t.reduce((o,g)=>o+g.total_weight_grams/1e3,0),h=t.filter(o=>D.includes(o.sorting_result_id)).length;return e.jsxs("div",{className:"border-b last:border-b-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 cursor-pointer",onClick:()=>{const o=new Set(ze);a?o.delete(s):o.add(s),Xe(o)},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ss,{className:"w-4 h-4 text-gray-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s}),t[0]?.storage_status==="inactive"&&e.jsx(V,{variant:"destructive",className:"text-xs",children:"Inactive"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.length," batches â€¢ ",m.toFixed(1),"kg",h>0&&` â€¢ ${h} selected`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{variant:t[0]?.disposal_reason==="Storage Inactive"?"destructive":"secondary",children:t[0]?.disposal_reason}),e.jsx(ws,{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`})]})]}),a&&e.jsx("div",{className:"p-3 bg-white",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:t.map(o=>e.jsx("div",{className:`flex items-center justify-between p-2 rounded border ${D.includes(o.sorting_result_id)?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{checked:D.includes(o.sorting_result_id),onCheckedChange:g=>{E(g?[...D,o.sorting_result_id]:D.filter(p=>p!==o.sorting_result_id))}}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-blue-600",children:o.batch_number}),e.jsxs(V,{variant:"outline",className:"text-xs",children:["Size ",o.size_class]}),e.jsxs(V,{variant:o.days_in_storage>30?"destructive":"secondary",className:"text-xs",children:[o.days_in_storage," days"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[o.farmer_name," â€¢ ",(o.total_weight_grams/1e3).toFixed(1),"kg"]})]})]})},o.sorting_result_id))})})]},s)})}),S.length===0&&e.jsxs(qe,{className:"mt-4",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx(Pe,{children:"No items found for disposal with current criteria."})]})]})]})]}),e.jsxs(Ce,{children:[e.jsx(k,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"}),e.jsx(k,{onClick:ts,className:"bg-red-600 hover:bg-red-700",disabled:M,children:M?"Processing...":"Create Disposal"})]})]})]}),e.jsx(be,{open:ie,onOpenChange:se,children:e.jsxs(ye,{className:"max-w-2xl",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5 text-orange-500"}),"Confirm Disposal"]}),e.jsx(Se,{children:"Please review the disposal details and confirm or decline the action."})]}),C&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Disposal Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Disposal Number:"}),e.jsx("p",{className:"text-gray-600",children:C.disposal_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Method:"}),e.jsx("p",{className:"text-gray-600 capitalize",children:C.disposal_method})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Weight:"}),e.jsxs("p",{className:"text-gray-600",children:[C.total_weight_kg.toFixed(2)," kg"]})]})]}),C.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"font-medium",children:"Notes:"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:C.notes})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Items Being Disposed (",W.length," items)"]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:W.length>0?e.jsx("div",{className:"space-y-2",children:W.map((s,t)=>e.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-600 text-lg",children:s.batch_number}),e.jsxs(V,{variant:"outline",className:"text-sm",children:["Size ",s.size_class||"Unknown"]})]}),e.jsxs("span",{className:"text-lg font-semibold text-gray-700",children:[s.weight_kg.toFixed(2)," kg"]})]})},t))}):e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(ge,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Loading disposal items..."})]})})]}),e.jsxs(qe,{children:[e.jsx(me,{className:"h-4 w-4"}),e.jsxs(Pe,{children:[e.jsx("strong",{children:"Warning:"})," Approving this disposal will permanently remove the ",W.length," items shown above from storage. This action cannot be undone."]})]})]}),e.jsxs(Ce,{className:"gap-2",children:[e.jsx(k,{variant:"outline",onClick:is,disabled:M,className:"text-red-600 hover:text-red-700",children:M?"Processing...":"Decline"}),e.jsx(k,{onClick:rs,disabled:M,className:"bg-green-600 hover:bg-green-700",children:M?"Processing...":"Approve & Remove from Storage"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Disposals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]}),e.jsx(de,{className:"h-8 w-8 text-gray-400"})]})})}),e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:d.filter(s=>s.status==="pending").length})]}),e.jsx(Ye,{className:"h-8 w-8 text-yellow-400"})]})})}),e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available Items"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:S.length})]}),e.jsx(ge,{className:"h-8 w-8 text-orange-400"})]})})}),e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Weight"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[ms.toFixed(1),"kg"]})]}),e.jsx(He,{className:"h-8 w-8 text-blue-400"})]})})})]}),e.jsx(w,{className:"mb-6",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(oe,{placeholder:"Search disposal records...",value:x,onChange:s=>A(s.target.value),className:"max-w-md"})}),e.jsxs(je,{value:L,onValueChange:F,children:[e.jsx(_e,{className:"w-40",children:e.jsx(ve,{placeholder:"Status"})}),e.jsxs(De,{children:[e.jsx(Z,{value:"all",children:"All"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"approved",children:"Approved"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})]})})}),e.jsxs(w,{children:[e.jsx(O,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),"Disposal Records"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{onClick:cs,variant:"outline",size:"sm",disabled:X.length===0,className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Export CSV"]}),e.jsxs(k,{onClick:ds,variant:"outline",size:"sm",disabled:X.length===0,className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"Export PDF"]})]})]})}),e.jsxs(N,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(us,{children:[e.jsx(fs,{children:e.jsxs(Ue,{children:[e.jsx(Y,{children:"Number"}),e.jsx(Y,{children:"Date"}),e.jsx(Y,{children:"Reason"}),e.jsx(Y,{children:"Weight"}),e.jsx(Y,{children:"Status"}),e.jsx(Y,{children:"Created By"}),e.jsx(Y,{children:"Approved/Denied By"}),e.jsx(Y,{children:"Actions"})]})}),e.jsx(js,{children:X.map(s=>e.jsxs(Ue,{className:"hover:bg-gray-50",children:[e.jsx(G,{className:"font-medium",children:s.disposal_number}),e.jsx(G,{children:new Date(s.disposal_date).toLocaleDateString()}),e.jsx(G,{children:s.disposal_reason?.name}),e.jsxs(G,{children:[s.total_weight_kg.toFixed(1),"kg"]}),e.jsx(G,{children:e.jsx(V,{className:Le(s.status),children:s.status})}),e.jsx(G,{children:s.disposed_by||"N/A"}),e.jsx(G,{children:s.approved_by||(s.status==="pending"?"Pending":"-")}),e.jsx(G,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>os(s),title:"View Details",children:e.jsx(We,{className:"w-4 h-4"})}),s.status==="pending"&&e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>as(s),className:"text-blue-600 hover:text-blue-700",title:"Review & Approve Disposal",children:e.jsx(Ve,{className:"w-4 h-4"})}),s.status==="approved"&&e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>ls(s.id),className:"text-green-600 hover:text-green-700",title:"Complete Disposal",children:e.jsx(Fs,{className:"w-4 h-4"})})]})})]},s.id))})]})}),X.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(de,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"No disposal records found"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Create your first disposal record to get started"})]})]})]}),e.jsx(be,{open:u,onOpenChange:f,children:e.jsxs(ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"Disposal Details"]}),e.jsx(Se,{children:"View detailed information about this disposal record"})]}),b&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(q,{className:"text-lg",children:"Basic Information"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Disposal Number"}),e.jsx("p",{className:"text-lg font-semibold",children:b.disposal_number})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(V,{className:Le(b.status),children:b.status})})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(b.disposal_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Method"}),e.jsx("p",{className:"text-gray-900 capitalize",children:b.disposal_method})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Location"}),e.jsx("p",{className:"text-gray-900",children:b.disposal_location||"Not specified"})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Cost"}),e.jsxs("p",{className:"text-gray-900",children:["KSh ",b.disposal_cost.toFixed(2)]})]})]})})]}),e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(q,{className:"text-lg",children:"Disposal Reason"})}),e.jsx(N,{children:e.jsx("p",{className:"text-gray-900",children:b.disposal_reason?.name||"Not specified"})})]}),e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(q,{className:"text-lg",children:"Summary"})}),e.jsx(N,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(He,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Weight"}),e.jsxs("p",{className:"text-xl font-semibold",children:[b.total_weight_kg.toFixed(2)," kg"]})]})]})})})]}),b.notes&&e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(q,{className:"text-lg",children:"Notes"})}),e.jsx(N,{children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.notes})})]}),e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(q,{className:"text-lg",children:"Disposal Items"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Total Weight"}),e.jsxs("p",{className:"text-lg font-semibold",children:[b.total_weight_kg.toFixed(2)," kg"]})]})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Disposal Location"}),e.jsx("p",{className:"text-gray-900 font-medium",children:b.disposal_location||"Not specified"})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Disposal Method"}),e.jsx("p",{className:"text-gray-900 font-medium capitalize",children:b.disposal_method.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium text-gray-600",children:"Disposal Cost"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:["KSh ",b.disposal_cost.toFixed(2)]})]})]})})]}),W.length>0&&e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(q,{className:"text-lg",children:"Detailed Items Breakdown"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:W.map((s,t)=>e.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-600 text-lg",children:s.batch_number}),e.jsxs(V,{variant:"outline",className:"text-sm",children:["Size ",s.size_class||"Unknown"]})]}),e.jsxs("span",{className:"text-lg font-semibold text-gray-700",children:[s.weight_kg.toFixed(2)," kg"]})]})},t))})})]})]}),e.jsx(Ce,{children:e.jsx(k,{variant:"outline",onClick:()=>f(!1),children:"Close"})})]})})]})]})}export{Zs as default};
