const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-8N3o9mMm.js","assets/main-c8IhzymI.css"])))=>i.map(i=>d[i]);
import{c as re,r as t,G as ze,j as e,x as Ha,z as Ge,y as hs,J as Oe,a8 as De,a9 as Ba,K as ta,B as S,l as O,I as E,X as Ya,u as Xa,aa as Z,a as Q,b as K,f as oe,g as ce,C as ia,W as $e,T as Rs,S as Es,d as Ds,P as os,H as na,p as ae,U as Ie,E as ls,k as Ga,A as Bs,i as Ys,L as w,ab as Za,e as as,s as F,_ as ws,t as _,ac as Ja}from"./main-8N3o9mMm.js";import{e as Qa,C as Xs,S as je,a as we,b as Ne,c as _e,d as T}from"./select-YMU3Gsb0.js";import{D as Pe,b as Ae,c as ke,d as Re,f as Ee}from"./dialog-BmuCPjhY.js";import{T as Ka,a as er,b as Se,c as Ce}from"./tabs-BgNtsn9a.js";import{T as rs,a as ts,b as fe,c as M,d as is,e as L}from"./table-KYkUMzaD.js";import{T as Ns}from"./textarea-G5xl3sXf.js";import{a as sr}from"./auditLogger-B5yJp87E.js";import{u as ar}from"./index-GiPM7N_v.js";import{C as Gs,a as rr}from"./index-B_MyCMCN.js";import{S as la}from"./search-Csg09PpY.js";import{U as tr}from"./user-ZnwuLv-1.js";import{C as ir}from"./chevron-right-CGx8v68f.js";import{C as cs}from"./circle-check-big-DP8Ow5LW.js";import{D as Zs}from"./download-Bb9H-SiI.js";import{S as oa}from"./settings-py8ujCtt.js";import{F as nr}from"./file-text-BLe5iXXS.js";import{A as _s}from"./activity-D2xG4vxr.js";import{B as Ss}from"./building-2-CSW-p6qx.js";import{P as Xe}from"./plus-BP8gI5ri.js";import{P as Cs}from"./phone-DtL_v1BQ.js";import{C as lr}from"./clock-DzAVquri.js";import{S as ns}from"./square-pen-CMd_3XAg.js";import{M as Js}from"./map-pin-zRbnR5TS.js";import{R as Qs}from"./refresh-cw-CjC4Oibh.js";import{C as Ks}from"./circle-x-CWlPyhJ8.js";import"./index-Cl6itz8u.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],$s=re("clipboard-list",or);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],us=re("crown",cr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],mr=re("file-chart-column-increasing",dr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ur=re("info",hr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],gr=re("key",xr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],ea=re("mail",pr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],sa=re("send",fr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yr=re("shield-check",br);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]],Fe=re("tractor",vr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],wr=re("user-minus",jr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],_r=re("user-plus",Nr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],aa=re("wheat",Sr);function Cr(r,l){return t.useReducer((n,d)=>l[n][d]??n,r)}var Os="ScrollArea",[ca,vt]=Ha(Os),[Pr,te]=ca(Os),da=t.forwardRef((r,l)=>{const{__scopeScrollArea:n,type:d="hover",dir:o,scrollHideDelay:c=600,...m}=r,[u,p]=t.useState(null),[y,f]=t.useState(null),[C,b]=t.useState(null),[k,R]=t.useState(null),[N,q]=t.useState(null),[U,h]=t.useState(0),[P,D]=t.useState(0),[J,A]=t.useState(!1),[ie,ne]=t.useState(!1),z=ze(l,ue=>p(ue)),ee=ar(o);return e.jsx(Pr,{scope:n,type:d,dir:ee,scrollHideDelay:c,scrollArea:u,viewport:y,onViewportChange:f,content:C,onContentChange:b,scrollbarX:k,onScrollbarXChange:R,scrollbarXEnabled:J,onScrollbarXEnabledChange:A,scrollbarY:N,onScrollbarYChange:q,scrollbarYEnabled:ie,onScrollbarYEnabledChange:ne,onCornerWidthChange:h,onCornerHeightChange:D,children:e.jsx(Ge.div,{dir:ee,...m,ref:z,style:{position:"relative","--radix-scroll-area-corner-width":U+"px","--radix-scroll-area-corner-height":P+"px",...r.style}})})});da.displayName=Os;var ma="ScrollAreaViewport",ha=t.forwardRef((r,l)=>{const{__scopeScrollArea:n,children:d,nonce:o,...c}=r,m=te(ma,n),u=t.useRef(null),p=ze(l,u,m.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...c,ref:p,style:{overflowX:m.scrollbarXEnabled?"scroll":"hidden",overflowY:m.scrollbarYEnabled?"scroll":"hidden",...r.style},children:e.jsx("div",{ref:m.onContentChange,style:{minWidth:"100%",display:"table"},children:d})})]})});ha.displayName=ma;var de="ScrollAreaScrollbar",ua=t.forwardRef((r,l)=>{const{forceMount:n,...d}=r,o=te(de,r.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:m}=o,u=r.orientation==="horizontal";return t.useEffect(()=>(u?c(!0):m(!0),()=>{u?c(!1):m(!1)}),[u,c,m]),o.type==="hover"?e.jsx(Ar,{...d,ref:l,forceMount:n}):o.type==="scroll"?e.jsx(kr,{...d,ref:l,forceMount:n}):o.type==="auto"?e.jsx(xa,{...d,ref:l,forceMount:n}):o.type==="always"?e.jsx(Vs,{...d,ref:l}):null});ua.displayName=de;var Ar=t.forwardRef((r,l)=>{const{forceMount:n,...d}=r,o=te(de,r.__scopeScrollArea),[c,m]=t.useState(!1);return t.useEffect(()=>{const u=o.scrollArea;let p=0;if(u){const y=()=>{window.clearTimeout(p),m(!0)},f=()=>{p=window.setTimeout(()=>m(!1),o.scrollHideDelay)};return u.addEventListener("pointerenter",y),u.addEventListener("pointerleave",f),()=>{window.clearTimeout(p),u.removeEventListener("pointerenter",y),u.removeEventListener("pointerleave",f)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(hs,{present:n||c,children:e.jsx(xa,{"data-state":c?"visible":"hidden",...d,ref:l})})}),kr=t.forwardRef((r,l)=>{const{forceMount:n,...d}=r,o=te(de,r.__scopeScrollArea),c=r.orientation==="horizontal",m=gs(()=>p("SCROLL_END"),100),[u,p]=Cr("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return t.useEffect(()=>{if(u==="idle"){const y=window.setTimeout(()=>p("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(y)}},[u,o.scrollHideDelay,p]),t.useEffect(()=>{const y=o.viewport,f=c?"scrollLeft":"scrollTop";if(y){let C=y[f];const b=()=>{const k=y[f];C!==k&&(p("SCROLL"),m()),C=k};return y.addEventListener("scroll",b),()=>y.removeEventListener("scroll",b)}},[o.viewport,c,p,m]),e.jsx(hs,{present:n||u!=="hidden",children:e.jsx(Vs,{"data-state":u==="hidden"?"hidden":"visible",...d,ref:l,onPointerEnter:Oe(r.onPointerEnter,()=>p("POINTER_ENTER")),onPointerLeave:Oe(r.onPointerLeave,()=>p("POINTER_LEAVE"))})})}),xa=t.forwardRef((r,l)=>{const n=te(de,r.__scopeScrollArea),{forceMount:d,...o}=r,[c,m]=t.useState(!1),u=r.orientation==="horizontal",p=gs(()=>{if(n.viewport){const y=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;m(u?y:f)}},10);return qe(n.viewport,p),qe(n.content,p),e.jsx(hs,{present:d||c,children:e.jsx(Vs,{"data-state":c?"visible":"hidden",...o,ref:l})})}),Vs=t.forwardRef((r,l)=>{const{orientation:n="vertical",...d}=r,o=te(de,r.__scopeScrollArea),c=t.useRef(null),m=t.useRef(0),[u,p]=t.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),y=ya(u.viewport,u.content),f={...d,sizes:u,onSizesChange:p,hasThumb:y>0&&y<1,onThumbChange:b=>c.current=b,onThumbPointerUp:()=>m.current=0,onThumbPointerDown:b=>m.current=b};function C(b,k){return Or(b,m.current,u,k)}return n==="horizontal"?e.jsx(Rr,{...f,ref:l,onThumbPositionChange:()=>{if(o.viewport&&c.current){const b=o.viewport.scrollLeft,k=ra(b,u,o.dir);c.current.style.transform=`translate3d(${k}px, 0, 0)`}},onWheelScroll:b=>{o.viewport&&(o.viewport.scrollLeft=b)},onDragScroll:b=>{o.viewport&&(o.viewport.scrollLeft=C(b,o.dir))}}):n==="vertical"?e.jsx(Er,{...f,ref:l,onThumbPositionChange:()=>{if(o.viewport&&c.current){const b=o.viewport.scrollTop,k=ra(b,u);c.current.style.transform=`translate3d(0, ${k}px, 0)`}},onWheelScroll:b=>{o.viewport&&(o.viewport.scrollTop=b)},onDragScroll:b=>{o.viewport&&(o.viewport.scrollTop=C(b))}}):null}),Rr=t.forwardRef((r,l)=>{const{sizes:n,onSizesChange:d,...o}=r,c=te(de,r.__scopeScrollArea),[m,u]=t.useState(),p=t.useRef(null),y=ze(l,p,c.onScrollbarXChange);return t.useEffect(()=>{p.current&&u(getComputedStyle(p.current))},[p]),e.jsx(pa,{"data-orientation":"horizontal",...o,ref:y,sizes:n,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xs(n)+"px",...r.style},onThumbPointerDown:f=>r.onThumbPointerDown(f.x),onDragScroll:f=>r.onDragScroll(f.x),onWheelScroll:(f,C)=>{if(c.viewport){const b=c.viewport.scrollLeft+f.deltaX;r.onWheelScroll(b),ja(b,C)&&f.preventDefault()}},onResize:()=>{p.current&&c.viewport&&m&&d({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:p.current.clientWidth,paddingStart:ms(m.paddingLeft),paddingEnd:ms(m.paddingRight)}})}})}),Er=t.forwardRef((r,l)=>{const{sizes:n,onSizesChange:d,...o}=r,c=te(de,r.__scopeScrollArea),[m,u]=t.useState(),p=t.useRef(null),y=ze(l,p,c.onScrollbarYChange);return t.useEffect(()=>{p.current&&u(getComputedStyle(p.current))},[p]),e.jsx(pa,{"data-orientation":"vertical",...o,ref:y,sizes:n,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xs(n)+"px",...r.style},onThumbPointerDown:f=>r.onThumbPointerDown(f.y),onDragScroll:f=>r.onDragScroll(f.y),onWheelScroll:(f,C)=>{if(c.viewport){const b=c.viewport.scrollTop+f.deltaY;r.onWheelScroll(b),ja(b,C)&&f.preventDefault()}},onResize:()=>{p.current&&c.viewport&&m&&d({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:p.current.clientHeight,paddingStart:ms(m.paddingTop),paddingEnd:ms(m.paddingBottom)}})}})}),[Dr,ga]=ca(de),pa=t.forwardRef((r,l)=>{const{__scopeScrollArea:n,sizes:d,hasThumb:o,onThumbChange:c,onThumbPointerUp:m,onThumbPointerDown:u,onThumbPositionChange:p,onDragScroll:y,onWheelScroll:f,onResize:C,...b}=r,k=te(de,n),[R,N]=t.useState(null),q=ze(l,z=>N(z)),U=t.useRef(null),h=t.useRef(""),P=k.viewport,D=d.content-d.viewport,J=De(f),A=De(p),ie=gs(C,10);function ne(z){if(U.current){const ee=z.clientX-U.current.left,ue=z.clientY-U.current.top;y({x:ee,y:ue})}}return t.useEffect(()=>{const z=ee=>{const ue=ee.target;R?.contains(ue)&&J(ee,D)};return document.addEventListener("wheel",z,{passive:!1}),()=>document.removeEventListener("wheel",z,{passive:!1})},[P,R,D,J]),t.useEffect(A,[d,A]),qe(R,ie),qe(k.content,ie),e.jsx(Dr,{scope:n,scrollbar:R,hasThumb:o,onThumbChange:De(c),onThumbPointerUp:De(m),onThumbPositionChange:A,onThumbPointerDown:De(u),children:e.jsx(Ge.div,{...b,ref:q,style:{position:"absolute",...b.style},onPointerDown:Oe(r.onPointerDown,z=>{z.button===0&&(z.target.setPointerCapture(z.pointerId),U.current=R.getBoundingClientRect(),h.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k.viewport&&(k.viewport.style.scrollBehavior="auto"),ne(z))}),onPointerMove:Oe(r.onPointerMove,ne),onPointerUp:Oe(r.onPointerUp,z=>{const ee=z.target;ee.hasPointerCapture(z.pointerId)&&ee.releasePointerCapture(z.pointerId),document.body.style.webkitUserSelect=h.current,k.viewport&&(k.viewport.style.scrollBehavior=""),U.current=null})})})}),ds="ScrollAreaThumb",fa=t.forwardRef((r,l)=>{const{forceMount:n,...d}=r,o=ga(ds,r.__scopeScrollArea);return e.jsx(hs,{present:n||o.hasThumb,children:e.jsx($r,{ref:l,...d})})}),$r=t.forwardRef((r,l)=>{const{__scopeScrollArea:n,style:d,...o}=r,c=te(ds,n),m=ga(ds,n),{onThumbPositionChange:u}=m,p=ze(l,C=>m.onThumbChange(C)),y=t.useRef(void 0),f=gs(()=>{y.current&&(y.current(),y.current=void 0)},100);return t.useEffect(()=>{const C=c.viewport;if(C){const b=()=>{if(f(),!y.current){const k=Vr(C,u);y.current=k,u()}};return u(),C.addEventListener("scroll",b),()=>C.removeEventListener("scroll",b)}},[c.viewport,f,u]),e.jsx(Ge.div,{"data-state":m.hasThumb?"visible":"hidden",...o,ref:p,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...d},onPointerDownCapture:Oe(r.onPointerDownCapture,C=>{const k=C.target.getBoundingClientRect(),R=C.clientX-k.left,N=C.clientY-k.top;m.onThumbPointerDown({x:R,y:N})}),onPointerUp:Oe(r.onPointerUp,m.onThumbPointerUp)})});fa.displayName=ds;var Ms="ScrollAreaCorner",ba=t.forwardRef((r,l)=>{const n=te(Ms,r.__scopeScrollArea),d=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&d?e.jsx(Fr,{...r,ref:l}):null});ba.displayName=Ms;var Fr=t.forwardRef((r,l)=>{const{__scopeScrollArea:n,...d}=r,o=te(Ms,n),[c,m]=t.useState(0),[u,p]=t.useState(0),y=!!(c&&u);return qe(o.scrollbarX,()=>{const f=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(f),p(f)}),qe(o.scrollbarY,()=>{const f=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(f),m(f)}),y?e.jsx(Ge.div,{...d,ref:l,style:{width:c,height:u,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function ms(r){return r?parseInt(r,10):0}function ya(r,l){const n=r/l;return isNaN(n)?0:n}function xs(r){const l=ya(r.viewport,r.content),n=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,d=(r.scrollbar.size-n)*l;return Math.max(d,18)}function Or(r,l,n,d="ltr"){const o=xs(n),c=o/2,m=l||c,u=o-m,p=n.scrollbar.paddingStart+m,y=n.scrollbar.size-n.scrollbar.paddingEnd-u,f=n.content-n.viewport,C=d==="ltr"?[0,f]:[f*-1,0];return va([p,y],C)(r)}function ra(r,l,n="ltr"){const d=xs(l),o=l.scrollbar.paddingStart+l.scrollbar.paddingEnd,c=l.scrollbar.size-o,m=l.content-l.viewport,u=c-d,p=n==="ltr"?[0,m]:[m*-1,0],y=Qa(r,p);return va([0,m],[0,u])(y)}function va(r,l){return n=>{if(r[0]===r[1]||l[0]===l[1])return l[0];const d=(l[1]-l[0])/(r[1]-r[0]);return l[0]+d*(n-r[0])}}function ja(r,l){return r>0&&r<l}var Vr=(r,l=()=>{})=>{let n={left:r.scrollLeft,top:r.scrollTop},d=0;return function o(){const c={left:r.scrollLeft,top:r.scrollTop},m=n.left!==c.left,u=n.top!==c.top;(m||u)&&l(),n=c,d=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(d)};function gs(r,l){const n=De(r),d=t.useRef(0);return t.useEffect(()=>()=>window.clearTimeout(d.current),[]),t.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(n,l)},[n,l])}function qe(r,l){const n=De(l);Ba(()=>{let d=0;if(r){const o=new ResizeObserver(()=>{cancelAnimationFrame(d),d=window.requestAnimationFrame(n)});return o.observe(r),()=>{window.cancelAnimationFrame(d),o.unobserve(r)}}},[r,n])}var Mr=da,Lr=ha,Tr=ba;function Fs({className:r,children:l,...n}){return e.jsxs(Mr,{"data-slot":"scroll-area",className:ta("relative",r),...n,children:[e.jsx(Lr,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:l}),e.jsx(Ur,{}),e.jsx(Tr,{})]})}function Ur({className:r,orientation:l="vertical",...n}){return e.jsx(ua,{"data-slot":"scroll-area-scrollbar",orientation:l,className:ta("flex touch-none p-px transition-colors select-none",l==="vertical"&&"h-full w-2.5 border-l border-l-transparent",l==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",r),...n,children:e.jsx(fa,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const Ue=[{id:"*",name:"All Permissions",description:"Full system access - can do everything (Admin only)",category:"System Administration",icon:"Crown"},{id:"manage_users",name:"Manage Users",description:"Create, edit, and delete user accounts and roles",category:"System Administration",icon:"Users"},{id:"view_audit_logs",name:"View Audit Logs",description:"Access system audit logs and activity history",category:"System Administration",icon:"FileText"},{id:"export_data",name:"Export Data",description:"Export system data in various formats",category:"System Administration",icon:"Download"},{id:"view_dashboard",name:"View Dashboard",description:"Access the main dashboard and overview",category:"Dashboard & Overview",icon:"Home"},{id:"view_fish_entry",name:"View Fish Entry",description:"View fish entry records and warehouse operations",category:"Fish Entry & Warehouse",icon:"Warehouse"},{id:"manage_fish_entry",name:"Manage Fish Entry",description:"Create and update fish entry records",category:"Fish Entry & Warehouse",icon:"Warehouse"},{id:"view_warehouse",name:"View Warehouse",description:"View warehouse storage and operations",category:"Fish Entry & Warehouse",icon:"Package"},{id:"manage_warehouse",name:"Manage Warehouse",description:"Update warehouse storage and operations",category:"Fish Entry & Warehouse",icon:"Package"},{id:"view_processing",name:"View Processing",description:"View fish processing operations and records",category:"Processing Operations",icon:"Scissors"},{id:"manage_processing",name:"Manage Processing",description:"Create and update fish processing operations",category:"Processing Operations",icon:"Scissors"},{id:"view_sorting",name:"View Sorting",description:"View fish sorting operations and records",category:"Processing Operations",icon:"Filter"},{id:"manage_sorting",name:"Manage Sorting",description:"Create and update fish sorting operations",category:"Processing Operations",icon:"Filter"},{id:"view_inventory",name:"View Inventory",description:"View fish inventory and stock levels",category:"Inventory Management",icon:"Package"},{id:"manage_inventory",name:"Manage Inventory",description:"Update inventory records and stock levels",category:"Inventory Management",icon:"Package"},{id:"view_outlet_orders",name:"View Outlet Orders",description:"View outlet order records and status",category:"Outlet Operations",icon:"ShoppingCart"},{id:"manage_outlet_orders",name:"Manage Outlet Orders",description:"Create and update outlet orders",category:"Outlet Operations",icon:"ShoppingCart"},{id:"view_outlet_receiving",name:"View Outlet Receiving",description:"View outlet receiving records and confirmations",category:"Outlet Operations",icon:"CheckSquare"},{id:"manage_outlet_receiving",name:"Manage Outlet Receiving",description:"Update outlet receiving records and confirmations",category:"Outlet Operations",icon:"CheckSquare"},{id:"view_dispatch",name:"View Dispatch",description:"View dispatch operations and delivery records",category:"Dispatch & Delivery",icon:"Truck"},{id:"manage_dispatch",name:"Manage Dispatch",description:"Create and update dispatch operations",category:"Dispatch & Delivery",icon:"Truck"},{id:"view_delivery",name:"View Delivery",description:"View delivery records and status",category:"Dispatch & Delivery",icon:"Truck"},{id:"manage_delivery",name:"Manage Delivery",description:"Update delivery records and status",category:"Dispatch & Delivery",icon:"Truck"},{id:"view_disposal",name:"View Disposal",description:"View disposal records and waste management",category:"Disposal Management",icon:"Trash2"},{id:"manage_disposal",name:"Manage Disposal",description:"Create and update disposal records",category:"Disposal Management",icon:"Trash2"},{id:"view_clients",name:"View Clients",description:"View client information and records",category:"Client Management",icon:"Users"},{id:"manage_clients",name:"Manage Clients",description:"Create and update client records",category:"Client Management",icon:"Users"},{id:"view_reports",name:"View Reports",description:"View system reports and analytics",category:"Reports & Analytics",icon:"BarChart3"},{id:"export_reports",name:"Export Reports",description:"Export reports to CSV and other formats",category:"Reports & Analytics",icon:"Download"}],Ps=["System Administration","Dashboard & Overview","Fish Entry & Warehouse","Processing Operations","Inventory Management","Outlet Operations","Dispatch & Delivery","Disposal Management","Client Management","Reports & Analytics"];function Ir({selectedPermissions:r,onPermissionsChange:l,className:n=""}){const[d,o]=t.useState(!1),[c,m]=t.useState(""),[u,p]=t.useState(Ps),y=t.useRef(null);t.useEffect(()=>{const h=D=>{y.current&&!y.current.contains(D.target)&&(o(!1),m(""))},P=D=>{D.key==="Escape"&&(o(!1),m(""))};return d&&(document.addEventListener("mousedown",h),document.addEventListener("keydown",P)),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",P)}},[d]);const f=Ue.filter(h=>h.name.toLowerCase().includes(c.toLowerCase())||h.description.toLowerCase().includes(c.toLowerCase())||h.category.toLowerCase().includes(c.toLowerCase())),C=Ps.reduce((h,P)=>(h[P]=f.filter(D=>D.category===P),h),{}),b=h=>{if(h==="*")l(["*"]);else{const P=r.filter(A=>A!=="*"),D=P.includes(h)?P.filter(A=>A!==h):[...P,h],J=[...new Set(D)];l(J)}},k=h=>{p(P=>P.includes(h)?P.filter(D=>D!==h):[...P,h])},R=()=>{l([])},N=()=>{l(["*"])},q=h=>{const D=Ue.filter(ne=>ne.category===h).map(ne=>ne.id),A=[...r.filter(ne=>ne!=="*"),...D],ie=[...new Set(A)];l(ie)},U=h=>{const D=Ue.filter(A=>A.category===h).map(A=>A.id),J=r.filter(A=>!D.includes(A));l(J)};return e.jsxs("div",{ref:y,className:`relative ${n}`,children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>o(!d),className:"w-full justify-between h-auto min-h-[40px] p-3",children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-sm font-medium",children:r.length===0?"Select permissions...":r.includes("*")?"All Permissions":`${r.length} permissions selected`}),d?e.jsx(Xs,{className:"h-4 w-4"}):e.jsx(Gs,{className:"h-4 w-4"})]}),r.length>0&&r.length<=3&&!r.includes("*")&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2 w-full",children:r.map(h=>{const P=Ue.find(D=>D.id===h);return e.jsx(O,{variant:"secondary",className:"text-xs",children:P?.name||h},h)})})]})}),d&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-xl max-h-96",children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(la,{className:"h-4 w-4 text-gray-400"}),e.jsx(E,{placeholder:"Search permissions...",value:c,onChange:h=>m(h.target.value),className:"flex-1"})]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:N,children:"Select All"}),e.jsx(S,{size:"sm",variant:"outline",onClick:R,children:"Clear All"})]}),r.length>0&&e.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 p-2 rounded",children:[e.jsx("strong",{children:"Currently selected:"})," ",r.includes("*")?"All Permissions":r.map(h=>Ue.find(P=>P.id===h)?.name||h).join(", ")]})]}),e.jsx(Fs,{className:"max-h-80",children:e.jsx("div",{className:"p-2",children:Ps.map(h=>{const P=C[h];if(P.length===0)return null;const D=u.includes(h),J=P.filter(A=>r.includes(A.id)).length;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>k(h),className:"flex-1 justify-between p-2 h-auto",children:[e.jsxs("span",{className:"font-medium text-sm",children:[h," (",J,"/",P.length,")"]}),D?e.jsx(Xs,{className:"h-4 w-4"}):e.jsx(Gs,{className:"h-4 w-4"})]}),D&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>q(h),className:"h-6 px-2 text-xs",title:"Select all in category",children:"All"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>U(h),className:"h-6 px-2 text-xs",title:"Clear all in category",children:"Clear"})]})]}),D&&e.jsx("div",{className:"ml-4 space-y-1",children:P.map(A=>{const ie=r.includes(A.id);return e.jsx("div",{className:`flex items-start gap-2 p-2 rounded cursor-pointer transition-colors ${ie?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,onClick:()=>b(A.id),children:e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${ie?"bg-blue-600 border-blue-600":"border-gray-300"}`,children:ie&&e.jsx(rr,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:A.name}),A.id==="*"&&e.jsx(O,{variant:"destructive",className:"text-xs",children:"Admin"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:A.description})]})]})},A.id)})})]},h)})})}),e.jsx("div",{className:"p-3 border-t bg-gray-50",children:e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{size:"sm",onClick:()=>o(!1),className:"h-7 px-3 text-xs",children:"Done"})})}),r.length>0&&e.jsx("div",{className:"p-3 border-t bg-gray-50",children:e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:r.map(h=>{const P=Ue.find(D=>D.id===h);return e.jsxs(O,{variant:"secondary",className:"text-xs",children:[P?.name||h,e.jsx(Ya,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:D=>{D.stopPropagation(),b(h)}})]},h)})})})]})]})}const As={"System Administration":{icon:us,color:"bg-red-100 text-red-800 border-red-200"},"Basic Access":{icon:na,color:"bg-blue-100 text-blue-800 border-blue-200"},"Inventory Management":{icon:os,color:"bg-green-100 text-green-800 border-green-200"},"Processing Operations":{icon:Ds,color:"bg-purple-100 text-purple-800 border-purple-200"},"Quality Control":{icon:cs,color:"bg-yellow-100 text-yellow-800 border-yellow-200"},"Farming Operations":{icon:Fe,color:"bg-orange-100 text-orange-800 border-orange-200"},"Sales & Customer Management":{icon:Es,color:"bg-pink-100 text-pink-800 border-pink-200"},"Logistics & Dispatch":{icon:Rs,color:"bg-indigo-100 text-indigo-800 border-indigo-200"},"Orders Management":{icon:$s,color:"bg-teal-100 text-teal-800 border-teal-200"},"Warehouse Operations":{icon:$e,color:"bg-gray-100 text-gray-800 border-gray-200"},"Reports & Analytics":{icon:ia,color:"bg-cyan-100 text-cyan-800 border-cyan-200"}},qr={"*":us,admin_access:Z,manage_users:Ie,manage_roles:yr,view_audit_logs:nr,system_settings:oa,export_data:Zs,basic_access:na,read_all_data:ls,view_inventory:os,manage_inventory:os,delete_inventory:ae,view_processing:Ds,manage_processing:Ds,delete_processing:ae,view_quality:cs,manage_quality:cs,delete_quality:ae,view_farming:Fe,manage_farming:Fe,delete_farming:ae,view_harvests:aa,manage_harvests:aa,delete_harvests:ae,view_sales:Es,manage_sales:Es,delete_sales:ae,view_customers:Ie,manage_customers:_r,delete_customers:wr,view_logistics:Rs,manage_logistics:Rs,delete_logistics:ae,view_dispatch:sa,manage_dispatch:sa,delete_dispatch:ae,view_orders:$s,manage_orders:$s,delete_orders:ae,view_warehouse:$e,manage_warehouse:$e,delete_warehouse:ae,view_reports:ia,create_reports:mr,export_reports:Zs},ks=[{id:"*",name:"All Permissions",description:"Full system access - can do everything (Admin only)",category:"System Administration"},{id:"admin_access",name:"Admin Access",description:"Full administrative access to all system functions",category:"System Administration"},{id:"manage_users",name:"Manage Users",description:"Create, edit, and delete user accounts",category:"System Administration"},{id:"manage_roles",name:"Manage Roles",description:"Create, edit, and delete user roles and permissions",category:"System Administration"},{id:"view_audit_logs",name:"View Audit Logs",description:"Access system audit logs and activity history",category:"System Administration"},{id:"system_settings",name:"System Settings",description:"Configure system-wide settings and preferences",category:"System Administration"},{id:"export_data",name:"Export Data",description:"Export system data in various formats",category:"System Administration"},{id:"basic_access",name:"Basic Access",description:"Basic system access and navigation",category:"Basic Access"},{id:"read_all_data",name:"Read All Data",description:"View all system data without modification rights",category:"Basic Access"},{id:"view_inventory",name:"View Inventory",description:"View fish inventory and stock levels",category:"Inventory Management"},{id:"manage_inventory",name:"Manage Inventory",description:"Add, update, and modify inventory records",category:"Inventory Management"},{id:"delete_inventory",name:"Delete Inventory",description:"Remove inventory records and items",category:"Inventory Management"},{id:"view_processing",name:"View Processing",description:"View fish processing operations and records",category:"Processing Operations"},{id:"manage_processing",name:"Manage Processing",description:"Create and update processing operations",category:"Processing Operations"},{id:"delete_processing",name:"Delete Processing",description:"Remove processing records and operations",category:"Processing Operations"},{id:"view_quality",name:"View Quality",description:"View quality control records and assessments",category:"Quality Control"},{id:"manage_quality",name:"Manage Quality",description:"Create and update quality control assessments",category:"Quality Control"},{id:"delete_quality",name:"Delete Quality",description:"Remove quality control records",category:"Quality Control"},{id:"view_farming",name:"View Farming",description:"View farming operations and records",category:"Farming Operations"},{id:"manage_farming",name:"Manage Farming",description:"Create and update farming operations",category:"Farming Operations"},{id:"delete_farming",name:"Delete Farming",description:"Remove farming operation records",category:"Farming Operations"},{id:"view_harvests",name:"View Harvests",description:"View harvest records and data",category:"Farming Operations"},{id:"manage_harvests",name:"Manage Harvests",description:"Create and update harvest records",category:"Farming Operations"},{id:"delete_harvests",name:"Delete Harvests",description:"Remove harvest records",category:"Farming Operations"},{id:"view_sales",name:"View Sales",description:"View sales records and transactions",category:"Sales & Customer Management"},{id:"manage_sales",name:"Manage Sales",description:"Create and update sales transactions",category:"Sales & Customer Management"},{id:"delete_sales",name:"Delete Sales",description:"Remove sales records and transactions",category:"Sales & Customer Management"},{id:"view_customers",name:"View Customers",description:"View customer information and records",category:"Sales & Customer Management"},{id:"manage_customers",name:"Manage Customers",description:"Create and update customer information",category:"Sales & Customer Management"},{id:"delete_customers",name:"Delete Customers",description:"Remove customer records",category:"Sales & Customer Management"},{id:"view_logistics",name:"View Logistics",description:"View logistics and transportation records",category:"Logistics & Dispatch"},{id:"manage_logistics",name:"Manage Logistics",description:"Create and update logistics operations",category:"Logistics & Dispatch"},{id:"delete_logistics",name:"Delete Logistics",description:"Remove logistics records",category:"Logistics & Dispatch"},{id:"view_dispatch",name:"View Dispatch",description:"View dispatch records and deliveries",category:"Logistics & Dispatch"},{id:"manage_dispatch",name:"Manage Dispatch",description:"Create and update dispatch operations",category:"Logistics & Dispatch"},{id:"delete_dispatch",name:"Delete Dispatch",description:"Remove dispatch records",category:"Logistics & Dispatch"},{id:"view_orders",name:"View Orders",description:"View outlet orders and requests",category:"Orders Management"},{id:"manage_orders",name:"Manage Orders",description:"Create, update, and process orders",category:"Orders Management"},{id:"delete_orders",name:"Delete Orders",description:"Remove order records",category:"Orders Management"},{id:"view_warehouse",name:"View Warehouse",description:"View warehouse operations and storage",category:"Warehouse Operations"},{id:"manage_warehouse",name:"Manage Warehouse",description:"Create and update warehouse operations",category:"Warehouse Operations"},{id:"delete_warehouse",name:"Delete Warehouse",description:"Remove warehouse operation records",category:"Warehouse Operations"},{id:"view_reports",name:"View Reports",description:"View system reports and analytics",category:"Reports & Analytics"},{id:"create_reports",name:"Create Reports",description:"Generate custom reports and analytics",category:"Reports & Analytics"},{id:"export_reports",name:"Export Reports",description:"Export reports to CSV and other formats",category:"Reports & Analytics"}];function zr({className:r="",showAsModal:l=!1,onClose:n}){const{userProfile:d,userRole:o,permissions:c,loading:m}=Xa(),[u,p]=t.useState(!1),f=m?[]:!c||c.length===0?[]:c.includes("*")?ks:c.map(R=>ks.find(N=>N.id===R)).filter(Boolean),C=f.reduce((R,N)=>(R[N.category]||(R[N.category]=[]),R[N.category].push(N),R),{}),b=c.includes("*"),k=()=>e.jsxs("div",{className:r,children:[m&&e.jsx(Q,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(Z,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-gray-900",children:"Loading permissions..."}),e.jsx("p",{className:"text-xs text-gray-600",children:"Please wait while we fetch your permissions"})]})]})})}),!m&&(!d||!c)&&e.jsx(Q,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Z,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-gray-900",children:"Unable to load permissions"}),e.jsx("p",{className:"text-xs text-gray-600",children:"There was an issue loading your permissions. Please try refreshing the page."})]})]})})}),!m&&d&&c&&e.jsxs(Q,{children:[e.jsx(oe,{className:"pb-3",children:e.jsxs(ce,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Z,{className:"h-5 w-5 text-blue-600"}),"Your Permissions"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(tr,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-sm text-blue-900",children:[d?.first_name," ",d?.last_name]}),e.jsx("p",{className:"text-xs text-blue-600",children:d?.email})]}),e.jsx(O,{className:"bg-blue-100 text-blue-800 border-blue-200",children:o?.name?.replace("_"," ").toUpperCase()||o?.display_name?.toUpperCase()||"USER"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Permissions:"}),e.jsx(O,{variant:"outline",className:"bg-white",children:b?"All Permissions":`${f.length} permissions`})]}),b&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsx("span",{children:"You have full administrative access to the system"})]})]}),!b&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Permission Categories"}),e.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>p(!u),className:"h-6 px-2 text-xs",children:[u?"Collapse":"Expand"," All",e.jsx(ir,{className:`h-3 w-3 ml-1 transition-transform ${u?"rotate-90":""}`})]})]}),e.jsx(Fs,{className:"max-h-96",children:e.jsx("div",{className:"space-y-2",children:Object.entries(C).map(([R,N])=>{const q=As[R]?.icon||Z;return As[R]?.color,e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 border-b",children:[e.jsx(q,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium text-sm text-gray-700",children:R}),e.jsxs(O,{variant:"outline",className:"ml-auto text-xs",children:[N.length," permissions"]})]}),e.jsx("div",{className:"p-3 space-y-2",children:N.map(U=>{const h=qr[U.id]||gr;return e.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white rounded border",children:[e.jsx(h,{className:"h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:U.name}),e.jsx("p",{className:"text-xs text-gray-500",children:U.description})]})]},U.id)})})]},R)})})})]}),b&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Available System Permissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(As).map(([R,N])=>{const q=N.icon,U=ks.filter(h=>h.category===R);return e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(q,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium text-sm text-gray-700",children:R}),e.jsx(O,{variant:"outline",className:"ml-auto text-xs",children:U.length})]}),e.jsxs("div",{className:"space-y-1",children:[U.slice(0,3).map(h=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:h.name})]},h.id)),U.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 ml-3.5",children:["+",U.length-3," more permissions"]})]})]},R)})})]})]})]})]});return l?e.jsx(Pe,{open:!0,onOpenChange:n,children:e.jsxs(Ae,{className:"max-w-4xl max-h-[80vh]",children:[e.jsxs(ke,{children:[e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-blue-600"}),"Your Role & Permissions"]}),e.jsx(Ee,{children:"View your assigned role and the permissions you have in the Fish Management System"})]}),e.jsx(Fs,{className:"max-h-[60vh]",children:e.jsx(k,{})})]})}):e.jsx(k,{})}function jt({onNavigate:r}){const[l,n]=t.useState([]),[d,o]=t.useState([]),[c,m]=t.useState([]),[u,p]=t.useState([]),[y,f]=t.useState([]),[C,b]=t.useState([]),[k,R]=t.useState([]),[N,q]=t.useState({provider:"sendgrid",from_email:"noreply@riofish.com",from_name:"RioFish System",api_key:""}),[U,h]=t.useState(!0),[P,D]=t.useState("users"),[J,A]=t.useState(!1),[ie,ne]=t.useState(!1),[z,ee]=t.useState(!1),[ue,Ve]=t.useState(!1),[wa,ps]=t.useState(!1),[Na,We]=t.useState(!1),[Wr,Hr]=t.useState(!1),[_a,Ze]=t.useState(!1),[Sa,He]=t.useState(!1),[V,fs]=t.useState(null),[Y,Ls]=t.useState(null),[se,Ts]=t.useState(null),[Be,Us]=t.useState(null),[Je,Ca]=t.useState(""),[bs,Pa]=t.useState("all"),[Br,Yr]=t.useState("all"),[W,B]=t.useState(null),[I,xe]=t.useState({}),[Me,me]=t.useState({isValid:!0,message:""}),[Le,ge]=t.useState({isValid:!0,message:""}),[Te,he]=t.useState({isValid:!0,message:""}),[x,le]=t.useState({email:"",first_name:"",last_name:"",role:"",phone:"",is_active:!0,password:"",confirm_password:""}),[v,be]=t.useState({name:"",display_name:"",description:"",permissions:[],icon:"Shield",color:"bg-gray-100 text-gray-800 border-gray-200",is_active:!0}),Aa=async s=>{if(!s||s.length<3){me({isValid:!0,message:""});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){me({isValid:!1,message:"Please enter a valid email address"});return}try{let g=F.from("profiles").select("id").eq("email",s.toLowerCase().trim());V?.id&&(g=g.neq("id",V.id));const{data:i,error:j}=await g;if(j&&j.code!=="PGRST116"){me({isValid:!0,message:""});return}i&&i.length>0?me({isValid:!1,message:"This email is already in use"}):me({isValid:!0,message:"Email is available"})}catch{me({isValid:!0,message:""})}},ka=async s=>{if(!s||s.length<6){ge({isValid:!1,message:"Password must be at least 6 characters long"});return}try{const{data:a,error:g}=await F.from("profiles").select("password_hash").not("password_hash","is",null);if(g){ge({isValid:!0,message:""});return}if(a&&a.length>0){const i=await ws(()=>import("./main-8N3o9mMm.js").then(j=>j.an),__vite__mapDeps([0,1]));for(const j of a)if(j.password_hash&&await i.compare(s,j.password_hash)){ge({isValid:!1,message:"This password is already in use"});return}}ge({isValid:!0,message:"Password is available"})}catch{ge({isValid:!0,message:""})}},Ra=async s=>{if(!s||s.trim()===""){he({isValid:!0,message:""});return}if(!/^[\+]?[1-9][\d]{0,15}$/.test(s.replace(/[\s\-\(\)]/g,""))){he({isValid:!1,message:"Please enter a valid phone number"});return}try{let g=F.from("profiles").select("id").eq("phone",s.trim());V?.id&&(g=g.neq("id",V.id));const{data:i,error:j}=await g;if(j&&j.code!=="PGRST116"){he({isValid:!0,message:""});return}i&&i.length>0?he({isValid:!1,message:"This phone number is already in use"}):he({isValid:!0,message:"Phone number is available"})}catch{he({isValid:!0,message:""})}},[H,ye]=t.useState({name:"",phone:"",location:"",rating:0,reliability:"fair",status:"active"}),[X,pe]=t.useState({name:"",description:"",capacity_kg:1e3,temperature_celsius:4,humidity_percent:85,location_type:"cold_storage",status:"active"}),[G,ve]=t.useState({name:"",location:"",phone:"",manager_name:"",status:"active"}),Is=async()=>{try{const{data:s,error:a}=await F.from("user_roles").select("*").order("name");if(a)throw a;o(s||[])}catch(s){console.warn("Could not fetch roles:",s),o([])}},Qe=async()=>{try{const{data:s,error:a}=await F.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(100);if(a)console.warn("Could not fetch audit logs:",a),m([]);else{const g=await Promise.all((s||[]).map(async i=>{if(i.user_id)try{const{data:j}=await F.from("profiles").select("first_name, last_name, email").eq("id",i.user_id).single();return{...i,user:j}}catch(j){return console.warn("Could not fetch user for audit log:",j),i}return i}));m(g)}}catch(s){console.warn("Could not fetch audit logs:",s),m([])}},Ea=s=>{const a=s.user?`${s.user.first_name} ${s.user.last_name}`:"Unknown User",g=s.action.toLowerCase(),i=s.table_name.toLowerCase().replace("_"," ");let j=null,$=null;try{j=s.old_values?JSON.parse(s.old_values):null,$=s.new_values?JSON.parse(s.new_values):null}catch{}switch(g){case"insert":switch(i){case"profiles":return`${a} created a new user account${$?.email?` (${$.email})`:""}`;case"farmers":return`${a} added a new farmer${$?.name?` (${$.name})`:""}`;case"warehouse entries":const es=$?.fish_type||"fish",ss=$?.total_weight?`${$.total_weight}kg`:"",js=$?.entry_code?` (${$.entry_code})`:"";return`${a} recorded a new ${es} entry${ss?` (${ss})`:""}${js}`;case"outlet receiving inventory":const za=$?.fish_type||"fish",Hs=$?.weight_received?`${$.weight_received}kg`:"",Wa=$?.entry_code?` (${$.entry_code})`:"";return`${a} received ${za} at outlet${Hs?` (${Hs})`:""}${Wa}`;case"outlet orders":return`${a} created a new order`;default:return`${a} created a new ${i} record`}case"update":switch(i){case"profiles":const es=j?.email!==$?.email?` (${j?.email} → ${$?.email})`:"",ss=j?.role!==$?.role?` (${j?.role} → ${$?.role})`:"";return`${a} updated user information${es||ss||""}`;case"farmers":const js=j?.name!==$?.name?` (${j?.name} → ${$?.name})`:"";return`${a} updated farmer details${js||""}`;case"outlet orders":return $?.status==="confirmed"?`${a} confirmed order ${s.record_id?.substring(0,8)||""}`:$?.status==="cancelled"?`${a} cancelled order ${s.record_id?.substring(0,8)||""}`:`${a} updated order details`;default:return`${a} updated ${i} information`}case"delete":switch(i){case"profiles":return`${a} deleted user account${j?.email?` (${j.email})`:""}`;case"farmers":return`${a} removed farmer${j?.name?` (${j.name})`:""}`;default:return`${a} deleted ${i} record`}case"login":return`${a} logged into the system`;case"logout":return`${a} logged out of the system`;default:return`${a} performed ${g} on ${i}`}},qs=s=>{const a=[];s.ip_address&&a.push(`IP: ${s.ip_address}`),s.record_id&&a.push(`ID: ${s.record_id.substring(0,8)}...`);try{const g=s.old_values?JSON.parse(s.old_values):null,i=s.new_values?JSON.parse(s.new_values):null;s.table_name==="warehouse_entries"&&i&&(i.entry_code&&a.push(`Entry Code: ${i.entry_code}`),i.fish_type&&a.push(`Type: ${i.fish_type}`),i.condition&&a.push(`Grade: ${i.condition}`),i.total_weight&&a.push(`Weight: ${i.total_weight}kg`),i.total_pieces&&a.push(`Pieces: ${i.total_pieces}`),i.price_per_kg&&a.push(`Price: $${i.price_per_kg}/kg`),i.farmer_id&&a.push(`Farmer ID: ${i.farmer_id}`)),s.table_name==="outlet_receiving"&&i&&(i.actual_weight_received&&a.push(`Weight Received: ${i.actual_weight_received}kg`),i.condition&&a.push(`Condition: ${i.condition}`),i.outlet_name&&a.push(`Outlet: ${i.outlet_name}`),i.received_date&&a.push(`Date: ${i.received_date}`)),s.table_name==="outlet_orders"&&i&&(i.order_number&&a.push(`Order #: ${i.order_number}`),i.status&&a.push(`Status: ${i.status}`),i.delivery_date&&a.push(`Delivery: ${i.delivery_date}`)),s.table_name==="profiles"&&i&&(i.role&&a.push(`Role: ${i.role}`),i.is_active!==void 0&&a.push(`Active: ${i.is_active?"Yes":"No"}`),i.phone&&a.push(`Phone: ${i.phone}`)),s.table_name==="farmers"&&i&&(i.location&&a.push(`Location: ${i.location}`),i.phone&&a.push(`Phone: ${i.phone}`),i.rating&&a.push(`Rating: ${i.rating}/5`),i.reliability&&a.push(`Reliability: ${i.reliability}`))}catch{}return a},Ye=async(s,a,g,i,j)=>{try{await sr.custom(s,a,g,{old_values:i,new_values:j})}catch($){console.warn("Failed to log audit event:",$)}},Da=async()=>{q({provider:"sendgrid",from_email:"noreply@riofish.com",from_name:"Rio Fish Management",api_key:""})},Ke=async()=>{try{console.log("Fetching storage locations...");const{data:s,error:a}=await F.from("storage_locations").select("*").order("name");if(a)throw console.error("Error fetching storage locations:",a),a;console.log("Storage locations fetched successfully:",s),b(s||[])}catch(s){console.error("Could not fetch storage locations:",s),b([])}},zs=async()=>{try{h(!0);const{data:s,error:a}=await F.from("profiles").select("*").order("created_at",{ascending:!1});if(a)throw a;n(s||[])}catch(s){console.warn("Could not fetch users:",s),n([])}finally{h(!1)}},ys=async()=>{try{const{data:s,error:a}=await F.from("farmers").select("*").order("name");if(a)throw a;f(s||[])}catch(s){console.warn("Could not fetch farmers:",s),f([])}},vs=async()=>{try{console.log("Fetching outlets...");const{data:s,error:a}=await F.from("outlets").select("*").order("name");if(a)throw console.error("Error fetching outlets:",a),a.message.includes('relation "outlets" does not exist')&&(console.warn("Outlets table does not exist. Please run the database setup script."),_.error("Outlets table not found. Please contact administrator.")),a;console.log("Outlets fetched successfully:",s?.length||0,"records"),R(s||[])}catch(s){console.warn("Could not fetch outlets:",s),R([])}};t.useEffect(()=>{Is(),zs(),ys(),vs(),Qe(),Da(),Ke()},[]);const $a=()=>{const s={};return v.name.trim()?v.name.trim().length<2?s.name="Role name must be at least 2 characters":v.name.trim().length>50?s.name="Role name must be less than 50 characters":/^[a-zA-Z0-9_\s-]+$/.test(v.name.trim())||(s.name="Role name can only contain letters, numbers, spaces, hyphens, and underscores"):s.name="Role name is required",v.display_name.trim()?v.display_name.trim().length<2?s.display_name="Display name must be at least 2 characters":v.display_name.trim().length>100&&(s.display_name="Display name must be less than 100 characters"):s.display_name="Display name is required",v.description.trim().length>500&&(s.description="Description must be less than 500 characters"),!Array.isArray(v.permissions)||v.permissions.length===0?s.permissions="At least one permission must be selected":v.permissions.length>50&&(s.permissions="Too many permissions selected (maximum 50)"),xe(s),Object.keys(s).length===0},Fa=async()=>{try{if(B("saving-role"),!$a())return;const s=v.name.toLowerCase().trim().replace(/\s+/g,"_");if(Y){if(s!==Y.name){const{data:i,error:j}=await F.from("user_roles").select("id").eq("name",s).neq("id",Y.id).single();if(j&&j.code!=="PGRST116")throw j;if(i){_.error("Role name already exists",{description:"Please choose a different name for the role"});return}}const a=[...new Set(v.permissions)],{error:g}=await F.from("user_roles").update({...v,name:s,permissions:a}).eq("id",Y.id);if(g)throw g;_.success("Role updated successfully")}else{const{data:a,error:g}=await F.from("user_roles").select("id").eq("name",s).single();if(g&&g.code!=="PGRST116")throw g;if(a){_.error("Role name already exists",{description:"Please choose a different name for the role"});return}const i=[...new Set(v.permissions)],{error:j}=await F.from("user_roles").insert([{...v,name:s,permissions:i}]);if(j){if(j.code==="23505"){_.error("Role name already exists",{description:"Please choose a different name for the role"});return}throw j}_.success("Role created successfully")}Ve(!1),Ls(null),be({name:"",display_name:"",description:"",permissions:[],icon:"Shield",color:"bg-gray-100 text-gray-800 border-gray-200",is_active:!0}),xe({}),Is()}catch(s){_.error(`Role operation failed: ${s.message}`)}finally{B(null)}},Oa=async()=>{try{if(B("saving-user"),!x.email||!x.first_name||!x.last_name){_.error("Please fill in all required fields");return}if(!Me.isValid){_.error("Please fix email validation errors");return}if(!Te.isValid){_.error("Please fix phone number validation errors");return}if(!V){if(!x.password||x.password.length<6){_.error("Password must be at least 6 characters long");return}if(!Le.isValid){_.error("Please fix password validation errors");return}if(x.password!==x.confirm_password){_.error("Passwords do not match");return}}if(!V?.id){const{data:s,error:a}=await F.from("profiles").select("id, email").eq("email",x.email.toLowerCase().trim());if(a&&a.code!=="PGRST116")throw a;if(s&&s.length>0){_.error("Email already exists",{description:"Please choose a different email address"});return}}if(!V?.id&&x.phone&&x.phone.trim()!==""){const{data:s,error:a}=await F.from("profiles").select("id, phone").eq("phone",x.phone.trim());if(a&&a.code!=="PGRST116")throw a;if(s&&s.length>0){_.error("Phone number already exists",{description:"Please choose a different phone number"});return}}if(!V){const{data:s,error:a}=await F.from("profiles").select("id, password_hash").not("password_hash","is",null);if(a)throw a;if(s&&s.length>0){const g=await ws(()=>import("./main-8N3o9mMm.js").then(i=>i.an),__vite__mapDeps([0,1]));for(const i of s)if(i.password_hash&&await g.compare(x.password,i.password_hash)){_.error("Password already in use",{description:"Please choose a different password for security reasons"});return}}}if(V){const s={email:V.email,first_name:V.first_name,last_name:V.last_name,role:V.role,phone:V.phone,is_active:V.is_active},a={email:x.email,first_name:x.first_name,last_name:x.last_name,role:x.role,phone:x.phone,is_active:x.is_active},{error:g}=await F.from("profiles").update(a).eq("id",V.id);if(g)throw g;await Ye("UPDATE","profiles",V.id,s,a),_.success("User updated successfully")}else{const a=await(await ws(()=>import("./main-8N3o9mMm.js").then($=>$.an),__vite__mapDeps([0,1]))).hash(x.password,10),g={email:x.email.toLowerCase().trim(),password_hash:a,first_name:x.first_name.trim(),last_name:x.last_name.trim(),role:x.role,phone:x.phone?.trim()||null,is_active:x.is_active},{data:i,error:j}=await F.from("profiles").insert([g]).select().single();if(j){if(j.code==="23505"){_.error("Email already exists",{description:"Please choose a different email address"});return}throw j}await Ye("INSERT","profiles",i.id,null,g),_.success("User created successfully")}A(!1),fs(null),le({email:"",first_name:"",last_name:"",role:"",phone:"",is_active:!0,password:"",confirm_password:""}),me({isValid:!0,message:""}),ge({isValid:!0,message:""}),he({isValid:!0,message:""}),zs(),Qe()}catch(s){_.error(`User operation failed: ${s.message}`)}finally{B(null)}},Va=async()=>{try{if(B("saving-farmer"),!H.name||!H.phone||!H.location){_.error("Please fill in all required fields");return}if(se){const s={name:se.name,phone:se.phone,location:se.location,rating:se.rating,reliability:se.reliability,status:se.status},{error:a}=await F.from("farmers").update(H).eq("id",se.id);if(a)throw a;await Ye("UPDATE","farmers",se.id,s,H),_.success("Farmer updated successfully")}else{const{data:s,error:a}=await F.from("farmers").insert([H]).select().single();if(a)throw a;await Ye("INSERT","farmers",s.id,null,H),_.success("Farmer created successfully")}We(!1),Ts(null),ye({name:"",phone:"",location:"",rating:0,reliability:"fair",status:"active"}),ys(),Qe()}catch(s){_.error(`Farmer operation failed: ${s.message}`)}finally{B(null)}},Ma=async s=>{if(confirm("Are you sure you want to delete this farmer?"))try{B("deleting-farmer");const a=y.find(i=>i.id===s),{error:g}=await F.from("farmers").delete().eq("id",s);if(g)throw g;a&&await Ye("DELETE","farmers",s,a,null),_.success("Farmer deleted successfully"),ys(),Qe()}catch(a){_.error(`Failed to delete farmer: ${a.message}`)}finally{B(null)}},La=async()=>{try{B("saving-storage");const{error:s}=await F.from("storage_locations").insert([X]);if(s)throw s;_.success("Storage location created successfully"),Ze(!1),pe({name:"",description:"",capacity_kg:1e3,temperature_celsius:4,humidity_percent:85,location_type:"cold_storage",status:"active"}),Ke()}catch(s){_.error(`Storage location creation failed: ${s.message}`)}finally{B(null)}},Ta=async(s,a)=>{try{B(`toggle-storage-${s}`);const g=a==="active"?"inactive":"active",{error:i}=await F.from("storage_locations").update({status:g,updated_at:new Date().toISOString()}).eq("id",s);if(i)throw i;_.success(`Storage location marked as ${g}`),Ke()}catch(g){_.error(`Failed to update storage status: ${g.message}`)}finally{B(null)}},Ua=async()=>{try{B("saving-outlet");const s={name:G.name,location:G.location,phone:G.phone,manager_name:G.manager_name||null,status:G.status};if(console.log("Submitting outlet data:",s),Be){const{error:a}=await F.from("outlets").update(s).eq("id",Be.id);if(a)throw console.error("Update outlet error:",a),a;_.success("Outlet updated successfully")}else{const{error:a}=await F.from("outlets").insert([s]);if(a)throw console.error("Create outlet error:",a),a;_.success("Outlet created successfully")}He(!1),Us(null),ve({name:"",location:"",phone:"",manager_name:"",status:"active"}),vs()}catch(s){_.error(`Outlet operation failed: ${s.message}`)}finally{B(null)}},Ia=async s=>{if(confirm("Are you sure you want to delete this outlet?"))try{B("deleting-outlet");const{error:a}=await F.from("outlets").delete().eq("id",s);if(a)throw a;_.success("Outlet deleted successfully"),vs()}catch(a){_.error(`Failed to delete outlet: ${a.message}`)}finally{B(null)}},Ws=l.filter(s=>{const a=s.first_name.toLowerCase().includes(Je.toLowerCase())||s.last_name.toLowerCase().includes(Je.toLowerCase())||s.email.toLowerCase().includes(Je.toLowerCase()),g=bs==="all"||s.role===bs;return a&&g}),qa=s=>({Shield:Z,Crown:us,Package:os,Building:Ja,Eye:ls,Tractor:Fe,Warehouse:$e})[s]||Z;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 content-container",children:e.jsxs("div",{className:"space-y-8 responsive-padding max-w-7xl mx-auto",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 p-8 text-white shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Ie,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"User Management"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Comprehensive user, role, and system administration"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"System Active"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[l.length," Users"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[y.length," Farmers"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(S,{onClick:()=>ps(!0),variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/30 backdrop-blur-sm transition-all duration-200",children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Email Config"]})})]})}),e.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 h-32 bg-white/5 rounded-full blur-2xl"})]}),e.jsxs(Ka,{value:P,onValueChange:D,className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs(er,{className:"flex w-full bg-gradient-to-r from-gray-50 to-gray-100 p-1 h-auto overflow-x-auto",children:[e.jsxs(Se,{value:"users",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-blue-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 data-[state=active]:bg-blue-600 transition-colors duration-200",children:e.jsx(Ie,{className:"h-5 w-5 data-[state=active]:text-white text-blue-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Users"}),e.jsx("span",{className:"text-xs text-gray-500",children:l.length})]})]}),e.jsxs(Se,{value:"farmers",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-green-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 data-[state=active]:bg-green-600 transition-colors duration-200",children:e.jsx(Fe,{className:"h-5 w-5 data-[state=active]:text-white text-green-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Farmers"}),e.jsx("span",{className:"text-xs text-gray-500",children:y.length})]})]}),e.jsxs(Se,{value:"storage",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-purple-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 data-[state=active]:bg-purple-600 transition-colors duration-200",children:e.jsx($e,{className:"h-5 w-5 data-[state=active]:text-white text-purple-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Storage"}),e.jsx("span",{className:"text-xs text-gray-500",children:C.length})]})]}),e.jsxs(Se,{value:"roles",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-orange-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100 data-[state=active]:bg-orange-600 transition-colors duration-200",children:e.jsx(Z,{className:"h-5 w-5 data-[state=active]:text-white text-orange-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Roles"}),e.jsx("span",{className:"text-xs text-gray-500",children:d.length})]})]}),e.jsxs(Se,{value:"frontend",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-indigo-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 data-[state=active]:bg-indigo-600 transition-colors duration-200",children:e.jsx(ls,{className:"h-5 w-5 data-[state=active]:text-white text-indigo-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Public View"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Config"})]})]}),e.jsxs(Se,{value:"audit",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-red-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100 data-[state=active]:bg-red-600 transition-colors duration-200",children:e.jsx(_s,{className:"h-5 w-5 data-[state=active]:text-white text-red-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Audit Logs"}),e.jsx("span",{className:"text-xs text-gray-500",children:c.length})]})]}),e.jsxs(Se,{value:"outlets",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-purple-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 data-[state=active]:bg-purple-600 transition-colors duration-200",children:e.jsx(Ss,{className:"h-5 w-5 data-[state=active]:text-white text-purple-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Outlets"}),e.jsx("span",{className:"text-xs text-gray-500",children:k.length})]})]})]})}),e.jsx(Ce,{value:"users",className:"space-y-6",children:e.jsxs(Q,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(oe,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(Ie,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs(ce,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["User Management",e.jsxs(O,{variant:"secondary",className:"bg-blue-100 text-blue-700 border-blue-200",children:[Ws.length," Active"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and their permissions"})]})]}),e.jsxs(S,{onClick:()=>{fs(null),le({email:"",first_name:"",last_name:"",role:"",phone:"",is_active:!0,password:"",confirm_password:""}),me({isValid:!0,message:""}),ge({isValid:!0,message:""}),he({isValid:!0,message:""}),A(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),e.jsxs(K,{className:"p-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(E,{placeholder:"Search users by name or email...",value:Je,onChange:s=>Ca(s.target.value),className:"pl-10 bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20"})]})}),e.jsxs(je,{value:bs,onValueChange:Pa,children:[e.jsxs(we,{className:"w-full sm:w-[200px] bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20",children:[e.jsx(Ga,{className:"mr-2 h-4 w-4"}),e.jsx(Ne,{placeholder:"Filter by role"})]}),e.jsxs(_e,{children:[e.jsx(T,{value:"all",children:"All Roles"}),d.filter(s=>s.name&&s.name.trim()!=="").map(s=>e.jsx(T,{value:s.name,children:s.display_name||s.name},s.id))]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"mobile-table-container",children:e.jsxs(rs,{className:"mobile-table",children:[e.jsx(ts,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs(fe,{className:"border-b border-gray-200",children:[e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"User"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Contact"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Role"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Status"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Last Login"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4 text-center",children:"Actions"})]})}),e.jsx(is,{children:Ws.map((s,a)=>e.jsxs(fe,{className:`hover:bg-blue-50/50 transition-colors duration-200 border-b border-gray-100 ${a%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:[s.first_name.charAt(0),s.last_name.charAt(0)]}),e.jsx("div",{children:e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.first_name," ",s.last_name]})})]})}),e.jsxs(L,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Cs,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.phone})]})]}),e.jsx(L,{className:"py-4",children:e.jsx(O,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 font-medium",children:s.role.replace("_"," ")})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.is_active?"bg-green-500":"bg-gray-400"}`}),e.jsx(O,{variant:s.is_active?"default":"secondary",className:s.is_active?"bg-green-100 text-green-700 border-green-200":"",children:s.is_active?"Active":"Inactive"})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.last_login?new Date(s.last_login).toLocaleDateString():"Never"})]})}),e.jsx(L,{className:"py-4",children:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx(S,{size:"sm",variant:"outline",className:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200",onClick:()=>{fs(s),le({email:s.email,first_name:s.first_name,last_name:s.last_name,role:s.role,phone:s.phone||"",is_active:s.is_active,password:"",confirm_password:""}),me({isValid:!0,message:""}),ge({isValid:!0,message:""}),he({isValid:!0,message:""}),A(!0)},children:e.jsx(ns,{className:"h-4 w-4"})})})})]},s.id))})]})})})]})]})}),e.jsx(Ce,{value:"farmers",className:"space-y-6",children:e.jsxs(Q,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(oe,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(Fe,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs(ce,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Farmer Management",e.jsxs(O,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:[y.length," Registered"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage farmer profiles and relationships"})]})]}),e.jsxs(S,{onClick:()=>We(!0),className:"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Farmer"]})]})}),e.jsx(K,{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"mobile-table-container",children:e.jsxs(rs,{className:"mobile-table",children:[e.jsx(ts,{className:"bg-gradient-to-r from-green-50 to-emerald-50",children:e.jsxs(fe,{className:"border-b border-green-100",children:[e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Farmer"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Contact"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Location"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Rating"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Reliability"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Status"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4 text-center",children:"Actions"})]})}),e.jsx(is,{children:y.map((s,a)=>e.jsxs(fe,{className:`hover:bg-green-50/50 transition-colors duration-200 border-b border-gray-100 ${a%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:s.name.charAt(0)}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-gray-900",children:s.name})})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.phone})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.location})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((g,i)=>e.jsx("div",{className:`w-4 h-4 ${i<s.rating?"text-yellow-400":"text-gray-300"}`,children:"★"},i))}),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",s.rating,"/5)"]})]})}),e.jsx(L,{className:"py-4",children:e.jsx(O,{variant:"outline",className:`font-medium ${s.reliability==="excellent"?"bg-green-100 text-green-700 border-green-200":s.reliability==="good"?"bg-blue-100 text-blue-700 border-blue-200":s.reliability==="fair"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200"}`,children:s.reliability})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.status==="active"?"bg-green-500":"bg-gray-400"}`}),e.jsx(O,{variant:s.status==="active"?"default":"secondary",className:s.status==="active"?"bg-green-100 text-green-700 border-green-200":"",children:s.status})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(S,{size:"sm",variant:"outline",className:"hover:bg-green-50 hover:border-green-300 hover:text-green-700 transition-all duration-200",onClick:()=>{Ts(s),ye({name:s.name,phone:s.phone,location:s.location,rating:s.rating,reliability:s.reliability,status:s.status}),We(!0)},children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx(S,{size:"sm",variant:"outline",className:"hover:bg-red-50 hover:border-red-300 hover:text-red-700 transition-all duration-200",onClick:()=>Ma(s.id),disabled:W==="deleting-farmer",children:e.jsx(ae,{className:"h-4 w-4"})})]})})]},s.id))})]})})})})]})}),e.jsx(Ce,{value:"storage",className:"space-y-6",children:e.jsxs(Q,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(oe,{className:"bg-gradient-to-r from-purple-50 to-violet-50 border-b border-purple-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx($e,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs(ce,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Storage Management",e.jsxs(O,{variant:"secondary",className:"bg-purple-100 text-purple-700 border-purple-200",children:[C.length," Locations"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor storage capacity and conditions"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{onClick:Ke,variant:"outline",className:"border-purple-200 text-purple-700 hover:bg-purple-50",children:[e.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(S,{onClick:()=>Ze(!0),className:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Location"]})]})]})}),e.jsx(K,{className:"p-6",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:C.map(s=>e.jsxs(Q,{className:"hover:shadow-lg transition-all duration-200 border border-gray-200 bg-white",children:[e.jsx(oe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx(O,{variant:s.status==="active"?"default":"secondary",className:s.status==="active"?"bg-green-100 text-green-700 border-green-200":"",children:s.status})]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Type:"}),e.jsx("span",{className:"font-medium capitalize",children:s.location_type.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Capacity:"}),e.jsxs("span",{className:"font-medium",children:[s.current_usage_kg,"/",s.capacity_kg," kg"]})]}),s.temperature_celsius&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Temperature:"}),e.jsxs("span",{className:"font-medium",children:[s.temperature_celsius,"°C"]})]}),s.humidity_percent&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Humidity:"}),e.jsxs("span",{className:"font-medium",children:[s.humidity_percent,"%"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[Math.round(s.current_usage_kg/s.capacity_kg*100),"% occupied"]}),e.jsx("div",{className:"pt-2 border-t border-gray-100",children:e.jsx(S,{size:"sm",variant:s.status==="active"?"destructive":"default",className:`w-full text-xs ${s.status==="active"?"bg-red-100 text-red-700 hover:bg-red-200 border-red-200":"bg-green-100 text-green-700 hover:bg-green-200 border-green-200"}`,onClick:()=>Ta(s.id,s.status),disabled:W===`toggle-storage-${s.id}`,children:W===`toggle-storage-${s.id}`?"Updating...":s.status==="active"?"Mark Inactive":"Mark Active"})})]})})]},s.id))})})]})}),e.jsxs(Ce,{value:"roles",className:"space-y-6",children:[e.jsxs(Q,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(oe,{className:"bg-gradient-to-r from-orange-50 to-amber-50 border-b border-orange-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:e.jsx(Z,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsxs(ce,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Role Management",e.jsxs(O,{variant:"secondary",className:"bg-orange-100 text-orange-700 border-orange-200",children:[d.length," Roles"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Define user roles and permissions"})]})]}),e.jsxs(S,{onClick:()=>Ve(!0),className:"bg-orange-600 hover:bg-orange-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Role"]})]})}),e.jsx(K,{className:"p-6",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map(s=>{const a=qa(s.icon);return e.jsxs(Q,{className:"hover:shadow-lg transition-all duration-200 border border-gray-200 bg-white",children:[e.jsx(oe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:`${s.color} px-3 py-1 font-medium`,children:[e.jsx(a,{className:"w-4 h-4 mr-2"}),s.display_name]}),e.jsx("div",{className:"flex gap-1",children:e.jsx(S,{size:"sm",variant:"outline",className:"hover:bg-orange-50 hover:border-orange-300 hover:text-orange-700 transition-all duration-200",onClick:()=>{Ls(s),be({name:s.name,display_name:s.display_name,description:s.description,permissions:Array.isArray(s.permissions)?s.permissions:typeof s.permissions=="string"?JSON.parse(s.permissions):[],icon:s.icon,color:s.color,is_active:s.is_active}),Ve(!0)},children:e.jsx(ns,{className:"h-4 w-4"})})})]})}),e.jsxs(K,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Permissions:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[Array.isArray(s.permissions)&&s.permissions.slice(0,3).map((g,i)=>e.jsx(O,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:g},i)),Array.isArray(s.permissions)&&s.permissions.length>3&&e.jsxs(O,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:["+",s.permissions.length-3," more"]})]})]})]})]},s.id)})})})]}),Y&&e.jsxs(Q,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(oe,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b border-green-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(Z,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs(ce,{className:"text-2xl font-bold text-gray-900",children:["Permissions for: ",Y.display_name]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View permissions assigned to this role"})]})]})}),e.jsx(K,{className:"p-6",children:e.jsx(zr,{className:"border-0 shadow-none bg-transparent"})})]})]}),e.jsx(Ce,{value:"frontend",className:"space-y-6",children:e.jsxs(Q,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(oe,{className:"bg-gradient-to-r from-indigo-50 to-blue-50 border-b border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:e.jsx(ls,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx(ce,{className:"text-2xl font-bold text-gray-900",children:"Public View Configuration"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure public-facing settings and appearance"})]})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Bs,{className:"border-indigo-200 bg-indigo-50",children:[e.jsx(ur,{className:"h-4 w-4 text-indigo-600"}),e.jsx(Ys,{className:"text-indigo-800",children:"Configure public-facing settings and frontend appearance."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"site_name",className:"text-sm font-medium text-gray-700",children:"Site Name"}),e.jsx(E,{id:"site_name",placeholder:"Rio Fish Management",className:"mt-1 border-gray-200 focus:border-indigo-500 focus:ring-indigo-500/20"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"site_description",className:"text-sm font-medium text-gray-700",children:"Site Description"}),e.jsx(Ns,{id:"site_description",placeholder:"Professional fish management system",className:"mt-1 border-gray-200 focus:border-indigo-500 focus:ring-indigo-500/20"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"contact_email",className:"text-sm font-medium text-gray-700",children:"Contact Email"}),e.jsx(E,{id:"contact_email",type:"email",placeholder:"contact@riofish.com",className:"mt-1 border-gray-200 focus:border-indigo-500 focus:ring-indigo-500/20"})]})]}),e.jsx(S,{className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:"Save Configuration"})]})})]})}),e.jsx(Ce,{value:"audit",className:"space-y-6",children:e.jsxs(Q,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(oe,{className:"bg-gradient-to-r from-red-50 to-pink-50 border-b border-red-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:e.jsx(_s,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsxs(ce,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Audit Logs",e.jsxs(O,{variant:"secondary",className:"bg-red-100 text-red-700 border-red-200",children:[c.length," Entries"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor system activity and user actions"})]})]})}),e.jsx(K,{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"mobile-table-container",children:e.jsxs(rs,{className:"mobile-table",children:[e.jsx(ts,{className:"bg-gradient-to-r from-red-50 to-pink-50",children:e.jsxs(fe,{className:"border-b border-red-100",children:[e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Activity"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"User"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Details"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Date & Time"})]})}),e.jsx(is,{children:c.map((s,a)=>e.jsxs(fe,{className:`hover:bg-red-50/50 transition-colors duration-200 border-b border-gray-100 ${a%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:e.jsx(_s,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-medium",children:Ea(s)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.table_name," • ",s.action]})]})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-teal-600 rounded-full flex items-center justify-center text-white font-semibold text-xs",children:s.user?s.user.first_name.charAt(0):"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-medium",children:s.user?`${s.user.first_name} ${s.user.last_name}`:"Unknown User"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.user?.email||"No email"})]})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"space-y-1",children:[qs(s).map((g,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:g})]},i)),qs(s).length===0&&e.jsx("span",{className:"text-sm text-gray-400 italic",children:"No additional details"})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleTimeString()})]})})]},s.id))})]})})})})]})}),e.jsx(Ce,{value:"outlets",className:"space-y-6",children:e.jsxs(Q,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(oe,{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(Ss,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs(ce,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Outlet Management",e.jsxs(O,{variant:"secondary",className:"bg-purple-100 text-purple-700 border-purple-200",children:[k.length," Outlets"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage retail outlets and distribution partners"})]})]}),e.jsxs(S,{onClick:()=>He(!0),className:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Outlet"]})]})}),e.jsx(K,{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs(rs,{children:[e.jsx(ts,{className:"bg-gradient-to-r from-purple-50 to-indigo-50",children:e.jsxs(fe,{className:"border-b border-purple-100",children:[e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Outlet Name"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Location"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Contact"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Status"}),e.jsx(M,{className:"font-semibold text-gray-700 py-4",children:"Actions"})]})}),e.jsx(is,{children:k.map((s,a)=>e.jsxs(fe,{className:`hover:bg-purple-50/50 transition-colors duration-200 border-b border-gray-100 ${a%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name}),s.manager_name&&e.jsx("div",{className:"text-sm text-gray-500",children:s.manager_name})]})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.location})]})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:s.phone})]})}),e.jsx(L,{className:"py-4",children:e.jsx(O,{className:`${s.status==="active"?"bg-green-100 text-green-800 border-green-200":s.status==="inactive"?"bg-gray-100 text-gray-800 border-gray-200":"bg-red-100 text-red-800 border-red-200"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),e.jsx(L,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>{Us(s),ve({name:s.name,location:s.location,phone:s.phone,manager_name:s.manager_name||"",status:s.status}),He(!0)},className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>Ia(s.id),className:"border-red-200 text-red-700 hover:bg-red-50",children:e.jsx(ae,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})})]}),e.jsx(Pe,{open:J,onOpenChange:A,children:e.jsxs(Ae,{className:"max-w-2xl",children:[e.jsxs(ke,{children:[e.jsx(Re,{className:"text-xl font-semibold text-gray-900",children:V?"Edit User":"Add New User"}),e.jsx(Ee,{className:"text-gray-600",children:V?"Update user information":"Create a new user account with a secure password"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Oa()},className:"space-y-6",children:[!V&&e.jsxs(Bs,{className:"border-blue-200 bg-blue-50",children:[e.jsx(Za,{className:"h-4 w-4 text-blue-600"}),e.jsx(Ys,{className:"text-blue-800",children:"Password must be at least 6 characters long. The user will use this password to log in."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"first_name",className:"text-sm font-medium text-gray-700",children:"First Name *"}),e.jsx(E,{id:"first_name",value:x.first_name,onChange:s=>le({...x,first_name:s.target.value}),required:!0,className:"w-full",placeholder:"Enter first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"last_name",className:"text-sm font-medium text-gray-700",children:"Last Name *"}),e.jsx(E,{id:"last_name",value:x.last_name,onChange:s=>le({...x,last_name:s.target.value}),required:!0,className:"w-full",placeholder:"Enter last name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address *"}),e.jsx(E,{id:"email",type:"email",value:x.email,onChange:s=>{le({...x,email:s.target.value}),Aa(s.target.value)},required:!0,className:`w-full ${Me.isValid?Me.message==="Email is available"?"border-green-300 focus:border-green-500":"":"border-red-300 focus:border-red-500"}`,placeholder:"user@example.com"}),Me.message&&e.jsx("p",{className:`text-xs ${Me.isValid?"text-green-600":"text-red-600"}`,children:Me.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"role",className:"text-sm font-medium text-gray-700",children:"Role *"}),e.jsxs(je,{value:x.role,onValueChange:s=>le({...x,role:s}),children:[e.jsx(we,{className:"w-full",children:e.jsx(Ne,{placeholder:"Select a role"})}),e.jsx(_e,{children:d.filter(s=>s.name&&s.name.trim()!=="").map(s=>e.jsx(T,{value:s.name,children:s.display_name||s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx(E,{id:"phone",value:x.phone,onChange:s=>{le({...x,phone:s.target.value}),Ra(s.target.value)},className:`w-full ${Te.isValid?Te.message==="Phone number is available"?"border-green-300 focus:border-green-500":"":"border-red-300 focus:border-red-500"}`,placeholder:"+254 700 000 000"}),Te.message&&e.jsx("p",{className:`text-xs ${Te.isValid?"text-green-600":"text-red-600"}`,children:Te.message})]}),!V&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password *"}),e.jsx(E,{id:"password",type:"password",value:x.password,onChange:s=>{le({...x,password:s.target.value}),ka(s.target.value)},required:!0,className:`w-full ${Le.isValid?Le.message==="Password is available"?"border-green-300 focus:border-green-500":"":"border-red-300 focus:border-red-500"}`,placeholder:"Enter a secure password"}),Le.message&&e.jsx("p",{className:`text-xs ${Le.isValid?"text-green-600":"text-red-600"}`,children:Le.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"confirm_password",className:"text-sm font-medium text-gray-700",children:"Confirm Password *"}),e.jsx(E,{id:"confirm_password",type:"password",value:x.confirm_password,onChange:s=>le({...x,confirm_password:s.target.value}),required:!0,className:`w-full ${x.confirm_password&&x.password!==x.confirm_password?"border-red-300 focus:border-red-500":x.confirm_password&&x.password===x.confirm_password?"border-green-300 focus:border-green-500":""}`,placeholder:"Confirm the password"}),x.confirm_password&&e.jsx("p",{className:`text-xs ${x.password===x.confirm_password?"text-green-600":"text-red-600"}`,children:x.password===x.confirm_password?"Passwords match":"Passwords do not match"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:x.is_active,onChange:s=>le({...x,is_active:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx(w,{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"User is active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>A(!1),className:"px-6",children:"Cancel"}),e.jsx(S,{type:"submit",disabled:W==="saving-user",className:"px-6 bg-blue-600 hover:bg-blue-700",children:W==="saving-user"?"Saving...":V?"Update User":"Create User"})]})]})]})}),e.jsx(Pe,{open:ue,onOpenChange:s=>{Ve(s),s||xe({})},children:e.jsxs(Ae,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(ke,{className:"pb-6 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-sm",children:e.jsx(Z,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx(Re,{className:"text-xl font-semibold text-gray-900",children:Y?"Edit Role":"Create New Role"}),e.jsx(Ee,{className:"text-gray-600 mt-1",children:Y?"Update role information and permissions":"Define a new role with specific permissions and access levels"})]})]})}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Fa()},className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(w,{htmlFor:"name",className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Role Name *"]}),e.jsx(E,{id:"name",value:v.name,onChange:s=>{be({...v,name:s.target.value}),I.name&&xe({...I,name:""})},className:`transition-all duration-200 ${I.name?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-gray-300"} ${Y?"bg-gray-50 cursor-not-allowed":""}`,placeholder:"e.g., warehouse_manager",maxLength:50,required:!0,disabled:!!Y}),I.name&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1.5 font-medium",children:[e.jsx(as,{className:"h-3 w-3"}),I.name]}),e.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:Y?"Role name cannot be changed after creation":"Internal identifier (lowercase, no spaces)"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(w,{htmlFor:"display_name",className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Display Name *"]}),e.jsx(E,{id:"display_name",value:v.display_name,onChange:s=>{be({...v,display_name:s.target.value}),I.display_name&&xe({...I,display_name:""})},className:`transition-all duration-200 ${I.display_name?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-gray-300"} ${Y?"bg-gray-50 cursor-not-allowed":""}`,placeholder:"e.g., Warehouse Manager",maxLength:100,required:!0,disabled:!!Y}),I.display_name&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1.5 font-medium",children:[e.jsx(as,{className:"h-3 w-3"}),I.display_name]}),e.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:Y?"Display name cannot be changed after creation":"User-friendly name shown in the interface"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(w,{htmlFor:"description",className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Description"]}),e.jsx(Ns,{id:"description",value:v.description,onChange:s=>{be({...v,description:s.target.value}),I.description&&xe({...I,description:""})},className:`transition-all duration-200 resize-none ${I.description?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-gray-300"}`,placeholder:"Describe the role's responsibilities and scope...",maxLength:500,rows:3}),I.description&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1.5 font-medium",children:[e.jsx(as,{className:"h-3 w-3"}),I.description]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:"Optional description of the role's purpose"}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${v.description.length>450?"text-orange-600 bg-orange-50":"text-gray-500 bg-gray-50"}`,children:[v.description.length,"/500"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 p-5 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200 hover:shadow-sm transition-all duration-200",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:v.is_active,onChange:s=>be({...v,is_active:s.target.checked}),className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all duration-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(w,{htmlFor:"is_active",className:"text-sm font-semibold text-gray-800 cursor-pointer",children:"Active Role"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Inactive roles cannot be assigned to users"})]}),e.jsx("div",{className:`p-2 rounded-full transition-all duration-200 ${v.is_active?"bg-green-100 shadow-sm":"bg-gray-200"}`,children:v.is_active?e.jsx(cs,{className:"h-5 w-5 text-green-600"}):e.jsx(Ks,{className:"h-5 w-5 text-gray-400"})})]})]}),v.is_active&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(w,{htmlFor:"permissions",className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Select Permissions *"]}),e.jsx("div",{className:`border-2 rounded-xl p-5 transition-all duration-200 ${I.permissions?"border-red-300 bg-red-50":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"}`,children:e.jsx("div",{className:"min-h-[60px] flex items-center",children:e.jsx(Ir,{selectedPermissions:v.permissions,onPermissionsChange:s=>{be({...v,permissions:s}),I.permissions&&xe({...I,permissions:""})},className:"w-full"})})}),I.permissions?e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1.5 font-medium",children:[e.jsx(as,{className:"h-3 w-3"}),I.permissions]}):e.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:'Choose the specific permissions this role should have. Use "All Permissions" for full admin access.'})]}),Array.isArray(v.permissions)&&v.permissions.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(Z,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Selected Permissions (",(Array.isArray(v.permissions)?v.permissions:[]).length,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(Array.isArray(v.permissions)?v.permissions:[]).slice(0,8).map(s=>e.jsx(O,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 border border-blue-200 hover:bg-blue-200 transition-colors duration-200",children:s},s)),(Array.isArray(v.permissions)?v.permissions:[]).length>8&&e.jsxs(O,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 border border-blue-200",children:["+",(Array.isArray(v.permissions)?v.permissions:[]).length-8," more"]})]})]})]}),!v.is_active&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[e.jsx(Ks,{className:"h-6 w-6 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Role is Inactive"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Permissions are not available for inactive roles. Enable the role to configure permissions."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200 flex-shrink-0",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>{Ve(!1),xe({})},className:"px-6 hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),e.jsx(S,{type:"submit",disabled:W==="saving-role",className:"px-6 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-sm hover:shadow-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:W==="saving-role"?e.jsxs(e.Fragment,{children:[e.jsx(Qs,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),Y?"Update Role":"Create Role"]})})]})]})]})}),e.jsx(Pe,{open:Na,onOpenChange:We,children:e.jsxs(Ae,{className:"max-w-2xl",children:[e.jsxs(ke,{children:[e.jsx(Re,{children:se?"Edit Farmer":"Add New Farmer"}),e.jsx(Ee,{children:se?"Update farmer information":"Add a new farmer to the system"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Va()},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"name",children:"Name"}),e.jsx(E,{id:"name",value:H.name,onChange:s=>ye({...H,name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"phone",children:"Phone"}),e.jsx(E,{id:"phone",value:H.phone,onChange:s=>ye({...H,phone:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"location",children:"Location"}),e.jsx(E,{id:"location",value:H.location,onChange:s=>ye({...H,location:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"rating",children:"Rating (0-5)"}),e.jsx(E,{id:"rating",type:"number",min:"0",max:"5",value:H.rating,onChange:s=>ye({...H,rating:parseInt(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"reliability",children:"Reliability"}),e.jsxs(je,{value:H.reliability,onValueChange:s=>ye({...H,reliability:s}),children:[e.jsx(we,{children:e.jsx(Ne,{})}),e.jsxs(_e,{children:[e.jsx(T,{value:"excellent",children:"Excellent"}),e.jsx(T,{value:"good",children:"Good"}),e.jsx(T,{value:"fair",children:"Fair"}),e.jsx(T,{value:"poor",children:"Poor"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>We(!1),children:"Cancel"}),e.jsx(S,{type:"submit",disabled:W==="saving-farmer",children:W==="saving-farmer"?"Saving...":se?"Update":"Create"})]})]})]})}),e.jsx(Pe,{open:wa,onOpenChange:ps,children:e.jsxs(Ae,{className:"max-w-2xl",children:[e.jsxs(ke,{children:[e.jsxs(Re,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ea,{className:"h-5 w-5 text-blue-600"}),"Email Configuration"]}),e.jsx(Ee,{children:"Configure email settings for notifications and communications"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault()},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"provider",className:"text-sm font-medium text-gray-700",children:"Email Provider"}),e.jsxs(je,{value:N.provider,onValueChange:s=>q({...N,provider:s}),children:[e.jsx(we,{className:"mt-1",children:e.jsx(Ne,{})}),e.jsxs(_e,{children:[e.jsx(T,{value:"sendgrid",children:"SendGrid"}),e.jsx(T,{value:"ses",children:"AWS SES"}),e.jsx(T,{value:"smtp",children:"SMTP"}),e.jsx(T,{value:"resend",children:"Resend"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"from_email",className:"text-sm font-medium text-gray-700",children:"From Email"}),e.jsx(E,{id:"from_email",type:"email",value:N.from_email,onChange:s=>q({...N,from_email:s.target.value}),className:"mt-1",placeholder:"noreply@riofish.com",required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"from_name",className:"text-sm font-medium text-gray-700",children:"From Name"}),e.jsx(E,{id:"from_name",value:N.from_name,onChange:s=>q({...N,from_name:s.target.value}),className:"mt-1",placeholder:"Rio Fish Management",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"api_key",className:"text-sm font-medium text-gray-700",children:"API Key *"}),e.jsx(E,{id:"api_key",name:"api_key",type:"password",autoComplete:"off",value:N.api_key,onChange:s=>q({...N,api_key:s.target.value}),className:"mt-1",disabled:W==="saving-email-config",placeholder:"Your email service API key",required:!0})]}),N.provider==="smtp"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"smtp_host",className:"text-sm font-medium text-gray-700",children:"SMTP Host"}),e.jsx(E,{id:"smtp_host",value:N.smtp_host||"",onChange:s=>q({...N,smtp_host:s.target.value}),className:"mt-1",placeholder:"smtp.gmail.com"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"smtp_port",className:"text-sm font-medium text-gray-700",children:"SMTP Port"}),e.jsx(E,{id:"smtp_port",type:"number",value:N.smtp_port||"",onChange:s=>q({...N,smtp_port:parseInt(s.target.value)||587}),className:"mt-1",placeholder:"587"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"smtp_username",className:"text-sm font-medium text-gray-700",children:"SMTP Username"}),e.jsx(E,{id:"smtp_username",value:N.smtp_username||"",onChange:s=>q({...N,smtp_username:s.target.value}),className:"mt-1",placeholder:"your-email@gmail.com"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"smtp_pass",className:"text-sm font-medium text-gray-700",children:"SMTP Password"}),e.jsx(E,{id:"smtp_pass",name:"smtp_pass",type:"password",autoComplete:"off",value:N.smtp_pass||"",onChange:s=>q({...N,smtp_pass:s.target.value}),className:"mt-1",disabled:W==="saving-email-config",placeholder:"your-app-password"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>ps(!1),children:"Cancel"}),e.jsx(S,{type:"submit",disabled:W==="saving-email-config",children:W==="saving-email-config"?"Saving...":"Save Configuration"})]})]})]})}),e.jsx(Pe,{open:_a,onOpenChange:Ze,children:e.jsxs(Ae,{className:"max-w-2xl",children:[e.jsxs(ke,{children:[e.jsxs(Re,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-purple-600"}),"Add New Storage Location"]}),e.jsx(Ee,{children:"Create a new storage location for fish processing and storage"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),La()},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"storage_name",className:"text-sm font-medium text-gray-700",children:"Location Name *"}),e.jsx(E,{id:"storage_name",value:X.name,onChange:s=>pe({...X,name:s.target.value}),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",placeholder:"e.g., Cold Storage A",required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"storage_type",className:"text-sm font-medium text-gray-700",children:"Location Type *"}),e.jsxs(je,{value:X.location_type,onValueChange:s=>pe({...X,location_type:s}),children:[e.jsx(we,{className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",children:e.jsx(Ne,{})}),e.jsxs(_e,{children:[e.jsx(T,{value:"cold_storage",children:"Cold Storage"}),e.jsx(T,{value:"freezer",children:"Freezer"}),e.jsx(T,{value:"ambient",children:"Ambient"}),e.jsx(T,{value:"processing_area",children:"Processing Area"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"storage_description",className:"text-sm font-medium text-gray-700",children:"Description"}),e.jsx(Ns,{id:"storage_description",value:X.description,onChange:s=>pe({...X,description:s.target.value}),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",placeholder:"Brief description of this storage location"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"storage_capacity",className:"text-sm font-medium text-gray-700",children:"Capacity (kg) *"}),e.jsx(E,{id:"storage_capacity",type:"number",min:"1",step:"0.01",value:X.capacity_kg,onChange:s=>pe({...X,capacity_kg:parseFloat(s.target.value)||0}),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"storage_temperature",className:"text-sm font-medium text-gray-700",children:"Temperature (°C)"}),e.jsx(E,{id:"storage_temperature",type:"number",step:"0.1",value:X.temperature_celsius,onChange:s=>pe({...X,temperature_celsius:parseFloat(s.target.value)||0}),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",placeholder:"4.0"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"storage_humidity",className:"text-sm font-medium text-gray-700",children:"Humidity (%)"}),e.jsx(E,{id:"storage_humidity",type:"number",min:"0",max:"100",step:"0.1",value:X.humidity_percent,onChange:s=>pe({...X,humidity_percent:parseFloat(s.target.value)||0}),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",placeholder:"85.0"})]})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"storage_status",className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(je,{value:X.status,onValueChange:s=>pe({...X,status:s}),children:[e.jsx(we,{className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",children:e.jsx(Ne,{})}),e.jsxs(_e,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"maintenance",children:"Maintenance"}),e.jsx(T,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>Ze(!1),children:"Cancel"}),e.jsx(S,{type:"submit",disabled:W==="saving-storage",className:"bg-purple-600 hover:bg-purple-700",children:W==="saving-storage"?"Creating...":"Create Location"})]})]})]})}),e.jsx(Pe,{open:Sa,onOpenChange:He,children:e.jsxs(Ae,{className:"max-w-2xl",children:[e.jsxs(ke,{children:[e.jsxs(Re,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ss,{className:"h-5 w-5 text-purple-600"}),Be?"Edit Outlet":"Add New Outlet"]}),e.jsx(Ee,{children:Be?"Update outlet information":"Create a new retail outlet or distribution partner"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Ua()},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"outlet_name",children:"Outlet Name"}),e.jsx(E,{id:"outlet_name",value:G.name,onChange:s=>ve({...G,name:s.target.value}),placeholder:"e.g., Nakuru Fresh Fish Market",required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"outlet_location",children:"Location"}),e.jsx(E,{id:"outlet_location",value:G.location,onChange:s=>ve({...G,location:s.target.value}),placeholder:"e.g., Nakuru, Kenya",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"outlet_phone",children:"Phone Number"}),e.jsx(E,{id:"outlet_phone",value:G.phone,onChange:s=>ve({...G,phone:s.target.value}),placeholder:"e.g., +254722456789",required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"outlet_manager_name",children:"Manager Name (Optional)"}),e.jsx(E,{id:"outlet_manager_name",value:G.manager_name,onChange:s=>ve({...G,manager_name:s.target.value}),placeholder:"e.g., John Doe"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"outlet_status",children:"Status"}),e.jsxs(je,{value:G.status,onValueChange:s=>ve({...G,status:s}),children:[e.jsx(we,{children:e.jsx(Ne,{})}),e.jsxs(_e,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"}),e.jsx(T,{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>He(!1),children:"Cancel"}),e.jsx(S,{type:"submit",disabled:W==="saving-outlet",className:"bg-purple-600 hover:bg-purple-700",children:W==="saving-outlet"?"Saving...":Be?"Update Outlet":"Create Outlet"})]})]})]})})]})})}export{jt as default};
