var ze=Object.defineProperty,Me=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var he=(r,t,o)=>t in r?ze(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,ae=(r,t)=>{for(var o in t||(t={}))Oe.call(t,o)&&he(r,o,t[o]);if(xe)for(var o of xe(t))Ue.call(t,o)&&he(r,o,t[o]);return r},oe=(r,t)=>Me(r,$e(t));var L=(r,t,o)=>new Promise((l,u)=>{var p=y=>{try{j(o.next(y))}catch(x){u(x)}},v=y=>{try{j(o.throw(y))}catch(x){u(x)}},j=y=>y.done?l(y.value):Promise.resolve(y.value).then(p,v);j((o=o.apply(r,t)).next())});import{s as R,r as _,j as e,p as Z,e as ve,P as le,B,a as A,f as P,g as K,b as T,L as Y,I as se,l as $,C as We}from"./index-BCWZ-H89.js";import{S as pe,a as ue,b as fe,c as je,d as be}from"./select-BeWWDAHA.js";import{D as qe,b as Le,c as Be,d as Pe,f as Ke,e as Ge}from"./dialog-BEFQI8fO.js";import{D as He}from"./dollar-sign-DPjnlSXf.js";import{T as Ve}from"./trending-down-iKgTjyVW.js";import{C as we}from"./clock-BaaJ5u8-.js";import{S as Ye}from"./scale-Bwpcq1Lb.js";import{A as Qe}from"./activity-BpqOlhwe.js";import{P as Je}from"./plus-OBpYIVmg.js";import{C as Ne}from"./calendar-C6Sesfe9.js";import{M as _e}from"./map-pin-D9Y1viL5.js";import{C as Xe}from"./index-a0SoWD4Z.js";import{C as Ze}from"./chevron-right-NhlPmbsi.js";import{F as es}from"./file-text-DU1qC6iK.js";import{D as ss}from"./download-DuXf7iXp.js";import{T as ts}from"./trending-up-pEaLsZ6-.js";import"./index-BT8xChTk.js";import"./index-DI_eAeAe.js";class as{getDisposalStats(){return L(this,null,function*(){try{console.log("ðŸ” [DisposalService] Fetching disposal statistics...");const{data:t,error:o}=yield R.from("disposal_records").select(`
          *,
          disposal_reason:disposal_reasons(name)
        `).order("created_at",{ascending:!1});if(o)throw console.error("âŒ [DisposalService] Error fetching disposal records:",o),o;console.log("ðŸ“Š [DisposalService] Disposal records:",(t==null?void 0:t.length)||0);const l=(t==null?void 0:t.length)||0,u=(t==null?void 0:t.reduce((m,g)=>m+(g.total_weight_kg||0),0))||0,p=(t==null?void 0:t.reduce((m,g)=>m+(g.disposal_cost||0),0))||0,v=(t==null?void 0:t.filter(m=>m.status==="pending").length)||0,j=new Date;j.setDate(j.getDate()-7);const y=(t==null?void 0:t.filter(m=>new Date(m.created_at)>=j).length)||0,x=(t==null?void 0:t.filter(m=>m.status==="completed"))||[];let C=0;x.length>0&&(C=x.reduce((g,I)=>{const M=new Date(I.created_at),U=new Date(I.disposal_date),W=Math.floor((U.getTime()-M.getTime())/(1e3*60*60*24));return g+W},0)/x.length);const w={};t==null||t.forEach(m=>{var I;const g=((I=m.disposal_reason)==null?void 0:I.name)||"Unknown";w[g]=(w[g]||0)+1});const D=Object.keys(w).reduce((m,g)=>w[m]>w[g]?m:g,"Age"),E=new Date,z=E.getMonth(),O=E.getFullYear(),b=z===0?11:z-1,i=z===0?O-1:O,h=(t==null?void 0:t.filter(m=>{const g=new Date(m.created_at);return g.getMonth()===z&&g.getFullYear()===O}).length)||0,k=(t==null?void 0:t.filter(m=>{const g=new Date(m.created_at);return g.getMonth()===b&&g.getFullYear()===i}).length)||0,S=k>0?(h-k)/k*100:0,N={totalDisposals:l,totalDisposedWeight:u,totalDisposalCost:p,pendingDisposals:v,recentDisposals:y,averageDisposalAge:C,topDisposalReason:D,monthlyDisposalTrend:S};return console.log("ðŸ“Š [DisposalService] Calculated stats:",N),N}catch(t){return console.error("âŒ [DisposalService] Error getting disposal stats:",t),{totalDisposals:0,totalDisposedWeight:0,totalDisposalCost:0,pendingDisposals:0,recentDisposals:0,averageDisposalAge:0,topDisposalReason:"Age",monthlyDisposalTrend:0}}})}getDisposalRecords(t=50,o=0){return L(this,null,function*(){try{const{data:l,error:u}=yield R.from("disposal_records").select(`
          *,
          disposal_reason:disposal_reasons(name),
          disposal_items(
            size_class,
            weight_grams,
            batch_number,
            sorting_result:sorting_results(
              sorting_batch:sorting_batches(batch_number)
            )
          )
        `).order("created_at",{ascending:!1}).range(o,o+t-1);if(u)throw u;return(l||[]).map(v=>{var j,y;return oe(ae({},v),{batch_numbers:((j=v.disposal_items)==null?void 0:j.map(x=>{var C,w;return x.batch_number||((w=(C=x.sorting_result)==null?void 0:C.sorting_batch)==null?void 0:w.batch_number)||"Unknown"}).filter((x,C,w)=>w.indexOf(x)===C))||[],size_classes:((y=v.disposal_items)==null?void 0:y.map(x=>x.size_class).filter((x,C,w)=>w.indexOf(x)===C))||[]})})}catch(l){return console.error("Error fetching disposal records:",l),[]}})}getDisposalReasons(){return L(this,null,function*(){try{const{data:t,error:o}=yield R.from("disposal_reasons").select("*").eq("is_active",!0).order("name");if(o)throw o;return t||[]}catch(t){return console.error("Error fetching disposal reasons:",t),[]}})}getInventoryForDisposal(t=30,o=!0,l,u=!1,p,v){return L(this,null,function*(){try{console.log("ðŸ” [DisposalService] Getting inventory for disposal with improved filtering..."),console.log("ðŸ“Š [DisposalService] Filter criteria:",{daysOld:t,includeStorageIssues:o});const j=new Date;j.setDate(j.getDate()-t);const y=j.toISOString().split("T")[0];console.log("ðŸ“… [DisposalService] Cutoff date:",y);const{data:x,error:C}=yield R.from("storage_locations").select("id, name, status, capacity_kg, current_usage_kg").order("name");if(C)throw console.error("âŒ [DisposalService] Storage locations error:",C),C;console.log("ðŸ“ [DisposalService] Storage locations found:",(x==null?void 0:x.length)||0);const w=new Map;x==null||x.forEach(i=>{w.set(i.id,i)});let D=R.from("sorting_results").select(`
          id,
          size_class,
          total_pieces,
          total_weight_grams,
          storage_location_id,
          created_at,
          sorting_batch:sorting_batches(
            id,
            batch_number,
            status,
            created_at
          )
        `).not("storage_location_id","is",null).gt("total_weight_grams",0);D=D.eq("sorting_batch.status","completed");const{data:E,error:z}=yield D.order("created_at",{ascending:!1});if(z)throw console.error("âŒ [DisposalService] Query error:",z),z;console.log("ðŸ“Š [DisposalService] Raw query results:",(E==null?void 0:E.length)||0,"items");const O=(E||[]).filter(i=>{var M,U,W,V;const h=w.get(i.storage_location_id);if(!i.total_weight_grams||i.total_weight_grams<=0)return console.log("âŒ [DisposalService] Item filtered out - no weight:",i.id,i.total_weight_grams),!1;const k=((U=(M=i.sorting_batch)==null?void 0:M.created_at)==null?void 0:U.split("T")[0])||((W=i.created_at)==null?void 0:W.split("T")[0]);if(!k)return console.log("âŒ [DisposalService] Item filtered out - no processing date:",i.id),!1;const S=new Date(k);if(isNaN(S.getTime())||S>new Date)return console.log("âŒ [DisposalService] Item filtered out - invalid or future date:",i.id,k),!1;const N=Math.floor((new Date().getTime()-S.getTime())/(1e3*60*60*24));let m=!1;if(t===0?m=!0:l&&l>t?m=N>=t&&N<=l:m=N>=t,p||v){const q=k;let G=!0;if(p&&q<p&&(G=!1),v&&q>v&&(G=!1),!G)return console.log("âŒ [DisposalService] Item filtered out - not in date range:",i.id,q,"from:",p,"to:",v),!1}let g=!1;if(u)return g=h&&h.status!=="active",g;o&&(g=!i.storage_location_id||!h||h.status!=="active"||h.current_usage_kg>h.capacity_kg);const I=m||g;return console.log("ðŸ” [DisposalService] Item check:",{id:i.id,batchNumber:(V=i.sorting_batch)==null?void 0:V.batch_number,processingDate:k,daysInStorage:N,weightGrams:i.total_weight_grams,isOldEnough:m,hasStorageIssues:g,storageStatus:h==null?void 0:h.status,isEligible:I,inactiveStorageOnly:u}),I});console.log("ðŸ“Š [DisposalService] Eligible items after filtering:",O.length);const b=O.map(i=>{var m,g,I,M,U,W,V,q,G,ee,Q,te,H,J;const h=w.get(i.storage_location_id),k=((g=(m=i.sorting_batch)==null?void 0:m.created_at)==null?void 0:g.split("T")[0])||((I=i.created_at)==null?void 0:I.split("T")[0]),S=Math.floor((new Date().getTime()-new Date(k).getTime())/(1e3*60*60*24));let N="Age";return i.storage_location_id?h?h.status!=="active"?N="Storage Inactive":h.current_usage_kg>h.capacity_kg?N="Storage Over Capacity":S>=t&&(N="Age"):N="Storage Not Found":N="No Storage Location",{sorting_result_id:i.id,size_class:i.size_class,total_pieces:i.total_pieces,total_weight_grams:i.total_weight_grams,batch_number:((M=i.sorting_batch)==null?void 0:M.batch_number)||"BATCH-"+((W=(U=i.sorting_batch)==null?void 0:U.id)==null?void 0:W.substring(0,8)),storage_location_name:(h==null?void 0:h.name)||"No Storage Assigned",farmer_name:((ee=(G=(q=(V=i.sorting_batch)==null?void 0:V.processing_record)==null?void 0:q.warehouse_entry)==null?void 0:G.farmers)==null?void 0:ee.name)||"Unknown Farmer",processing_date:k,days_in_storage:S,disposal_reason:N,quality_notes:`Fish from ${((J=(H=(te=(Q=i.sorting_batch)==null?void 0:Q.processing_record)==null?void 0:te.warehouse_entry)==null?void 0:H.farmers)==null?void 0:J.name)||"Unknown Farmer"}`,storage_status:(h==null?void 0:h.status)||"unknown"}});return console.log("ðŸ“Š [DisposalService] Transformed items:",b.length),b}catch(j){return console.error("âŒ [DisposalService] Error getting inventory for disposal:",j),[]}})}createDisposal(t){return L(this,null,function*(){try{console.log("ðŸ” [DisposalService] Creating disposal record..."),console.log("ðŸ“Š [DisposalService] Disposal data:",t);let{data:o,error:l}=yield R.from("disposal_reasons").select("id").eq("name",t.disposalReason).single();if(l){console.log("ðŸ” [DisposalService] Disposal reason not found, creating new one:",t.disposalReason),console.log("ðŸ” [DisposalService] Error details:",l);const{data:D,error:E}=yield R.from("disposal_reasons").insert({name:t.disposalReason,description:`Auto-created disposal reason: ${t.disposalReason}`,is_active:!0}).select("id").single();if(E)throw console.error("âŒ [DisposalService] Error creating disposal reason:",E),new Error(`Failed to create disposal reason "${t.disposalReason}": ${E.message}`);o=D,console.log("âœ… [DisposalService] Created new disposal reason:",o.id)}const u={disposal_reason_id:o.id,total_weight_kg:t.totalWeight,disposal_cost:t.disposalCost,notes:t.disposalNotes,status:"completed",disposal_date:new Date().toISOString().split("T")[0],disposal_method:t.disposalMethod,created_by:"system",approved_by:"system"};console.log("ðŸ” [DisposalService] Disposal record data:",u);const{data:p,error:v}=yield R.from("disposal_records").insert(u).select().single();if(v)throw console.error("âŒ [DisposalService] Error creating disposal record:",v),v;console.log("âœ… [DisposalService] Disposal record created:",p.id);const{data:j,error:y}=yield R.from("sorting_results").select(`
          id, 
          size_class, 
          total_weight_grams,
          storage_location_id,
          created_at,
          sorting_batch:sorting_batches(
            batch_number,
            processing_record:processing_records(
              warehouse_entry:warehouse_entries(
                farmers(name)
              )
            )
          ),
          storage_locations(name)
        `).in("id",t.selectedItems);if(y)throw console.error("âŒ [DisposalService] Error fetching sorting results:",y),y;const x=j.map(D=>{var b,i,h,k,S,N,m,g,I;const E=((h=(i=(b=D.sorting_batch)==null?void 0:b.processing_record)==null?void 0:i.warehouse_entry)==null?void 0:h.created_at)||D.created_at,z=((m=(N=(S=(k=D.sorting_batch)==null?void 0:k.processing_record)==null?void 0:S.warehouse_entry)==null?void 0:N.farmers)==null?void 0:m.name)||"Unknown Farmer",O=((g=D.storage_locations)==null?void 0:g.name)||"Unknown Storage";return{disposal_record_id:p.id,sorting_result_id:D.id,size_class:D.size_class,weight_kg:D.total_weight_grams/1e3,batch_number:((I=D.sorting_batch)==null?void 0:I.batch_number)||"Unknown",storage_location_name:O,farmer_name:z,processing_date:E?E.split("T")[0]:new Date().toISOString().split("T")[0],quality_notes:`Disposed from ${O} - ${t.disposalReason}`,disposal_reason:t.disposalReason,status:"pending"}}),{error:C}=yield R.from("disposal_items").insert(x);if(C)throw console.error("âŒ [DisposalService] Error creating disposal items:",C),C;console.log("âœ… [DisposalService] Disposal items created:",x.length);const{error:w}=yield R.from("sorting_results").update({status:"disposed"}).in("id",t.selectedItems);if(w)throw console.error("âŒ [DisposalService] Error updating sorting results:",w),w;return console.log("âœ… [DisposalService] Sorting results updated to disposed status"),{success:!0,disposalRecord:p,message:`Successfully disposed ${t.selectedItems.length} items`}}catch(o){return console.error("âŒ [DisposalService] Error creating disposal:",o),console.error("âŒ [DisposalService] Error details:",{message:o instanceof Error?o.message:"Unknown error",stack:o instanceof Error?o.stack:void 0,disposalData:t}),{success:!1,error:o instanceof Error?o.message:"Unknown error occurred"}}})}getInventoryForDisposalFallback(t=30){return L(this,null,function*(){try{const o=new Date;o.setDate(o.getDate()-t);const{data:l,error:u}=yield R.from("sorting_results").select(`
          id,
          size_class,
          total_weight_grams,
          batch_number,
          storage_location_name,
          farmer_name,
          processing_date,
          quality_notes,
          storage_locations!inner(status)
        `).eq("status","available").lte("processing_date",o.toISOString().split("T")[0]).gte("total_weight_grams",0);if(u)throw u;return(l==null?void 0:l.map(p=>{var v,j;return{sorting_result_id:p.id,size_class:p.size_class,total_weight_grams:p.total_weight_grams,batch_number:p.batch_number,storage_location_name:p.storage_location_name,storage_status:((v=p.storage_locations)==null?void 0:v.status)||"active",farmer_name:p.farmer_name,processing_date:p.processing_date,days_in_storage:Math.floor((new Date().getTime()-new Date(p.processing_date).getTime())/(1e3*60*60*24)),disposal_reason:((j=p.storage_locations)==null?void 0:j.status)==="inactive"?"Storage Inactive":"Age",quality_notes:p.quality_notes}}))||[]}catch(o){return console.error("Error in fallback method:",o),[]}})}}const re=new as;function os({stats:r}){const[t,o]=_.useState([]);return _.useEffect(()=>{const l={totalDisposals:Number(r==null?void 0:r.totalDisposals)||0,totalDisposedWeight:Number(r==null?void 0:r.totalDisposedWeight)||0,totalDisposalCost:Number(r==null?void 0:r.totalDisposalCost)||0,pendingDisposals:Number(r==null?void 0:r.pendingDisposals)||0,recentDisposals:Number(r==null?void 0:r.recentDisposals)||0,averageDisposalAge:Number(r==null?void 0:r.averageDisposalAge)||0,monthlyDisposalTrend:Number(r==null?void 0:r.monthlyDisposalTrend)||0,topDisposalReason:String((r==null?void 0:r.topDisposalReason)||"Age")},u=[{id:"1",type:"warning",icon:e.jsx(Z,{className:"h-5 w-5"}),text:`ðŸ—‘ï¸ Total Disposals: ${l.totalDisposals} records | ${l.totalDisposedWeight.toFixed(1)}kg disposed`,bgColor:"bg-orange-100",textColor:"text-orange-800"},{id:"2",type:"info",icon:e.jsx(He,{className:"h-5 w-5"}),text:`ðŸ’° Disposal Costs: KES ${l.totalDisposalCost.toLocaleString()} total cost | ${l.averageDisposalAge.toFixed(1)} days avg age`,bgColor:"bg-red-100",textColor:"text-red-800"},{id:"3",type:"warning",icon:e.jsx(ve,{className:"h-5 w-5"}),text:`âš ï¸ Pending Disposals: ${l.pendingDisposals} awaiting approval | ${l.recentDisposals} this week`,bgColor:"bg-yellow-100",textColor:"text-yellow-800"},{id:"4",type:"info",icon:e.jsx(Ve,{className:"h-5 w-5"}),text:`ðŸ“‰ Disposal Trend: ${l.monthlyDisposalTrend}% change this month | Top reason: ${l.topDisposalReason}`,bgColor:"bg-purple-100",textColor:"text-purple-800"},{id:"5",type:"info",icon:e.jsx(we,{className:"h-5 w-5"}),text:`â° Average Age: ${l.averageDisposalAge.toFixed(1)} days before disposal | Quality control active`,bgColor:"bg-indigo-100",textColor:"text-indigo-800"},{id:"6",type:"success",icon:e.jsx(le,{className:"h-5 w-5"}),text:"ðŸ“¦ Waste Management: Efficient disposal system | Environmental compliance maintained",bgColor:"bg-green-100",textColor:"text-green-800"},{id:"7",type:"info",icon:e.jsx(Ye,{className:"h-5 w-5"}),text:"âš–ï¸ Quality Control: Automated disposal triggers | Storage optimization active",bgColor:"bg-blue-100",textColor:"text-blue-800"},{id:"8",type:"achievement",icon:e.jsx(Qe,{className:"h-5 w-5"}),text:"ðŸŽ¯ Rio Fish Farm: Leading waste management practices in Kenya's fish industry",bgColor:"bg-emerald-100",textColor:"text-emerald-800"}];o(u)},[r]),e.jsx("div",{className:"w-full bg-gradient-to-r from-orange-50 to-red-50 border-b border-orange-200 shadow-sm overflow-hidden relative z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"relative py-2 sm:py-3 overflow-hidden",children:e.jsxs("div",{className:"flex animate-marquee-simple whitespace-nowrap",children:[t.map(l=>e.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 px-3 sm:px-6 py-1 sm:py-2 rounded-full ${l.bgColor} ${l.textColor} font-medium text-xs sm:text-sm whitespace-nowrap mx-2 sm:mx-4 shadow-sm border flex-shrink-0`,children:[l.icon,e.jsx("span",{children:l.text})]},l.id)),t.map(l=>e.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 px-3 sm:px-6 py-1 sm:py-2 rounded-full ${l.bgColor} ${l.textColor} font-medium text-xs sm:text-sm whitespace-nowrap mx-2 sm:mx-4 shadow-sm border flex-shrink-0`,children:[l.icon,e.jsx("span",{children:l.text})]},`duplicate-${l.id}`))]})})})})}const ys=()=>{const[r,t]=_.useState([]),[o,l]=_.useState({totalDisposals:0,totalDisposedWeight:0,totalDisposalCost:0,pendingDisposals:0,recentDisposals:0,averageDisposalAge:0,topDisposalReason:"Age"}),[u,p]=_.useState([]),[v,j]=_.useState(!0),[y,x]=_.useState(!1),[C,w]=_.useState(!1),[D,E]=_.useState(!1),[z,O]=_.useState(null),[b,i]=_.useState("all"),[h,k]=_.useState(1),[S,N]=_.useState([]),[m,g]=_.useState(""),[I,M]=_.useState(new Set),[U,W]=_.useState(0),[V,q]=_.useState(""),[G,ee]=_.useState("waste"),[Q,te]=_.useState(!1),[H,J]=_.useState({from:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),ie=[{value:"all",label:"All Items",description:"Show all available items",days:0},{value:"custom_age",label:"Custom Age",description:"Items older than specified days",days:0},{value:"inactive_storage",label:"Inactive Storage",description:"Items in inactive storage locations",days:0}],ye=[{value:"waste",label:"Waste Disposal",description:"Dispose as general waste"},{value:"compost",label:"Compost",description:"Convert to compost for farming"},{value:"donation",label:"Donation",description:"Donate to charity or food bank"},{value:"return_to_farmer",label:"Return to Farmer",description:"Return to original farmer"}];_.useEffect(()=>{ne(),ce()},[]),_.useEffect(()=>{ce()},[b,h]);const ne=()=>L(void 0,null,function*(){try{j(!0);const[s,a]=yield Promise.all([re.getDisposalRecords(),re.getDisposalStats()]);t(s),l(a)}catch(s){console.error("Error loading disposal data:",s)}finally{j(!1)}}),ce=()=>L(void 0,null,function*(){try{let s=0,a,n=!1,f=!1;b==="all"?(s=0,f=!0):b==="custom_age"?s=h:b==="inactive_storage"&&(s=0,n=!0,f=!1);const c=yield re.getInventoryForDisposal(s,f,a,n);p(c)}catch(s){console.error("Error loading inventory for disposal:",s),p([])}}),De=()=>L(void 0,null,function*(){if(S.length===0){alert("Please select at least one item for disposal");return}try{E(!0);const a=u.filter(f=>S.includes(f.sorting_result_id)).reduce((f,c)=>f+c.total_weight_grams/1e3,0),n=yield re.createDisposal({selectedItems:S,disposalReason:m,disposalCost:U,disposalNotes:V,disposalMethod:G,totalWeight:a});n.success?(alert(`âœ… ${n.message}`),Se(),x(!1),yield ne()):alert(`âŒ Error creating disposal: ${n.error}`)}catch(s){console.error("Error creating disposal:",s),alert("âŒ An error occurred while creating the disposal record")}finally{E(!1)}}),Se=()=>{i("all"),k(1),N([]),g(""),W(0),q(""),ee("waste")},Ce=s=>{N(a=>a.includes(s)?a.filter(n=>n!==s):[...a,s])},ke=s=>{M(a=>{const n=new Set(a);return n.has(s)?n.delete(s):n.add(s),n})},Ae=()=>{const s=new Set(u.map(a=>a.storage_location_name));M(s)},Te=()=>{M(new Set)},Ee=()=>{const s=u.map(a=>a.sorting_result_id);N(s)},Ie=()=>{N([])},de=()=>{const s=r.filter(c=>{const d=new Date(c.created_at).toISOString().split("T")[0];return d>=H.from&&d<=H.to}),a=s.reduce((c,d)=>c+(d.total_weight_kg||0),0),n=s.reduce((c,d)=>c+(d.disposal_cost||0),0),f={};return s.forEach(c=>{var F;const d=typeof c.disposal_reason=="object"?((F=c.disposal_reason)==null?void 0:F.name)||"Unknown":c.disposal_reason||"Unknown";f[d]||(f[d]={count:0,weight:0,cost:0}),f[d].count++,f[d].weight+=c.total_weight_kg||0,f[d].cost+=c.disposal_cost||0}),{totalRecords:s.length,totalWeight:a,totalCost:n,reasonGroups:f,records:s}},Fe=()=>{const s=de(),a=[["Date","Time","Batch Numbers","Size Classes","Disposal Reason","Disposal Method","Weight (kg)","Cost (KES)","Created By","Approved By","Status","Notes"].join(","),...s.records.map(d=>{var X,me,ge;const F=new Date(d.created_at);return[F.toLocaleDateString(),F.toLocaleTimeString(),((X=d.batch_numbers)==null?void 0:X.join("; "))||"N/A",((me=d.size_classes)==null?void 0:me.join("; "))||"N/A",typeof d.disposal_reason=="object"?((ge=d.disposal_reason)==null?void 0:ge.name)||"Unknown":d.disposal_reason||"Unknown",d.disposal_method||"N/A",d.total_weight_kg||0,d.disposal_cost||0,d.created_by||"N/A",d.approved_by||"N/A",d.status,d.notes||"N/A"].map(Re=>`"${Re}"`).join(",")})].join(`
`),n=new Blob([a],{type:"text/csv"}),f=window.URL.createObjectURL(n),c=document.createElement("a");c.href=f,c.download=`disposal-report-${H.from}-to-${H.to}.csv`,c.click(),window.URL.revokeObjectURL(f)};return v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading disposal data..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 content-container",children:[e.jsx(os,{stats:o}),e.jsxs("div",{className:"container mx-auto responsive-padding max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Disposal Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage fish disposal and waste handling"})]}),e.jsxs(B,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:()=>x(!0),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create Disposal"]})]}),e.jsx(qe,{open:y,onOpenChange:x,children:e.jsxs(Le,{className:"!max-w-4xl !w-[90vw] !h-[80vh] !flex !flex-col !top-[10vh] !left-[5vw] !translate-x-0 !translate-y-0",children:[e.jsxs(Be,{children:[e.jsx(Pe,{className:"text-xl font-semibold",children:"Create New Disposal Record"}),e.jsx(Ke,{children:"Configure disposal criteria and select items for disposal"})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto overflow-x-hidden min-h-0 pt-2",style:{maxHeight:"calc(80vh - 150px)"},children:[e.jsxs(A,{className:"shadow-lg border-0 bg-gradient-to-br from-blue-50 to-indigo-50 max-w-md mx-auto",children:[e.jsxs(P,{className:"pb-4",children:[e.jsxs(K,{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-blue-600"}),"Select Filter Criteria"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose criteria for selecting items to dispose"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"ageCategory",className:"text-sm font-semibold text-gray-700",children:"Filter Criteria *"}),e.jsxs(pe,{value:b,onValueChange:s=>{i(s);const a=ie.find(n=>n.value===s);a&&g(a.label)},children:[e.jsx(ue,{className:"h-12 bg-white border-2 border-gray-200 hover:border-blue-300 focus:border-blue-500 transition-colors",children:e.jsx(fe,{placeholder:"Select filter criteria"})}),e.jsx(je,{children:ie.map(s=>e.jsx(be,{value:s.value,children:e.jsxs("div",{className:"flex flex-col py-1",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.label}),e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]})},s.value))})]})]})})]}),b&&b!==""&&e.jsxs("div",{className:"space-y-4",children:[b==="custom_age"&&e.jsxs(A,{className:"shadow-lg border-0 bg-gradient-to-br from-yellow-50 to-orange-50 max-w-md mx-auto",children:[e.jsxs(P,{className:"pb-4",children:[e.jsxs(K,{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-orange-600"}),"Custom Age Threshold"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Set the minimum age in days for items to dispose"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"customDaysOld",className:"text-sm font-semibold text-gray-700",children:"Days Old Threshold *"}),e.jsx(se,{id:"customDaysOld",type:"number",value:h,onChange:s=>k(Number(s.target.value)),className:"h-12 bg-white border-2 border-gray-200 hover:border-orange-300 focus:border-orange-500 transition-colors",placeholder:"Enter days old threshold",min:"1"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 max-w-full overflow-x-hidden",children:[e.jsxs(A,{className:"shadow-lg border-0 bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsxs(P,{className:"pb-4",children:[e.jsxs(K,{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-600"}),"Filter Items for Disposal"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure criteria for selecting items"})]}),e.jsx(T,{className:"space-y-4",children:b==="custom_age"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{className:"text-sm font-semibold text-gray-700",children:"Age Threshold"}),e.jsx("div",{className:"p-3 bg-white rounded-lg border border-gray-200",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[h," days or older"]})})]})})]}),e.jsxs(A,{className:"shadow-lg border-0 bg-gradient-to-br from-green-50 to-emerald-50",children:[e.jsxs(P,{className:"pb-4",children:[e.jsxs(K,{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-green-600"}),"Disposal Details"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Provide disposal information"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"disposalMethod",className:"text-sm font-semibold text-gray-700",children:"Disposal Method *"}),e.jsxs(pe,{value:G,onValueChange:ee,children:[e.jsx(ue,{className:"h-12 bg-white border-2 border-gray-200 hover:border-green-300 focus:border-green-500 transition-colors",children:e.jsx(fe,{placeholder:"Select disposal method"})}),e.jsx(je,{children:ye.map(s=>e.jsx(be,{value:s.value,children:e.jsxs("div",{className:"flex flex-col py-1",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.label}),e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]})},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"disposalCost",className:"text-sm font-semibold text-gray-700",children:"Disposal Cost (KES)"}),e.jsx(se,{id:"disposalCost",type:"number",value:U,onChange:s=>W(Number(s.target.value)),className:"h-12 bg-white border-2 border-gray-200 hover:border-green-300 focus:border-green-500 transition-colors",placeholder:"Enter disposal cost",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"disposalNotes",className:"text-sm font-semibold text-gray-700",children:"Notes"}),e.jsx(se,{id:"disposalNotes",value:V,onChange:s=>q(s.target.value),className:"h-12 bg-white border-2 border-gray-200 hover:border-green-300 focus:border-green-500 transition-colors",placeholder:"Additional notes (optional)"})]})]})]})]}),e.jsxs(A,{className:"overflow-hidden",children:[e.jsxs(P,{className:"pb-4",children:[e.jsxs(K,{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5 text-gray-600"}),"Available Items for Disposal (",u.length,")"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[b==="all"&&"Showing all available items",b==="custom_age"&&`Showing items older than ${h} days`,b==="inactive_storage"&&"Showing items in inactive storage locations"]})]}),e.jsx(T,{className:"max-h-96 overflow-y-auto",children:u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No items found matching your criteria"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",u.length," items across ",new Set(u.map(s=>s.storage_location_name)).size," storage locations",S.length>0&&e.jsxs("span",{className:"ml-2 font-semibold text-blue-600",children:["â€¢ ",S.length," selected"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{variant:"outline",size:"sm",onClick:Ae,className:"text-xs",children:"Expand All"}),e.jsx(B,{variant:"outline",size:"sm",onClick:Te,className:"text-xs",children:"Collapse All"}),e.jsx(B,{variant:"outline",size:"sm",onClick:Ee,className:"text-xs bg-green-50 hover:bg-green-100 text-green-700 border-green-200",children:"Select All"}),e.jsx(B,{variant:"outline",size:"sm",onClick:Ie,className:"text-xs bg-red-50 hover:bg-red-100 text-red-700 border-red-200",children:"Deselect All"})]})]}),Object.entries(u.reduce((s,a)=>{const n=a.storage_location_name;return s[n]||(s[n]=[]),s[n].push(a),s},{})).map(([s,a])=>{const n=I.has(s),f=a;return e.jsxs(A,{className:"border-2 border-gray-200",children:[e.jsxs(P,{className:"pb-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>ke(s),children:[e.jsxs(K,{className:"text-lg font-semibold text-gray-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n?e.jsx(Xe,{className:"w-4 h-4 text-gray-500"}):e.jsx(Ze,{className:"w-4 h-4 text-gray-500"}),e.jsx(_e,{className:"w-5 h-5 text-blue-600"}),s]}),e.jsxs($,{variant:"outline",className:"text-sm",children:[f.length," items"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Total Weight: ",(f.reduce((c,d)=>c+d.total_weight_grams,0)/1e3).toFixed(2)," kg"]})]}),n&&e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 overflow-x-hidden",children:f.map(c=>e.jsx(A,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${S.includes(c.sorting_result_id)?"ring-2 ring-red-500 bg-red-50":"hover:bg-gray-50"}`,onClick:()=>Ce(c.sorting_result_id),children:e.jsxs(T,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx($,{variant:"outline",className:"text-xs",children:c.batch_number}),e.jsxs($,{variant:"secondary",className:"text-xs",children:["Size ",c.size_class]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Weight:"}),e.jsxs("span",{className:"font-medium",children:[(c.total_weight_grams/1e3).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Age:"}),e.jsxs("span",{className:"font-medium",children:[c.days_in_storage," days"]})]})]}),S.includes(c.sorting_result_id)&&e.jsx("div",{className:"mt-2 text-center",children:e.jsx($,{className:"bg-red-600 text-white text-xs",children:"Selected"})})]})},c.sorting_result_id))})})]},s)})]})})]})]})]}),e.jsxs(Ge,{className:"flex-shrink-0 border-t pt-4",children:[e.jsx(B,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),b&&b!==""&&e.jsx(B,{onClick:De,className:"bg-red-600 hover:bg-red-700",disabled:D,children:D?"Processing...":"Create Disposal"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(A,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Disposals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),e.jsx(Z,{className:"h-8 w-8 text-gray-400"})]})})}),e.jsx(A,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Weight"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(o.totalDisposedWeight||0).toFixed(1)," kg"]})]}),e.jsx(le,{className:"h-8 w-8 text-gray-400"})]})})}),e.jsx(A,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Cost"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["KES ",(o.totalDisposalCost||0).toFixed(2)]})]}),e.jsx(Ne,{className:"h-8 w-8 text-gray-400"})]})})}),e.jsx(A,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.pendingDisposals||0})]}),e.jsx(ve,{className:"h-8 w-8 text-gray-400"})]})})})]}),e.jsxs(A,{className:"mb-6",children:[e.jsx(P,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-blue-600"}),"Disposal Reports"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(B,{variant:"outline",size:"sm",onClick:()=>te(!Q),className:"flex items-center gap-2",children:[e.jsx(es,{className:"w-4 h-4"}),Q?"Hide Reports":"Show Reports"]}),Q&&e.jsxs(B,{variant:"outline",size:"sm",onClick:Fe,className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4"}),"Export CSV"]})]})]})}),Q&&e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"reportFromDate",className:"text-sm font-semibold text-gray-700",children:"From Date"}),e.jsx(se,{id:"reportFromDate",type:"date",value:H.from,onChange:s=>J(a=>oe(ae({},a),{from:s.target.value})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"reportToDate",className:"text-sm font-semibold text-gray-700",children:"To Date"}),e.jsx(se,{id:"reportToDate",type:"date",value:H.to,onChange:s=>J(a=>oe(ae({},a),{to:s.target.value})),className:"mt-1"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(B,{onClick:()=>{const s=new Date().toISOString().split("T")[0],a=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0];J({from:a,to:s})},variant:"outline",size:"sm",className:"w-full",children:"Last 30 Days"})})]}),(()=>{const s=de();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(A,{className:"bg-blue-50 border-blue-200",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Disposals"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s.totalRecords})]}),e.jsx(Z,{className:"h-8 w-8 text-blue-400"})]})})}),e.jsx(A,{className:"bg-green-50 border-green-200",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Weight"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[s.totalWeight.toFixed(1)," kg"]})]}),e.jsx(le,{className:"h-8 w-8 text-green-400"})]})})}),e.jsx(A,{className:"bg-orange-50 border-orange-200",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Total Cost"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:["KES ",s.totalCost.toLocaleString()]})]}),e.jsx(ts,{className:"h-8 w-8 text-orange-400"})]})})})]}),e.jsxs(A,{children:[e.jsx(P,{children:e.jsx(K,{className:"text-lg",children:"Disposal by Reason"})}),e.jsx(T,{children:Object.keys(s.reasonGroups).length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No disposals found for the selected date range"}):e.jsx("div",{className:"space-y-3",children:Object.entries(s.reasonGroups).map(([a,n])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs($,{variant:"outline",className:"text-sm",children:[n.count," records"]}),e.jsx("span",{className:"font-medium text-gray-800",children:a})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[n.weight.toFixed(1)," kg â€¢ KES ",n.cost.toLocaleString()]})})]},a))})})]}),e.jsxs(A,{children:[e.jsx(P,{children:e.jsx(K,{className:"text-lg",children:"Recent Disposals"})}),e.jsx(T,{children:s.records.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No disposals found for the selected date range"}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"text-left p-2 font-medium",children:"Date & Time"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Batch Numbers"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Size Classes"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Reason"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Method"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Weight (kg)"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Cost (KES)"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Created By"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Approved By"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Notes"})]})}),e.jsx("tbody",{children:s.records.slice(0,10).map(a=>{var f,c,d;const n=new Date(a.created_at);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{children:n.toLocaleDateString()}),e.jsx("div",{className:"text-gray-500",children:n.toLocaleTimeString()})]})}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"text-xs",children:(f=a.batch_numbers)!=null&&f.length?a.batch_numbers.map((F,X)=>e.jsx($,{variant:"outline",className:"text-xs mr-1 mb-1",children:F},X)):e.jsx("span",{className:"text-gray-400",children:"N/A"})})}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"text-xs",children:(c=a.size_classes)!=null&&c.length?a.size_classes.map((F,X)=>e.jsxs($,{variant:"secondary",className:"text-xs mr-1 mb-1",children:["Size ",F]},X)):e.jsx("span",{className:"text-gray-400",children:"N/A"})})}),e.jsx("td",{className:"p-2 text-xs",children:typeof a.disposal_reason=="object"?((d=a.disposal_reason)==null?void 0:d.name)||"Unknown":a.disposal_reason||"Unknown"}),e.jsx("td",{className:"p-2 text-xs",children:a.disposal_method||"N/A"}),e.jsx("td",{className:"p-2 text-xs font-medium",children:(a.total_weight_kg||0).toFixed(1)}),e.jsx("td",{className:"p-2 text-xs font-medium",children:(a.disposal_cost||0).toLocaleString()}),e.jsx("td",{className:"p-2 text-xs",children:a.created_by||"N/A"}),e.jsx("td",{className:"p-2 text-xs",children:a.approved_by||"N/A"}),e.jsx("td",{className:"p-2",children:e.jsx($,{variant:a.status==="completed"?"default":"secondary",className:"text-xs",children:a.status})}),e.jsx("td",{className:"p-2 text-xs max-w-32 truncate",title:a.notes||"",children:a.notes||"N/A"})]},a.id)})})]}),s.records.length>10&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:["Showing 10 of ",s.records.length," records"]})]})})]})]})})()]})]}),e.jsxs(A,{children:[e.jsx(P,{children:e.jsx(K,{children:"Disposal Records"})}),e.jsx(T,{children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No disposal records found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"text-left p-2 font-medium",children:"Date & Time"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Batch Numbers"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Size Classes"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Reason"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Method"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Weight (kg)"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Cost (KES)"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Created By"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Approved By"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-2 font-medium",children:"Notes"})]})}),e.jsx("tbody",{children:r.map(s=>{var n,f,c;const a=new Date(s.created_at);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{children:a.toLocaleDateString()}),e.jsx("div",{className:"text-gray-500",children:a.toLocaleTimeString()})]})}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"text-xs",children:(n=s.batch_numbers)!=null&&n.length?s.batch_numbers.map((d,F)=>e.jsx($,{variant:"outline",className:"text-xs mr-1 mb-1",children:d},F)):e.jsx("span",{className:"text-gray-400",children:"N/A"})})}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"text-xs",children:(f=s.size_classes)!=null&&f.length?s.size_classes.map((d,F)=>e.jsxs($,{variant:"secondary",className:"text-xs mr-1 mb-1",children:["Size ",d]},F)):e.jsx("span",{className:"text-gray-400",children:"N/A"})})}),e.jsx("td",{className:"p-2 text-xs",children:typeof s.disposal_reason=="object"?((c=s.disposal_reason)==null?void 0:c.name)||"Unknown":s.disposal_reason||"Unknown"}),e.jsx("td",{className:"p-2 text-xs",children:s.disposal_method||"N/A"}),e.jsx("td",{className:"p-2 text-xs font-medium",children:s.total_weight_kg.toFixed(2)}),e.jsx("td",{className:"p-2 text-xs font-medium",children:s.disposal_cost.toFixed(2)}),e.jsx("td",{className:"p-2 text-xs",children:s.created_by||"N/A"}),e.jsx("td",{className:"p-2 text-xs",children:s.approved_by||"N/A"}),e.jsx("td",{className:"p-2",children:e.jsx($,{variant:s.status==="completed"?"default":"secondary",className:"text-xs",children:s.status})}),e.jsx("td",{className:"p-2 text-xs max-w-32 truncate",title:s.notes||"",children:s.notes||"N/A"})]},s.id)})})]})})})]})]})]})};export{ys as default};
