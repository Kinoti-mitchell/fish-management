var es=Object.defineProperty,ss=Object.defineProperties;var ts=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var as=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable;var ye=(f,d,h)=>d in f?es(f,d,{enumerable:!0,configurable:!0,writable:!0,value:h}):f[d]=h,b=(f,d)=>{for(var h in d||(d={}))as.call(d,h)&&ye(f,h,d[h]);if(_e)for(var h of _e(d))is.call(d,h)&&ye(f,h,d[h]);return f},j=(f,d)=>ss(f,ts(d));var w=(f,d,h)=>new Promise((U,F)=>{var V=v=>{try{W(h.next(v))}catch($){F($)}},q=v=>{try{W(h.throw(v))}catch($){F($)}},W=v=>v.done?U(v.value):Promise.resolve(v.value).then(V,q);W((h=h.apply(f,d)).next())});import{c as ls,m as rs,r as g,j as e,M as B,B as I,L as R,I as K,e as M,a as E,b as O,f as ns,g as cs,l as T,F as ds,E as ke,N as J,w as X,o as Se,t as p}from"./index-BopqAkGc.js";import{S as De,a as ze,b as Re,c as Fe,d as A}from"./select-DMqfGFn2.js";import{T as os}from"./textarea--7cwtIbl.js";import{D as We,a as xs,b as $e,c as Ce,d as Ie}from"./dialog-mq7k2ueJ.js";import{a as hs}from"./auditLogger-BTBu8m6O.js";import{R as Ee}from"./refresh-cw-D2-kY60b.js";import{P as ms}from"./plus-snqcj8Q8.js";import{C as Oe}from"./circle-check-big-D0p4vUNm.js";import{S as us}from"./scale-DT660sby.js";import{R as gs}from"./ruler-InO5FVxo.js";import{M as ps}from"./map-pin-CXJjNCPd.js";import{C as fs}from"./index-CINu9dHP.js";import{C as bs}from"./clock-CpNLkAzZ.js";import{W as Y}from"./weight-DzzFpCsy.js";import{D as Ve}from"./dollar-sign-CCZzSQeK.js";import{S as js}from"./square-pen-D0eky8DE.js";import"./index-CtHfZV8A.js";import"./index-BYgpo3uK.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ns=ls("calculator",vs);function Ts({onNavigate:f}){var ne,ce,de,oe,xe,he,me,ue,ge,pe,fe,be,je,ve,Ne;const{user:d}=rs(),[h,U]=g.useState([]),[F,V]=g.useState(!1),[q,W]=g.useState(!0),[v,$]=g.useState(!1),[G,Z]=g.useState(!1),[C,Pe]=g.useState([]),[t,ee]=g.useState(null),[o,Le]=g.useState(null),[Me,se]=g.useState(!1),[Q,Te]=g.useState(new Set),[l,y]=g.useState({dispatchId:"",outletId:"",actualWeight:"",actualValue:"",condition:"",receivedBy:d?`${d.first_name} ${d.last_name}`:"",notes:"",sizeDiscrepancies:{}});g.useEffect(()=>{d&&y(s=>j(b({},s),{receivedBy:`${d.first_name} ${d.last_name}`}))},[d]);const te=s=>`REC${String(s+1).padStart(4,"0")}`,Ae=s=>{const i={};return s.forEach((a,n)=>{var x,c,m;const r=((m=(c=(x=a.dispatch)==null?void 0:x.outlet_order)==null?void 0:c.outlet)==null?void 0:m.name)||"Unknown Outlet";i[r]||(i[r]=[]),i[r].push(j(b({},a),{displayIndex:n}))}),i},Ue=s=>{const i=new Set(Q);i.has(s)?i.delete(s):i.add(s),Te(i)},Be=s=>{Le(s),se(!0)},H=()=>w(this,null,function*(){try{W(!0);const s=J(d==null?void 0:d.id),{data:i,error:a}=yield X(()=>w(this,null,function*(){return yield s.from("outlet_receiving").select(`
            *,
            dispatch_records!inner(
              id,
              destination,
              dispatch_date,
              outlet_orders!inner(
                id,
                order_number,
                outlets!inner(
                  id,
                  name,
                  location
                )
              )
            )
          `).order("received_date",{ascending:!1})}));if(a)throw a;const n=(i||[]).map(r=>{var x,c,m,_,k,S,u,D,N,z,we;return{id:r.id,dispatch_id:r.dispatch_id,outlet_order_id:r.outlet_order_id,received_date:r.received_date,received_by:r.received_by,expected_weight:parseFloat(r.expected_weight)||0,actual_weight_received:parseFloat(r.actual_weight_received)||0,expected_value:parseFloat(r.expected_value)||0,actual_value_received:parseFloat(r.actual_value_received)||0,condition:r.condition||"good",size_discrepancies:r.size_discrepancies||null,discrepancy_notes:r.discrepancy_notes||null,status:r.status||"confirmed",outlet_name:r.outlet_name||"Unknown",outlet_location:r.outlet_location||"Unknown",created_at:r.created_at,updated_at:r.updated_at,dispatch:{id:((x=r.dispatch_records)==null?void 0:x.id)||r.dispatch_id,destination:((c=r.dispatch_records)==null?void 0:c.destination)||"Unknown",dispatch_date:(m=r.dispatch_records)==null?void 0:m.dispatch_date,outlet_order:{order_number:((k=(_=r.dispatch_records)==null?void 0:_.outlet_orders)==null?void 0:k.order_number)||"N/A",outlet:{name:((D=(u=(S=r.dispatch_records)==null?void 0:S.outlet_orders)==null?void 0:u.outlets)==null?void 0:D.name)||r.outlet_name||"Unknown",location:((we=(z=(N=r.dispatch_records)==null?void 0:N.outlet_orders)==null?void 0:z.outlets)==null?void 0:we.location)||r.outlet_location||"Unknown"}}}}});U(n)}catch(s){const i=Se(s,"fetching receiving records");p.error(i),U([])}finally{W(!1)}}),Ke=()=>w(this,null,function*(){try{const s=J(d==null?void 0:d.id),{data:i,error:a}=yield X(()=>w(this,null,function*(){return yield s.from("dispatch_records").select(`
            id,
            outlet_order_id,
            destination,
            total_weight,
            total_value,
            size_breakdown,
            status,
            dispatch_date,
            notes,
            picking_date,
            picking_time,
            assigned_driver,
            outlet_order:outlet_orders(
              id,
              order_number,
              total_value,
              outlet:outlets(name, location, phone)
            )
          `).in("status",["in-transit","dispatched","scheduled"]).order("dispatch_date",{ascending:!1})}));if(a)throw a;return console.log("Fetched dispatches:",i),i==null||i.forEach((n,r)=>{console.log(`Dispatch ${r} size breakdown:`,n.size_breakdown)}),i||[]}catch(s){return console.error("Error fetching dispatches:",s),[]}}),P=()=>{if(!(t!=null&&t.size_breakdown))return 0;let s=0;return Object.entries(t.size_breakdown).forEach(([i,a])=>{const n=l.sizeDiscrepancies[parseInt(i)]||0,r=a+n;s+=r}),s},ae=()=>{const s=P(),i=parseFloat(l.actualWeight)||0,a=(t==null?void 0:t.size_breakdown)&&Object.keys(t.size_breakdown).length>0,n=Object.keys(l.sizeDiscrepancies).length>0;return!!(l.dispatchId&&t&&l.actualWeight&&l.actualWeight.trim()!==""&&parseFloat(l.actualWeight)>0&&l.actualValue&&l.actualValue.trim()!==""&&parseFloat(l.actualValue)>0&&l.condition&&l.condition.trim()!==""&&d&&d.id&&(!a||n)&&(s===0||Math.abs(s-i)<=.1))},qe=()=>{const s=[];(!l.dispatchId||!t)&&s.push("Please select a valid dispatch");const i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(l.dispatchId&&!i.test(l.dispatchId)&&(s.push("Invalid dispatch ID format. Please refresh and select a dispatch again."),console.error("Invalid dispatch ID:",l.dispatchId)),!l.actualWeight||l.actualWeight.trim()===""?s.push("Please enter the weight received"):parseFloat(l.actualWeight)<=0?s.push("Weight received must be greater than 0"):parseFloat(l.actualWeight)<.1&&s.push("Weight received seems too low (<0.1kg). Please verify the value"),!l.actualValue||l.actualValue.trim()===""?s.push("Please enter the value received"):parseFloat(l.actualValue)<=0&&s.push("Value received must be greater than 0"),(!l.condition||l.condition.trim()==="")&&s.push("Please select the condition of received items"),(!d||!d.id)&&s.push("User session expired. Please refresh and try again"),t){const a=t.total_weight||0,n=t.total_value||0;a>1e4&&console.warn(`âš ï¸ WARNING: Expected weight (${a}kg) seems unrealistic. Please verify dispatch data.`),n>1e6&&console.warn(`âš ï¸ WARNING: Expected value (KES ${n.toLocaleString()}) seems unrealistic. Please verify dispatch data.`)}if(t&&t.total_weight>0){const a=t.total_weight||0,n=parseFloat(l.actualWeight)||0,r=Math.abs(n-a),x=a>0?r/a*100:0;x>20&&console.warn(`Weight discrepancy is ${x.toFixed(1)}% - please verify the received weight`)}if(l.actualWeight&&isNaN(parseFloat(l.actualWeight))&&s.push("Weight received must be a valid number"),l.actualValue&&isNaN(parseFloat(l.actualValue))&&s.push("Value received must be a valid number"),t!=null&&t.size_breakdown&&Object.keys(t.size_breakdown).length>0)if(!(Object.keys(l.sizeDiscrepancies).length>0))s.push("This dispatch has size breakdown data. Please fill in the size discrepancies section below.");else{const n=P(),r=parseFloat(l.actualWeight)||0,x=Math.abs(n-r);x>.1&&s.push(`Size breakdown total (${n.toFixed(1)}kg) does not match total weight received (${r.toFixed(1)}kg). Difference: ${x.toFixed(1)}kg`)}return s},Ge=(s,i,a,n,r)=>w(this,null,function*(){try{yield hs.custom(s,i,a,{old_values:n,new_values:r})}catch(x){console.warn("Failed to log audit event:",x)}}),Qe=()=>w(this,null,function*(){var s,i,a,n,r,x;if(G){p.warning("Please wait, submission in progress...");return}try{Z(!0);const c=qe();if(c.length>0){c.forEach(u=>p.error(u));return}if(t){const u=t.total_weight||0,D=t.total_value||0,N=parseFloat(l.actualWeight)||0;u>1e4&&p.warning(`âš ï¸ Large expected weight: ${u}kg`),D>1e6&&p.warning(`âš ï¸ Large expected value: KES ${D.toLocaleString()}`),N>u&&N>1e4&&p.warning(`âš ï¸ Received weight (${N}kg) is larger than expected (${u}kg)`);const z=u>0?Math.abs(N-u)/u*100:0;z>20&&p.warning(`âš ï¸ Large discrepancy: ${z.toFixed(1)}%`)}const m={dispatch_id:l.dispatchId,outlet_order_id:t.outlet_order_id,received_date:new Date().toISOString().split("T")[0],received_by:(d==null?void 0:d.id)||null,expected_weight:parseFloat((t.total_weight||0).toString()),actual_weight_received:parseFloat(l.actualWeight)||0,expected_pieces:0,actual_pieces_received:0,expected_value:parseFloat((t.total_value||((s=t.outlet_order)==null?void 0:s.total_value)||0).toString()),actual_value_received:parseFloat(l.actualValue)||0,condition:l.condition||"good",size_discrepancies:Object.keys(l.sizeDiscrepancies).length>0?l.sizeDiscrepancies:null,discrepancy_notes:l.notes||null,status:"confirmed",outlet_name:((a=(i=t.outlet_order)==null?void 0:i.outlet)==null?void 0:a.name)||t.destination,outlet_location:((r=(n=t.outlet_order)==null?void 0:n.outlet)==null?void 0:r.location)||"Unknown"};console.log("Creating receiving record with data:",m),console.log("Form data dispatchId:",l.dispatchId),console.log("Form data dispatchId type:",typeof l.dispatchId),console.log("Selected dispatch:",t),console.log("Selected dispatch ID:",t==null?void 0:t.id),console.log("Selected dispatch ID type:",typeof(t==null?void 0:t.id));const _=J(d==null?void 0:d.id),{data:k,error:S}=yield X(()=>w(this,null,function*(){return yield _.from("outlet_receiving").insert([m]).select("id").single()}));if(S)throw S;yield _.from("dispatch_records").update({status:"delivered",updated_at:new Date().toISOString()}).eq("id",l.dispatchId);try{yield Ge("INSERT","outlet_receiving",k.id,null,j(b({},m),{entry_code:`RCV-${Date.now()}`,fish_type:t.fish_type||"Tilapia",condition:m.condition,weight_received:m.actual_weight_received,outlet_id:(x=t.outlet_order)==null?void 0:x.outlet_id,receiving_date:m.received_date}))}catch(u){console.warn("Audit logging failed (non-critical):",u)}p.success("Receiving record created successfully"),y({dispatchId:"",outletId:"",actualWeight:"",actualValue:"",condition:"",receivedBy:d?`${d.first_name} ${d.last_name}`:"",notes:"",sizeDiscrepancies:{}}),ee(null),V(!1),yield H()}catch(c){const m=Se(c,"creating receiving record");p.error(m)}finally{Z(!1)}}),He=()=>w(this,null,function*(){try{const s=yield Ke();console.log("Fetched dispatches:",s),Pe(s)}catch(s){console.error("Error loading dispatches:",s),p.error("Failed to load available dispatches")}});g.useEffect(()=>{console.log("Available dispatches updated:",C),C.forEach((s,i)=>{console.log(`Dispatch ${i}:`,{id:s.id,idType:typeof s.id,destination:s.destination,total_weight:s.total_weight,size_breakdown:s.size_breakdown})})},[C]);const Je=s=>{console.log("Selected dispatch ID:",s),console.log("Available dispatches:",C);const i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!i.test(s)){console.error("Invalid dispatch ID format:",s),p.error("Invalid dispatch selection. Please refresh and try again.");return}const a=C.find(n=>n.id===s);if(console.log("Found dispatch:",a),!a){console.error("Dispatch not found for ID:",s),p.error("Selected dispatch not found. Please refresh and try again.");return}if(!a.id||!i.test(a.id)){console.error("Dispatch has invalid ID:",a.id),p.error("Selected dispatch has invalid ID. Please refresh and try again.");return}ee(a),console.log("Selected dispatch size breakdown:",a.size_breakdown),console.log("Size breakdown keys:",a.size_breakdown?Object.keys(a.size_breakdown):"No size breakdown"),console.log("Size breakdown entries:",a.size_breakdown?Object.entries(a.size_breakdown):"No size breakdown"),y(n=>{var r,x,c,m;return j(b({},n),{dispatchId:a.id,outletId:((x=(r=a.outlet_order)==null?void 0:r.outlet)==null?void 0:x.name)||"",actualWeight:((c=a.total_weight)==null?void 0:c.toString())||"",actualValue:((m=a.total_value)==null?void 0:m.toString())||"",condition:"good"})})},Xe=()=>w(this,null,function*(){$(!0),yield H(),$(!1)});g.useEffect(()=>{H()},[]),g.useEffect(()=>{F&&He()},[F]);const ie=s=>{switch(s){case"confirmed":return"bg-emerald-500 text-white";case"disputed":return"bg-red-500 text-white";case"pending":return"bg-amber-500 text-white";default:return"bg-gray-500 text-white"}},le=s=>{switch(s){case"excellent":return"bg-green-500 text-white";case"good":return"bg-blue-500 text-white";case"fair":return"bg-orange-500 text-white";case"poor":return"bg-red-500 text-white";default:return"bg-gray-500 text-white"}},Ye=s=>`KES ${s.toLocaleString()}`,re=(s,i)=>{const a=i-s,n=s>0?(a/s*100).toFixed(1):"0";return{diff:a,percentage:n}},Ze=s=>{if(!s)return"No size discrepancies";const i=Object.entries(s).filter(([a,n])=>n!==0).map(([a,n])=>`Size ${a}: ${n>0?"+":""}${n}`);return i.length>0?i.join(", "):"No size discrepancies"},L={totalReceivings:h.length,confirmed:h.filter(s=>s.status==="confirmed").length,disputed:h.filter(s=>s.status==="disputed").length,totalValue:h.reduce((s,i)=>s+(i.actual_value_received||0),0),totalWeight:h.reduce((s,i)=>s+(i.actual_weight_received||0),0)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50 content-container responsive-padding",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl shadow-lg",children:e.jsx(B,{className:"h-10 w-10 text-white"})}),"Outlet Receiving Records"]}),e.jsx("p",{className:"text-xl text-gray-600 ml-16",children:"Track what outlets received â€¢ Size-based verification â€¢ Quality control"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(I,{variant:"outline",onClick:Xe,disabled:v,className:"px-6 py-3 rounded-2xl font-semibold",children:[e.jsx(Ee,{className:`h-5 w-5 mr-2 ${v?"animate-spin":""}`}),"Refresh"]}),e.jsxs(We,{open:F,onOpenChange:V,children:[e.jsx(xs,{asChild:!0,children:e.jsxs(I,{className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-4 rounded-2xl font-semibold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(ms,{className:"h-6 w-6 mr-3"}),"Record Receiving"]})}),e.jsxs($e,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ce,{children:[e.jsx(Ie,{className:"text-2xl font-bold text-gray-900",children:"Record Outlet Receiving"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Fields marked with ",e.jsx("span",{className:"text-red-500",children:"*"})," are required"]})]}),e.jsxs("div",{className:"space-y-6 py-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{className:"text-base font-semibold text-gray-700",children:["Select Dispatch ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(De,{value:l.dispatchId,onValueChange:Je,children:[e.jsx(ze,{className:"h-14 text-base",children:e.jsx(Re,{placeholder:"Select dispatch to receive"})}),e.jsx(Fe,{children:C.map(s=>{var i,a;return e.jsxs(A,{value:s.id,children:[((i=s.outlet_order)==null?void 0:i.order_number)||`ORD-${(a=s.id)==null?void 0:a.slice(-6)}`," - ",s.destination,s.total_weight>0?` (${s.total_weight}kg)`:" (Not picked yet)"," ","- ",s.status.toUpperCase()]},s.id)})})]})]}),t&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border-l-4 border-blue-400",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Dispatch Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Outlet:"})," ",((ce=(ne=t.outlet_order)==null?void 0:ne.outlet)==null?void 0:ce.name)||t.destination]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",((oe=(de=t.outlet_order)==null?void 0:de.outlet)==null?void 0:oe.location)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Order Number:"})," ",((xe=t.outlet_order)==null?void 0:xe.order_number)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 rounded text-xs font-medium ${t.status==="dispatched"?"bg-green-100 text-green-800":t.status==="in-transit"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expected Weight:"}),e.jsxs("span",{className:`font-medium ${t.total_weight>1e4?"text-red-600":"text-green-600"}`,children:[t.total_weight,"kg",t.total_weight>1e4&&e.jsx("span",{className:"text-xs text-red-500 ml-1",children:"âš ï¸"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expected Value:"}),e.jsxs("span",{className:`font-medium ${(t.total_value||0)>1e6?"text-red-600":"text-gray-900"}`,children:["KES ",(t.total_value||((he=t.outlet_order)==null?void 0:he.total_value)||0).toLocaleString(),(t.total_value||0)>1e6&&e.jsx("span",{className:"text-xs text-red-500 ml-1",children:"âš ï¸"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Dispatch Date:"})," ",new Date(t.dispatch_date).toLocaleDateString()]}),t.assigned_driver&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Driver:"})," ",t.assigned_driver]}),t.picking_date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Picking Date:"})," ",new Date(t.picking_date).toLocaleDateString()]})]}),t.size_breakdown&&Object.keys(t.size_breakdown).length>0?e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:"Size Breakdown Available:"}),e.jsxs("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-medium",children:[Object.keys(t.size_breakdown).length," sizes"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.size_breakdown).map(([s,i])=>e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium border border-blue-300",children:["Size ",s,": ",i,"kg"]},s))}),e.jsx("div",{className:"mt-2 text-xs text-blue-700",children:"âš ï¸ Size discrepancies must be filled below before submitting"})]}):e.jsx("div",{className:"mt-3 p-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600",children:"No size breakdown data available for this dispatch"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{className:"text-base font-semibold text-gray-700",children:["Weight Received (kg) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(K,{type:"number",step:"0.1",placeholder:"202.5",className:"h-14 text-base",value:l.actualWeight,onChange:s=>y(j(b({},l),{actualWeight:s.target.value}))}),t&&l.actualWeight&&e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-gray-600",children:["Expected: ",t.total_weight,"kg"]}),(()=>{const s=t.total_weight||0,i=parseFloat(l.actualWeight)||0,a=s-i,n=i-s,r=s>0?(n/s*100).toFixed(1):"0",x=Math.abs(n)>s*.1;return e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`${x?"text-orange-600 font-medium":"text-green-600"}`,children:n>0?`+${n.toFixed(1)}kg (${r}% over)`:n<0?`${n.toFixed(1)}kg (${r}% under)`:"Exact match"}),e.jsxs("div",{className:"text-blue-600 font-medium",children:["Remaining: ",a>0?a.toFixed(1):0,"kg"]})]})})()]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{className:"text-base font-semibold text-gray-700",children:["Value Received (KES) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(K,{type:"number",placeholder:"101250",className:"h-14 text-base",value:l.actualValue,onChange:s=>y(j(b({},l),{actualValue:s.target.value}))}),t&&l.actualValue&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Expected: KES ",(me=t.total_value)==null?void 0:me.toLocaleString()]}),(()=>{const s=t.total_value||0,a=(parseFloat(l.actualValue)||0)-s,n=s>0?(a/s*100).toFixed(1):"0",r=Math.abs(a)>s*.1;return e.jsxs("span",{className:`ml-2 ${r?"text-orange-600 font-medium":"text-green-600"}`,children:["(",a>0?"+":"","KES ",a.toLocaleString(),", ",n,"%)"]})})()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{className:"text-base font-semibold text-gray-700",children:["Quality Condition ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(De,{value:l.condition,onValueChange:s=>y(j(b({},l),{condition:s})),children:[e.jsx(ze,{className:"h-14 text-base",children:e.jsx(Re,{placeholder:"Select condition"})}),e.jsxs(Fe,{children:[e.jsx(A,{value:"excellent",children:"ðŸŸ¢ Excellent - Perfect condition"}),e.jsx(A,{value:"good",children:"ðŸ”µ Good - Minor issues"}),e.jsx(A,{value:"fair",children:"ðŸŸ¡ Fair - Some quality concerns"}),e.jsx(A,{value:"poor",children:"ðŸ”´ Poor - Significant quality issues"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{className:"text-base font-semibold text-gray-700",children:"Received By"}),e.jsx(K,{placeholder:"Staff member name",className:"h-14 text-base bg-gray-50",value:l.receivedBy,readOnly:!0,title:"Automatically set to logged-in user"})]}),(t==null?void 0:t.size_breakdown)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{className:"text-base font-semibold text-gray-700",children:["Size Discrepancies ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-blue-600"}),e.jsx("div",{className:"text-sm text-blue-800 font-medium",children:"This dispatch has size breakdown data. Please fill in the actual quantities received for each size."})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(t.size_breakdown).map(([s,i])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(R,{className:"text-sm font-medium text-gray-600",children:["Size ",s," (Expected: ",i,"kg)"]}),e.jsx(K,{type:"number",step:"0.1",placeholder:"Actual received",className:"h-10 text-sm",onChange:a=>{const r=(parseFloat(a.target.value)||0)-i;y(x=>j(b({},x),{sizeDiscrepancies:j(b({},x.sizeDiscrepancies),{[parseInt(s)]:r})}))}})]},s))}),Object.keys(l.sizeDiscrepancies).length>0&&e.jsxs("div",{className:"mt-4 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Size Breakdown Total:"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[P().toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Weight Received:"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[parseFloat(l.actualWeight||"0").toFixed(1)," kg"]})]}),(()=>{const s=P(),i=parseFloat(l.actualWeight||"0"),a=Math.abs(s-i),n=a<=.1;return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${n?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:"Match Status:"}),e.jsx("span",{className:`text-sm font-bold ${n?"text-green-600":"text-red-600"}`,children:n?"âœ… Match":`âŒ ${a.toFixed(1)}kg difference`})]})})()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{className:"text-base font-semibold text-gray-700",children:"Quality & Discrepancy Notes"}),e.jsx(os,{placeholder:"Any quality issues, missing items, or other discrepancies...",className:"h-24 text-base",value:l.notes,onChange:s=>y(j(b({},l),{notes:s.target.value}))})]}),e.jsxs("div",{className:"flex flex-col gap-4 pt-6",children:[!ae()&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-amber-600"}),e.jsx("div",{className:"text-sm text-amber-800 font-medium",children:(()=>{const s=P(),i=parseFloat(l.actualWeight||"0"),a=Math.abs(s-i),n=(t==null?void 0:t.size_breakdown)&&Object.keys(t.size_breakdown).length>0,r=Object.keys(l.sizeDiscrepancies).length>0;return n&&!r?"This dispatch has size breakdown data. Please fill in the size discrepancies section below.":s>0&&a>.1?`Size breakdown total (${s.toFixed(1)}kg) does not match total weight (${i.toFixed(1)}kg). Please adjust the values.`:"Please fill in all required fields to continue"})()})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(I,{variant:"outline",onClick:()=>V(!1),className:"px-8 py-3 text-base",children:"Cancel"}),e.jsx(I,{onClick:Qe,disabled:G||!ae(),className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 px-8 py-3 text-base disabled:opacity-50 disabled:cursor-not-allowed",children:G?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-4 h-4 mr-2 animate-spin"}),"Recording..."]}):"Record Receiving"})]})]})]})]})]})]})," "]}),"   ",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(E,{className:"border-0 shadow-xl bg-gradient-to-br from-green-50 to-emerald-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(O,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wide",children:"Total Records"}),e.jsx("p",{className:"text-4xl font-bold text-green-900 mt-2",children:L.totalReceivings})]}),e.jsx("div",{className:"p-4 bg-green-600 rounded-2xl shadow-lg",children:e.jsx(B,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(E,{className:"border-0 shadow-xl bg-gradient-to-br from-emerald-50 to-green-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(O,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-600 uppercase tracking-wide",children:"Confirmed"}),e.jsx("p",{className:"text-4xl font-bold text-emerald-900 mt-2",children:L.confirmed})]}),e.jsx("div",{className:"p-4 bg-emerald-600 rounded-2xl shadow-lg",children:e.jsx(Oe,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(E,{className:"border-0 shadow-xl bg-gradient-to-br from-red-50 to-red-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(O,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-red-600 uppercase tracking-wide",children:"Disputed"}),e.jsx("p",{className:"text-4xl font-bold text-red-900 mt-2",children:L.disputed})]}),e.jsx("div",{className:"p-4 bg-red-600 rounded-2xl shadow-lg",children:e.jsx(M,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(E,{className:"border-0 shadow-xl bg-gradient-to-br from-blue-50 to-blue-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(O,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wide",children:"Total Weight"}),e.jsx("p",{className:"text-4xl font-bold text-blue-900 mt-2",children:L.totalWeight.toFixed(1)}),e.jsx("p",{className:"text-sm text-blue-600",children:"kg"})]}),e.jsx("div",{className:"p-4 bg-blue-600 rounded-2xl shadow-lg",children:e.jsx(us,{className:"h-8 w-8 text-white"})})]})})}),e.jsx(E,{className:"border-0 shadow-xl bg-gradient-to-br from-purple-50 to-purple-100 hover:shadow-2xl transition-all duration-300",children:e.jsx(O,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wide",children:"Total Value"}),e.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-2",children:Ye(L.totalValue)})]}),e.jsx("div",{className:"p-4 bg-purple-600 rounded-2xl shadow-lg",children:e.jsx(Ns,{className:"h-8 w-8 text-white"})})]})})})]}),e.jsxs(E,{className:"border-0 shadow-2xl bg-white/80 backdrop-blur-sm",children:[e.jsx(ns,{className:"pb-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-t-3xl",children:e.jsxs(cs,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(gs,{className:"h-8 w-8 text-green-600"}),"Receiving Records by Size"]})}),e.jsx(O,{className:"p-8",children:q?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading receiving records..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No receiving records found"}),e.jsx("p",{className:"text-gray-500",children:"Start by recording your first outlet receiving"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(Ae(h)).map(([s,i])=>{var a,n,r,x;return e.jsxs("div",{className:"border-2 border-gray-100 rounded-3xl p-6 hover:shadow-xl transition-all duration-300 bg-gradient-to-r from-white to-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>Ue(s),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ps,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s}),e.jsx("p",{className:"text-sm text-gray-500",children:((x=(r=(n=(a=i[0])==null?void 0:a.dispatch)==null?void 0:n.outlet_order)==null?void 0:r.outlet)==null?void 0:x.location)||"Unknown Location"})]})]}),e.jsxs(T,{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:[i.length," ",i.length===1?"Order":"Orders"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Total Received: ",i.reduce((c,m)=>c+(m.actual_weight_received||0),0).toFixed(1)," kg"]}),e.jsx(fs,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 ${Q.has(s)?"rotate-180":""}`})]})]}),Q.has(s)&&e.jsx("div",{className:"mt-6 space-y-4",children:i.map((c,m)=>{var S,u,D,N,z;const _=re(c.expected_weight||0,c.actual_weight_received||0),k=re(c.expected_value||0,c.actual_value_received||0);return e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:te(c.displayIndex||m)})]}),e.jsx(T,{className:`text-sm font-semibold px-3 py-1 rounded-xl ${ie(c.status)}`,children:c.status.toUpperCase()}),e.jsx(T,{className:`text-sm font-semibold px-3 py-1 rounded-xl ${le(c.condition)}`,children:c.condition.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(ds,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium",children:["Order: ",((u=(S=c.dispatch)==null?void 0:S.outlet_order)==null?void 0:u.order_number)||`ORD-${(D=c.dispatch_id)==null?void 0:D.slice(-6)}`]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Dispatch: ",((N=c.dispatch)==null?void 0:N.destination)||`DSP-${(z=c.dispatch_id)==null?void 0:z.slice(-6)}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(Oe,{className:"h-4 w-4 text-purple-500"}),e.jsxs("span",{className:"text-sm font-medium",children:["By: ",c.received_by_user?`${c.received_by_user.first_name} ${c.received_by_user.last_name}`:"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(bs,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(c.received_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(Y,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[c.actual_weight_received||0," kg"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Y,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Weight"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Expected:"}),e.jsxs("span",{className:"font-medium",children:[c.expected_weight||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Received:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[c.actual_weight_received||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Diff:"}),e.jsxs("span",{className:`font-medium ${_.diff>=0?"text-green-600":"text-red-600"}`,children:[_.diff>=0?"+":"",_.diff.toFixed(2)," kg"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Value"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Expected:"}),e.jsxs("span",{className:"font-medium",children:["KSh ",(c.expected_value||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Received:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["KSh ",(c.actual_value_received||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Diff:"}),e.jsxs("span",{className:`font-medium ${k.diff>=0?"text-green-600":"text-red-600"}`,children:[k.diff>=0?"+":"","KSh ",k.diff.toLocaleString()]})]})]})]})]}),c.discrepancy_notes&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-yellow-800 text-sm mb-1",children:"Discrepancy Notes"}),e.jsx("div",{className:"text-xs text-yellow-700",children:c.discrepancy_notes})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(I,{variant:"outline",size:"sm",className:"h-10 px-4 border-2 border-blue-200 text-blue-700 hover:bg-blue-50 hover:border-blue-300",onClick:()=>Be(c),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"h-10 px-4 border-2 border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})},c.id)})})]},s)})})})]})]}),e.jsx(We,{open:Me,onOpenChange:se,children:e.jsxs($e,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ce,{children:e.jsxs(Ie,{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(ke,{className:"h-6 w-6 text-blue-600"}),"Receiving Record Details - ",o&&te(0)]})}),o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Outlet Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",((pe=(ge=(ue=o.dispatch)==null?void 0:ue.outlet_order)==null?void 0:ge.outlet)==null?void 0:pe.name)||"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",((je=(be=(fe=o.dispatch)==null?void 0:fe.outlet_order)==null?void 0:be.outlet)==null?void 0:je.location)||"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Order Number:"})," ",((Ne=(ve=o.dispatch)==null?void 0:ve.outlet_order)==null?void 0:Ne.order_number)||"N/A"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"Receiving Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Received By:"})," ",o.received_by_user?`${o.received_by_user.first_name} ${o.received_by_user.last_name}`:"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(o.received_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",e.jsx(T,{className:ie(o.status),children:o.status.toUpperCase()})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5 text-blue-600"}),"Weight Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expected Weight:"}),e.jsxs("span",{className:"font-medium",children:[o.expected_weight||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Actual Weight:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[o.actual_weight_received||0," kg"]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Difference:"}),e.jsxs("span",{className:`font-medium ${(o.actual_weight_received||0)>=(o.expected_weight||0)?"text-green-600":"text-red-600"}`,children:[(o.actual_weight_received||0)-(o.expected_weight||0)>=0?"+":"",((o.actual_weight_received||0)-(o.expected_weight||0)).toFixed(2)," kg"]})]})]})]})}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-purple-600"}),"Value Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Expected Value"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["KSh ",(o.expected_value||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Actual Value"}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["KSh ",(o.actual_value_received||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Difference"}),e.jsxs("div",{className:`text-lg font-bold ${(o.actual_value_received||0)-(o.expected_value||0)>=0?"text-green-600":"text-red-600"}`,children:[(o.actual_value_received||0)-(o.expected_value||0)>=0?"+":"","KSh ",((o.actual_value_received||0)-(o.expected_value||0)).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-orange-900 mb-3",children:"Condition"}),e.jsx(T,{className:le(o.condition),children:o.condition.toUpperCase()})]}),o.discrepancy_notes&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-yellow-600"}),"Discrepancy Notes"]}),e.jsx("p",{className:"text-sm text-yellow-800",children:o.discrepancy_notes})]})]}),o.size_discrepancies&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Size Discrepancies"}),e.jsx("div",{className:"text-sm text-gray-700",children:Ze(o.size_discrepancies)})]})]})]})})]})}export{Ts as default};
