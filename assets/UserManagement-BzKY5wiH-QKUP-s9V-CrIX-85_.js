const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D0a7Ul_G.js","assets/index-c8IhzymI.css"])))=>i.map(i=>d[i]);
import{w as i,c as e,M as Ue,r as oe,n as M,Z as qe,aa as ne,d as ss,B as te,P as xe,O as ve,l as z,a as ie,_ as F,q as rr,Q as me,ab as tr,b as us,$ as aa,e as ra,S as D,ac as ir,Y as os,J as U,T as L,V as nr,ad as lr,E as ks,y as Ps,h as As,f as or,p as pa,F as ga,X as $s,G as Us,K as qs,g as fa,j as ta,k as cr,z as Ye,s as dr,v as as,u as ys,A as Ie,ae as $e,af as mr}from"./index-D0a7Ul_G.js";import{_ as je,j as be,C as we,N as Ne,P as T,T as ia,E as hr}from"./select-DqWpyIkf-D_8tzK0d-BBn-WGEA.js";import{V as Ve,_ as Le,H as Oe,C as Fe,E as Te}from"./dialog-NtgNh5u1-2hJTriox-IAMkB2HC.js";import{B as ur,H as xr,U as Ee,Y as Me}from"./tabs-9nFB2894-B8eEHWCc-CFcUwTFZ.js";import{v as Ds,h as Rs,y as Be,j as Z,N as Es,w as Y,x as na}from"./table-CAL6gWyU-CwnFeCJe-DbQ5m2wV.js";import{v as Ms}from"./textarea-TOFJikG_-C72QqR98-D5hWOVfE.js";import{v as pr}from"./auditLogger-DsAnB0jd-BH5jyDaI-BCBSj_dH.js";import{y as gr}from"./index-B7iGXlpc-YR4igk-O-CmE8Ucvu.js";import{a as zs,s as fr}from"./index-io8wS31O-C_L8DqSR-BTUohV_t.js";import{o as Ws}from"./search-BLXOOEcj-BfErFHpQ-DLGkxSNR.js";import{c as yr}from"./user-DBfDT442-BxnNG84M-Bt4n1aDq.js";import{h as ya}from"./chevron-right-DTnlI_34-Bu_ud7Vy-BJQJSPhZ.js";import{p as xs}from"./circle-check-big-BZ9nasO6-BWVBSi9U-D_bzRs9E.js";import{y as la}from"./download-cYb9BEHt-BKKeRdQe-9aZ5Dx7S.js";import{r as va}from"./settings-sF8YfQqu-C8NtKH81-DK-zFTFh.js";import{h as vr}from"./file-text-35uk4vLR-D2sbaJVA-BaZwXqWF.js";import{e as ds}from"./activity-CcEyukxx-Bq8KH6V5-BRGFv_8G.js";import{i as ja}from"./clock-sArWPAJm-BmsKQooK-qn3wSWAF.js";import{e as Vs}from"./building-2-DwnJS45a-o2Atf5vx-dKfe0ydE.js";import{p as es}from"./plus-FJ0CIBRX-DLM2sgk0-DVYylXdR.js";import{p as Ls}from"./phone-RCWEg5es-CV2PNXYE-DuXONPnz.js";import{p as cs}from"./square-pen-BXk3qRWQ-BrUlDIvM-BHIo8QnW.js";import{o as oa}from"./map-pin-C-M6umvy-CUBiYWs8-BzOTRlrX.js";import{h as ca}from"./refresh-cw-BlPh9kri-DxVFEABi-aZB1kqTg.js";import"./index-CEgc-Zw--jggqibQ8-DNEgScq_.js";const ms=(a,t=ms,r=t.f||(t.f=["assets/index-Cx51dYQZ.js","assets/index-c8IhzymI.css"]))=>a.map(n=>r[n]),hs=(a,t=hs,r=t.f||(t.f=["assets/index-CpNFiXA1.js","assets/index-c8IhzymI.css"]))=>a.map(n=>r[n]);var jr=Object.defineProperty,br=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,ps=Object.getOwnPropertySymbols,ba=Object.prototype.hasOwnProperty,wa=Object.prototype.propertyIsEnumerable,da=(a,t,r)=>t in a?jr(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,d=(a,t)=>{for(var r in t||(t={}))ba.call(t,r)&&da(a,r,t[r]);if(ps)for(var r of ps(t))wa.call(t,r)&&da(a,r,t[r]);return a},u=(a,t)=>br(a,wr(t)),Q=(a,t)=>{var r={};for(var n in a)ba.call(a,n)&&t.indexOf(n)<0&&(r[n]=a[n]);if(a!=null&&ps)for(var n of ps(a))t.indexOf(n)<0&&wa.call(a,n)&&(r[n]=a[n]);return r},H=(a,t,r)=>new Promise((n,m)=>{var l=y=>{try{f(r.next(y))}catch(x){m(x)}},c=y=>{try{f(r.throw(y))}catch(x){m(x)}},f=y=>y.done?n(y.value):Promise.resolve(y.value).then(l,c);f((r=r.apply(a,t)).next())});/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Nr=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Is=oe("clipboard-list",Nr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _r=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],vs=oe("crown",_r);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Cr=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Sr=oe("database",Cr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const kr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],Pr=oe("file-chart-column-increasing",kr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ar=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Dr=oe("info",Ar);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Rr=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Er=oe("key",Rr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Mr=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],ma=oe("mail",Mr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Vr=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ha=oe("send",Vr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Lr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Or=oe("shield-check",Lr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Fr=[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]],ze=oe("tractor",Fr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Tr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$r=oe("user-minus",Tr);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ur=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qr=oe("user-plus",Ur);/**
* @license lucide-react v0.487.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const zr=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],ua=oe("wheat",zr);function Ir(a,t){return i.useReducer((r,n)=>{const m=t[r][n];return m!=null?m:r},a)}var Xs="ScrollArea",[Na,Ot]=dr(Xs),[Hr,he]=Na(Xs),_a=i.forwardRef((a,t)=>{const r=a,{__scopeScrollArea:n,type:m="hover",dir:l,scrollHideDelay:c=600}=r,f=Q(r,["__scopeScrollArea","type","dir","scrollHideDelay"]),[y,x]=i.useState(null),[S,j]=i.useState(null),[A,v]=i.useState(null),[E,k]=i.useState(null),[I,le]=i.useState(null),[g,N]=i.useState(0),[R,W]=i.useState(0),[$,ce]=i.useState(!1),[p,h]=i.useState(!1),_=Ye(t,G=>x(G)),C=gr(l);return e.jsx(Hr,{scope:n,type:m,dir:C,scrollHideDelay:c,scrollArea:y,viewport:S,onViewportChange:j,content:A,onContentChange:v,scrollbarX:E,onScrollbarXChange:k,scrollbarXEnabled:$,onScrollbarXEnabledChange:ce,scrollbarY:I,onScrollbarYChange:le,scrollbarYEnabled:p,onScrollbarYEnabledChange:h,onCornerWidthChange:N,onCornerHeightChange:W,children:e.jsx(as.div,u(d({dir:C},f),{ref:_,style:d({position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":R+"px"},a.style)}))})});_a.displayName=Xs;var Ca="ScrollAreaViewport",Sa=i.forwardRef((a,t)=>{const r=a,{__scopeScrollArea:n,children:m,nonce:l}=r,c=Q(r,["__scopeScrollArea","children","nonce"]),f=he(Ca,n),y=i.useRef(null),x=Ye(t,y,f.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(as.div,u(d({"data-radix-scroll-area-viewport":""},c),{ref:x,style:d({overflowX:f.scrollbarXEnabled?"scroll":"hidden",overflowY:f.scrollbarYEnabled?"scroll":"hidden"},a.style),children:e.jsx("div",{ref:f.onContentChange,style:{minWidth:"100%",display:"table"},children:m})}))]})});Sa.displayName=Ca;var ge="ScrollAreaScrollbar",ka=i.forwardRef((a,t)=>{const r=a,{forceMount:n}=r,m=Q(r,["forceMount"]),l=he(ge,a.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:f}=l,y=a.orientation==="horizontal";return i.useEffect(()=>(y?c(!0):f(!0),()=>{y?c(!1):f(!1)}),[y,c,f]),l.type==="hover"?e.jsx(Wr,u(d({},m),{ref:t,forceMount:n})):l.type==="scroll"?e.jsx(Xr,u(d({},m),{ref:t,forceMount:n})):l.type==="auto"?e.jsx(Pa,u(d({},m),{ref:t,forceMount:n})):l.type==="always"?e.jsx(Bs,u(d({},m),{ref:t})):null});ka.displayName=ge;var Wr=i.forwardRef((a,t)=>{const r=a,{forceMount:n}=r,m=Q(r,["forceMount"]),l=he(ge,a.__scopeScrollArea),[c,f]=i.useState(!1);return i.useEffect(()=>{const y=l.scrollArea;let x=0;if(y){const S=()=>{window.clearTimeout(x),f(!0)},j=()=>{x=window.setTimeout(()=>f(!1),l.scrollHideDelay)};return y.addEventListener("pointerenter",S),y.addEventListener("pointerleave",j),()=>{window.clearTimeout(x),y.removeEventListener("pointerenter",S),y.removeEventListener("pointerleave",j)}}},[l.scrollArea,l.scrollHideDelay]),e.jsx(ys,{present:n||c,children:e.jsx(Pa,u(d({"data-state":c?"visible":"hidden"},m),{ref:t}))})}),Xr=i.forwardRef((a,t)=>{const r=a,{forceMount:n}=r,m=Q(r,["forceMount"]),l=he(ge,a.__scopeScrollArea),c=a.orientation==="horizontal",f=bs(()=>x("SCROLL_END"),100),[y,x]=Ir("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(y==="idle"){const S=window.setTimeout(()=>x("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(S)}},[y,l.scrollHideDelay,x]),i.useEffect(()=>{const S=l.viewport,j=c?"scrollLeft":"scrollTop";if(S){let A=S[j];const v=()=>{const E=S[j];A!==E&&(x("SCROLL"),f()),A=E};return S.addEventListener("scroll",v),()=>S.removeEventListener("scroll",v)}},[l.viewport,c,x,f]),e.jsx(ys,{present:n||y!=="hidden",children:e.jsx(Bs,u(d({"data-state":y==="hidden"?"hidden":"visible"},m),{ref:t,onPointerEnter:Ie(a.onPointerEnter,()=>x("POINTER_ENTER")),onPointerLeave:Ie(a.onPointerLeave,()=>x("POINTER_LEAVE"))}))})}),Pa=i.forwardRef((a,t)=>{const r=he(ge,a.__scopeScrollArea),n=a,{forceMount:m}=n,l=Q(n,["forceMount"]),[c,f]=i.useState(!1),y=a.orientation==="horizontal",x=bs(()=>{if(r.viewport){const S=r.viewport.offsetWidth<r.viewport.scrollWidth,j=r.viewport.offsetHeight<r.viewport.scrollHeight;f(y?S:j)}},10);return Ze(r.viewport,x),Ze(r.content,x),e.jsx(ys,{present:m||c,children:e.jsx(Bs,u(d({"data-state":c?"visible":"hidden"},l),{ref:t}))})}),Bs=i.forwardRef((a,t)=>{const r=a,{orientation:n="vertical"}=r,m=Q(r,["orientation"]),l=he(ge,a.__scopeScrollArea),c=i.useRef(null),f=i.useRef(0),[y,x]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),S=Ma(y.viewport,y.content),j=u(d({},m),{sizes:y,onSizesChange:x,hasThumb:S>0&&S<1,onThumbChange:v=>c.current=v,onThumbPointerUp:()=>f.current=0,onThumbPointerDown:v=>f.current=v});function A(v,E){return Jr(v,f.current,y,E)}return n==="horizontal"?e.jsx(Br,u(d({},j),{ref:t,onThumbPositionChange:()=>{if(l.viewport&&c.current){const v=l.viewport.scrollLeft,E=xa(v,y,l.dir);c.current.style.transform=`translate3d(${E}px, 0, 0)`}},onWheelScroll:v=>{l.viewport&&(l.viewport.scrollLeft=v)},onDragScroll:v=>{l.viewport&&(l.viewport.scrollLeft=A(v,l.dir))}})):n==="vertical"?e.jsx(Gr,u(d({},j),{ref:t,onThumbPositionChange:()=>{if(l.viewport&&c.current){const v=l.viewport.scrollTop,E=xa(v,y);c.current.style.transform=`translate3d(0, ${E}px, 0)`}},onWheelScroll:v=>{l.viewport&&(l.viewport.scrollTop=v)},onDragScroll:v=>{l.viewport&&(l.viewport.scrollTop=A(v))}})):null}),Br=i.forwardRef((a,t)=>{const r=a,{sizes:n,onSizesChange:m}=r,l=Q(r,["sizes","onSizesChange"]),c=he(ge,a.__scopeScrollArea),[f,y]=i.useState(),x=i.useRef(null),S=Ye(t,x,c.onScrollbarXChange);return i.useEffect(()=>{x.current&&y(getComputedStyle(x.current))},[x]),e.jsx(Da,u(d({"data-orientation":"horizontal"},l),{ref:S,sizes:n,style:d({bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":js(n)+"px"},a.style),onThumbPointerDown:j=>a.onThumbPointerDown(j.x),onDragScroll:j=>a.onDragScroll(j.x),onWheelScroll:(j,A)=>{if(c.viewport){const v=c.viewport.scrollLeft+j.deltaX;a.onWheelScroll(v),La(v,A)&&j.preventDefault()}},onResize:()=>{x.current&&c.viewport&&f&&m({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:x.current.clientWidth,paddingStart:fs(f.paddingLeft),paddingEnd:fs(f.paddingRight)}})}}))}),Gr=i.forwardRef((a,t)=>{const r=a,{sizes:n,onSizesChange:m}=r,l=Q(r,["sizes","onSizesChange"]),c=he(ge,a.__scopeScrollArea),[f,y]=i.useState(),x=i.useRef(null),S=Ye(t,x,c.onScrollbarYChange);return i.useEffect(()=>{x.current&&y(getComputedStyle(x.current))},[x]),e.jsx(Da,u(d({"data-orientation":"vertical"},l),{ref:S,sizes:n,style:d({top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":js(n)+"px"},a.style),onThumbPointerDown:j=>a.onThumbPointerDown(j.y),onDragScroll:j=>a.onDragScroll(j.y),onWheelScroll:(j,A)=>{if(c.viewport){const v=c.viewport.scrollTop+j.deltaY;a.onWheelScroll(v),La(v,A)&&j.preventDefault()}},onResize:()=>{x.current&&c.viewport&&f&&m({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:x.current.clientHeight,paddingStart:fs(f.paddingTop),paddingEnd:fs(f.paddingBottom)}})}}))}),[Zr,Aa]=Na(ge),Da=i.forwardRef((a,t)=>{const r=a,{__scopeScrollArea:n,sizes:m,hasThumb:l,onThumbChange:c,onThumbPointerUp:f,onThumbPointerDown:y,onThumbPositionChange:x,onDragScroll:S,onWheelScroll:j,onResize:A}=r,v=Q(r,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),E=he(ge,n),[k,I]=i.useState(null),le=Ye(t,_=>I(_)),g=i.useRef(null),N=i.useRef(""),R=E.viewport,W=m.content-m.viewport,$=$e(j),ce=$e(x),p=bs(A,10);function h(_){if(g.current){const C=_.clientX-g.current.left,G=_.clientY-g.current.top;S({x:C,y:G})}}return i.useEffect(()=>{const _=C=>{const G=C.target;k!=null&&k.contains(G)&&$(C,W)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[R,k,W,$]),i.useEffect(ce,[m,ce]),Ze(k,p),Ze(E.content,p),e.jsx(Zr,{scope:n,scrollbar:k,hasThumb:l,onThumbChange:$e(c),onThumbPointerUp:$e(f),onThumbPositionChange:ce,onThumbPointerDown:$e(y),children:e.jsx(as.div,u(d({},v),{ref:le,style:d({position:"absolute"},v.style),onPointerDown:Ie(a.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),g.current=k.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E.viewport&&(E.viewport.style.scrollBehavior="auto"),h(_))}),onPointerMove:Ie(a.onPointerMove,h),onPointerUp:Ie(a.onPointerUp,_=>{const C=_.target;C.hasPointerCapture(_.pointerId)&&C.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=N.current,E.viewport&&(E.viewport.style.scrollBehavior=""),g.current=null})}))})}),gs="ScrollAreaThumb",Ra=i.forwardRef((a,t)=>{const r=a,{forceMount:n}=r,m=Q(r,["forceMount"]),l=Aa(gs,a.__scopeScrollArea);return e.jsx(ys,{present:n||l.hasThumb,children:e.jsx(Yr,d({ref:t},m))})}),Yr=i.forwardRef((a,t)=>{const r=a,{__scopeScrollArea:n,style:m}=r,l=Q(r,["__scopeScrollArea","style"]),c=he(gs,n),f=Aa(gs,n),{onThumbPositionChange:y}=f,x=Ye(t,A=>f.onThumbChange(A)),S=i.useRef(void 0),j=bs(()=>{S.current&&(S.current(),S.current=void 0)},100);return i.useEffect(()=>{const A=c.viewport;if(A){const v=()=>{if(j(),!S.current){const E=Kr(A,y);S.current=E,y()}};return y(),A.addEventListener("scroll",v),()=>A.removeEventListener("scroll",v)}},[c.viewport,j,y]),e.jsx(as.div,u(d({"data-state":f.hasThumb?"visible":"hidden"},l),{ref:x,style:d({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},m),onPointerDownCapture:Ie(a.onPointerDownCapture,A=>{const v=A.target.getBoundingClientRect(),E=A.clientX-v.left,k=A.clientY-v.top;f.onThumbPointerDown({x:E,y:k})}),onPointerUp:Ie(a.onPointerUp,f.onThumbPointerUp)}))});Ra.displayName=gs;var Gs="ScrollAreaCorner",Ea=i.forwardRef((a,t)=>{const r=he(Gs,a.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(Qr,u(d({},a),{ref:t})):null});Ea.displayName=Gs;var Qr=i.forwardRef((a,t)=>{const r=a,{__scopeScrollArea:n}=r,m=Q(r,["__scopeScrollArea"]),l=he(Gs,n),[c,f]=i.useState(0),[y,x]=i.useState(0),S=!!(c&&y);return Ze(l.scrollbarX,()=>{var j;const A=((j=l.scrollbarX)==null?void 0:j.offsetHeight)||0;l.onCornerHeightChange(A),x(A)}),Ze(l.scrollbarY,()=>{var j;const A=((j=l.scrollbarY)==null?void 0:j.offsetWidth)||0;l.onCornerWidthChange(A),f(A)}),S?e.jsx(as.div,u(d({},m),{ref:t,style:d({width:c,height:y,position:"absolute",right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:0},a.style)})):null});function fs(a){return a?parseInt(a,10):0}function Ma(a,t){const r=a/t;return isNaN(r)?0:r}function js(a){const t=Ma(a.viewport,a.content),r=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,n=(a.scrollbar.size-r)*t;return Math.max(n,18)}function Jr(a,t,r,n="ltr"){const m=js(r),l=m/2,c=t||l,f=m-c,y=r.scrollbar.paddingStart+c,x=r.scrollbar.size-r.scrollbar.paddingEnd-f,S=r.content-r.viewport,j=n==="ltr"?[0,S]:[S*-1,0];return Va([y,x],j)(a)}function xa(a,t,r="ltr"){const n=js(t),m=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-m,c=t.content-t.viewport,f=l-n,y=r==="ltr"?[0,c]:[c*-1,0],x=hr(a,y);return Va([0,c],[0,f])(x)}function Va(a,t){return r=>{if(a[0]===a[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(a[1]-a[0]);return t[0]+n*(r-a[0])}}function La(a,t){return a>0&&a<t}var Kr=(a,t=()=>{})=>{let r={left:a.scrollLeft,top:a.scrollTop},n=0;return function m(){const l={left:a.scrollLeft,top:a.scrollTop},c=r.left!==l.left,f=r.top!==l.top;(c||f)&&t(),r=l,n=window.requestAnimationFrame(m)}(),()=>window.cancelAnimationFrame(n)};function bs(a,t){const r=$e(a),n=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(n.current),[]),i.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Ze(a,t){const r=$e(t);mr(()=>{let n=0;if(a){const m=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return m.observe(a),()=>{window.cancelAnimationFrame(n),m.unobserve(a)}}},[a,r])}var et=_a,st=Sa,at=Ea;function Hs(a){var t=a,{className:r,children:n}=t,m=Q(t,["className","children"]);return e.jsxs(et,u(d({"data-slot":"scroll-area",className:pa("relative",r)},m),{children:[e.jsx(st,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:n}),e.jsx(rt,{}),e.jsx(at,{})]}))}function rt(a){var t=a,{className:r,orientation:n="vertical"}=t,m=Q(t,["className","orientation"]);return e.jsx(ka,u(d({"data-slot":"scroll-area-scrollbar",orientation:n,className:pa("flex touch-none p-px transition-colors select-none",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",r)},m),{children:e.jsx(Ra,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})}))}const Ge=[{id:"*",name:"All Permissions",description:"Full system access - can do everything (Admin only)",category:"System Administration",icon:"Crown"},{id:"manage_users",name:"Manage Users",description:"Create, edit, and delete user accounts and roles",category:"System Administration",icon:"Users"},{id:"view_audit_logs",name:"View Audit Logs",description:"Access system audit logs and activity history",category:"System Administration",icon:"FileText"},{id:"export_data",name:"Export Data",description:"Export system data in various formats",category:"System Administration",icon:"Download"},{id:"view_dashboard",name:"View Dashboard",description:"Access the main dashboard and overview",category:"Dashboard & Overview",icon:"Home"},{id:"view_fish_entry",name:"View Fish Entry",description:"View fish entry records and warehouse operations",category:"Fish Entry & Warehouse",icon:"Warehouse"},{id:"manage_fish_entry",name:"Manage Fish Entry",description:"Create and update fish entry records",category:"Fish Entry & Warehouse",icon:"Warehouse"},{id:"view_warehouse",name:"View Warehouse",description:"View warehouse storage and operations",category:"Fish Entry & Warehouse",icon:"Package"},{id:"manage_warehouse",name:"Manage Warehouse",description:"Update warehouse storage and operations",category:"Fish Entry & Warehouse",icon:"Package"},{id:"view_processing",name:"View Processing",description:"View fish processing operations and records",category:"Processing Operations",icon:"Scissors"},{id:"manage_processing",name:"Manage Processing",description:"Create and update fish processing operations",category:"Processing Operations",icon:"Scissors"},{id:"view_sorting",name:"View Sorting",description:"View fish sorting operations and records",category:"Processing Operations",icon:"Filter"},{id:"manage_sorting",name:"Manage Sorting",description:"Create and update fish sorting operations",category:"Processing Operations",icon:"Filter"},{id:"view_inventory",name:"View Inventory",description:"View fish inventory and stock levels",category:"Inventory Management",icon:"Package"},{id:"manage_inventory",name:"Manage Inventory",description:"Update inventory records and stock levels",category:"Inventory Management",icon:"Package"},{id:"view_outlet_orders",name:"View Outlet Orders",description:"View outlet order records and status",category:"Outlet Operations",icon:"ShoppingCart"},{id:"manage_outlet_orders",name:"Manage Outlet Orders",description:"Create and update outlet orders",category:"Outlet Operations",icon:"ShoppingCart"},{id:"view_outlet_receiving",name:"View Outlet Receiving",description:"View outlet receiving records and confirmations",category:"Outlet Operations",icon:"CheckSquare"},{id:"manage_outlet_receiving",name:"Manage Outlet Receiving",description:"Update outlet receiving records and confirmations",category:"Outlet Operations",icon:"CheckSquare"},{id:"view_dispatch",name:"View Dispatch",description:"View dispatch operations and delivery records",category:"Dispatch & Delivery",icon:"Truck"},{id:"manage_dispatch",name:"Manage Dispatch",description:"Create and update dispatch operations",category:"Dispatch & Delivery",icon:"Truck"},{id:"view_delivery",name:"View Delivery",description:"View delivery records and status",category:"Dispatch & Delivery",icon:"Truck"},{id:"manage_delivery",name:"Manage Delivery",description:"Update delivery records and status",category:"Dispatch & Delivery",icon:"Truck"},{id:"view_disposal",name:"View Disposal",description:"View disposal records and waste management",category:"Disposal Management",icon:"Trash2"},{id:"manage_disposal",name:"Manage Disposal",description:"Create and update disposal records",category:"Disposal Management",icon:"Trash2"},{id:"view_clients",name:"View Clients",description:"View client information and records",category:"Client Management",icon:"Users"},{id:"manage_clients",name:"Manage Clients",description:"Create and update client records",category:"Client Management",icon:"Users"},{id:"view_reports",name:"View Reports",description:"View system reports and analytics",category:"Reports & Analytics",icon:"BarChart3"},{id:"export_reports",name:"Export Reports",description:"Export reports to CSV and other formats",category:"Reports & Analytics",icon:"Download"}],Os=["System Administration","Dashboard & Overview","Fish Entry & Warehouse","Processing Operations","Inventory Management","Outlet Operations","Dispatch & Delivery","Disposal Management","Client Management","Reports & Analytics"];function tt({selectedPermissions:a,onPermissionsChange:t,className:r=""}){const[n,m]=i.useState(!1),[l,c]=i.useState(""),[f,y]=i.useState(Os),x=i.useRef(null);i.useEffect(()=>{const g=R=>{x.current&&!x.current.contains(R.target)&&(m(!1),c(""))},N=R=>{R.key==="Escape"&&(m(!1),c(""))};return n&&(document.addEventListener("mousedown",g),document.addEventListener("keydown",N)),()=>{document.removeEventListener("mousedown",g),document.removeEventListener("keydown",N)}},[n]);const S=Ge.filter(g=>g.name.toLowerCase().includes(l.toLowerCase())||g.description.toLowerCase().includes(l.toLowerCase())||g.category.toLowerCase().includes(l.toLowerCase())),j=Os.reduce((g,N)=>(g[N]=S.filter(R=>R.category===N),g),{}),A=g=>{if(g==="*")t(["*"]);else{const N=a.filter($=>$!=="*"),R=N.includes(g)?N.filter($=>$!==g):[...N,g],W=[...new Set(R)];t(W)}},v=g=>{y(N=>N.includes(g)?N.filter(R=>R!==g):[...N,g])},E=()=>{t([])},k=()=>{t(["*"])},I=g=>{const N=Ge.filter($=>$.category===g).map($=>$.id),R=[...a.filter($=>$!=="*"),...N],W=[...new Set(R)];t(W)},le=g=>{const N=Ge.filter(W=>W.category===g).map(W=>W.id),R=a.filter(W=>!N.includes(W));t(R)};return e.jsxs("div",{ref:x,className:`relative ${r}`,children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>m(!n),className:"w-full justify-between h-auto min-h-[40px] p-3",children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-sm font-medium",children:a.length===0?"Select permissions...":a.includes("*")?"All Permissions":`${a.length} permissions selected`}),n?e.jsx(ia,{className:"h-4 w-4"}):e.jsx(zs,{className:"h-4 w-4"})]}),a.length>0&&a.length<=3&&!a.includes("*")&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2 w-full",children:a.map(g=>{const N=Ge.find(R=>R.id===g);return e.jsx(z,{variant:"secondary",className:"text-xs",children:(N==null?void 0:N.name)||g},g)})})]})}),n&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-xl max-h-96",children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ws,{className:"h-4 w-4 text-gray-400"}),e.jsx(F,{placeholder:"Search permissions...",value:l,onChange:g=>c(g.target.value),className:"flex-1"})]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(M,{size:"sm",variant:"outline",onClick:k,children:"Select All"}),e.jsx(M,{size:"sm",variant:"outline",onClick:E,children:"Clear All"})]}),a.length>0&&e.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 p-2 rounded",children:[e.jsx("strong",{children:"Currently selected:"})," ",a.includes("*")?"All Permissions":a.map(g=>{var N;return((N=Ge.find(R=>R.id===g))==null?void 0:N.name)||g}).join(", ")]})]}),e.jsx(Hs,{className:"max-h-80",children:e.jsx("div",{className:"p-2",children:Os.map(g=>{const N=j[g];if(N.length===0)return null;const R=f.includes(g),W=N.filter($=>a.includes($.id)).length;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>v(g),className:"flex-1 justify-between p-2 h-auto",children:[e.jsxs("span",{className:"font-medium text-sm",children:[g," (",W,"/",N.length,")"]}),R?e.jsx(ia,{className:"h-4 w-4"}):e.jsx(zs,{className:"h-4 w-4"})]}),R&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>I(g),className:"h-6 px-2 text-xs",title:"Select all in category",children:"All"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>le(g),className:"h-6 px-2 text-xs",title:"Clear all in category",children:"Clear"})]})]}),R&&e.jsx("div",{className:"ml-4 space-y-1",children:N.map($=>{const ce=a.includes($.id);return e.jsx("div",{className:`flex items-start gap-2 p-2 rounded cursor-pointer transition-colors ${ce?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,onClick:()=>A($.id),children:e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${ce?"bg-blue-600 border-blue-600":"border-gray-300"}`,children:ce&&e.jsx(fr,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:$.name}),$.id==="*"&&e.jsx(z,{variant:"destructive",className:"text-xs",children:"Admin"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:$.description})]})]})},$.id)})})]},g)})})}),e.jsx("div",{className:"p-3 border-t bg-gray-50",children:e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{size:"sm",onClick:()=>m(!1),className:"h-7 px-3 text-xs",children:"Done"})})}),a.length>0&&e.jsx("div",{className:"p-3 border-t bg-gray-50",children:e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:a.map(g=>{const N=Ge.find(R=>R.id===g);return e.jsxs(z,{variant:"secondary",className:"text-xs",children:[(N==null?void 0:N.name)||g,e.jsx(or,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:R=>{R.stopPropagation(),A(g)}})]},g)})})})]})]})}const Fs={"System Administration":{icon:vs,color:"bg-red-100 text-red-800 border-red-200"},"Basic Access":{icon:fa,color:"bg-blue-100 text-blue-800 border-blue-200"},"Inventory Management":{icon:us,color:"bg-green-100 text-green-800 border-green-200"},"Processing Operations":{icon:qs,color:"bg-purple-100 text-purple-800 border-purple-200"},"Quality Control":{icon:xs,color:"bg-yellow-100 text-yellow-800 border-yellow-200"},"Farming Operations":{icon:ze,color:"bg-orange-100 text-orange-800 border-orange-200"},"Sales & Customer Management":{icon:Us,color:"bg-pink-100 text-pink-800 border-pink-200"},"Logistics & Dispatch":{icon:$s,color:"bg-indigo-100 text-indigo-800 border-indigo-200"},"Orders Management":{icon:Is,color:"bg-teal-100 text-teal-800 border-teal-200"},"Warehouse Operations":{icon:qe,color:"bg-gray-100 text-gray-800 border-gray-200"},"Reports & Analytics":{icon:ga,color:"bg-cyan-100 text-cyan-800 border-cyan-200"}},it={"*":vs,admin_access:ne,manage_users:Ue,manage_roles:Or,view_audit_logs:vr,system_settings:va,export_data:la,basic_access:fa,read_all_data:ss,view_inventory:us,manage_inventory:us,delete_inventory:me,view_processing:qs,manage_processing:qs,delete_processing:me,view_quality:xs,manage_quality:xs,delete_quality:me,view_farming:ze,manage_farming:ze,delete_farming:me,view_harvests:ua,manage_harvests:ua,delete_harvests:me,view_sales:Us,manage_sales:Us,delete_sales:me,view_customers:Ue,manage_customers:qr,delete_customers:$r,view_logistics:$s,manage_logistics:$s,delete_logistics:me,view_dispatch:ha,manage_dispatch:ha,delete_dispatch:me,view_orders:Is,manage_orders:Is,delete_orders:me,view_warehouse:qe,manage_warehouse:qe,delete_warehouse:me,view_reports:ga,create_reports:Pr,export_reports:la},Ts=[{id:"*",name:"All Permissions",description:"Full system access - can do everything (Admin only)",category:"System Administration"},{id:"admin_access",name:"Admin Access",description:"Full administrative access to all system functions",category:"System Administration"},{id:"manage_users",name:"Manage Users",description:"Create, edit, and delete user accounts",category:"System Administration"},{id:"manage_roles",name:"Manage Roles",description:"Create, edit, and delete user roles and permissions",category:"System Administration"},{id:"view_audit_logs",name:"View Audit Logs",description:"Access system audit logs and activity history",category:"System Administration"},{id:"system_settings",name:"System Settings",description:"Configure system-wide settings and preferences",category:"System Administration"},{id:"export_data",name:"Export Data",description:"Export system data in various formats",category:"System Administration"},{id:"basic_access",name:"Basic Access",description:"Basic system access and navigation",category:"Basic Access"},{id:"read_all_data",name:"Read All Data",description:"View all system data without modification rights",category:"Basic Access"},{id:"view_inventory",name:"View Inventory",description:"View fish inventory and stock levels",category:"Inventory Management"},{id:"manage_inventory",name:"Manage Inventory",description:"Add, update, and modify inventory records",category:"Inventory Management"},{id:"delete_inventory",name:"Delete Inventory",description:"Remove inventory records and items",category:"Inventory Management"},{id:"view_processing",name:"View Processing",description:"View fish processing operations and records",category:"Processing Operations"},{id:"manage_processing",name:"Manage Processing",description:"Create and update processing operations",category:"Processing Operations"},{id:"delete_processing",name:"Delete Processing",description:"Remove processing records and operations",category:"Processing Operations"},{id:"view_quality",name:"View Quality",description:"View quality control records and assessments",category:"Quality Control"},{id:"manage_quality",name:"Manage Quality",description:"Create and update quality control assessments",category:"Quality Control"},{id:"delete_quality",name:"Delete Quality",description:"Remove quality control records",category:"Quality Control"},{id:"view_farming",name:"View Farming",description:"View farming operations and records",category:"Farming Operations"},{id:"manage_farming",name:"Manage Farming",description:"Create and update farming operations",category:"Farming Operations"},{id:"delete_farming",name:"Delete Farming",description:"Remove farming operation records",category:"Farming Operations"},{id:"view_harvests",name:"View Harvests",description:"View harvest records and data",category:"Farming Operations"},{id:"manage_harvests",name:"Manage Harvests",description:"Create and update harvest records",category:"Farming Operations"},{id:"delete_harvests",name:"Delete Harvests",description:"Remove harvest records",category:"Farming Operations"},{id:"view_sales",name:"View Sales",description:"View sales records and transactions",category:"Sales & Customer Management"},{id:"manage_sales",name:"Manage Sales",description:"Create and update sales transactions",category:"Sales & Customer Management"},{id:"delete_sales",name:"Delete Sales",description:"Remove sales records and transactions",category:"Sales & Customer Management"},{id:"view_customers",name:"View Customers",description:"View customer information and records",category:"Sales & Customer Management"},{id:"manage_customers",name:"Manage Customers",description:"Create and update customer information",category:"Sales & Customer Management"},{id:"delete_customers",name:"Delete Customers",description:"Remove customer records",category:"Sales & Customer Management"},{id:"view_logistics",name:"View Logistics",description:"View logistics and transportation records",category:"Logistics & Dispatch"},{id:"manage_logistics",name:"Manage Logistics",description:"Create and update logistics operations",category:"Logistics & Dispatch"},{id:"delete_logistics",name:"Delete Logistics",description:"Remove logistics records",category:"Logistics & Dispatch"},{id:"view_dispatch",name:"View Dispatch",description:"View dispatch records and deliveries",category:"Logistics & Dispatch"},{id:"manage_dispatch",name:"Manage Dispatch",description:"Create and update dispatch operations",category:"Logistics & Dispatch"},{id:"delete_dispatch",name:"Delete Dispatch",description:"Remove dispatch records",category:"Logistics & Dispatch"},{id:"view_orders",name:"View Orders",description:"View outlet orders and requests",category:"Orders Management"},{id:"manage_orders",name:"Manage Orders",description:"Create, update, and process orders",category:"Orders Management"},{id:"delete_orders",name:"Delete Orders",description:"Remove order records",category:"Orders Management"},{id:"view_warehouse",name:"View Warehouse",description:"View warehouse operations and storage",category:"Warehouse Operations"},{id:"manage_warehouse",name:"Manage Warehouse",description:"Create and update warehouse operations",category:"Warehouse Operations"},{id:"delete_warehouse",name:"Delete Warehouse",description:"Remove warehouse operation records",category:"Warehouse Operations"},{id:"view_reports",name:"View Reports",description:"View system reports and analytics",category:"Reports & Analytics"},{id:"create_reports",name:"Create Reports",description:"Generate custom reports and analytics",category:"Reports & Analytics"},{id:"export_reports",name:"Export Reports",description:"Export reports to CSV and other formats",category:"Reports & Analytics"}];function nt({className:a="",showAsModal:t=!1,onClose:r}){const{userProfile:n,userRole:m,permissions:l,loading:c}=nr(),[f,y]=i.useState(!1),x=c?[]:!l||l.length===0?[]:l.includes("*")?Ts:l.map(v=>Ts.find(E=>E.id===v)).filter(Boolean),S=x.reduce((v,E)=>(v[E.category]||(v[E.category]=[]),v[E.category].push(E),v),{}),j=l.includes("*"),A=()=>{var v,E;return e.jsxs("div",{className:a,children:[c&&e.jsx(te,{children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(ne,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-gray-900",children:"Loading permissions..."}),e.jsx("p",{className:"text-xs text-gray-600",children:"Please wait while we fetch your permissions"})]})]})})}),!c&&(!n||!l)&&e.jsx(te,{children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(ne,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-gray-900",children:"Unable to load permissions"}),e.jsx("p",{className:"text-xs text-gray-600",children:"There was an issue loading your permissions. Please try refreshing the page."})]})]})})}),!c&&n&&l&&e.jsxs(te,{children:[e.jsx(xe,{className:"pb-3",children:e.jsxs(ve,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),"Your Permissions"]})}),e.jsxs(ie,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(yr,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-sm text-blue-900",children:[n==null?void 0:n.first_name," ",n==null?void 0:n.last_name]}),e.jsx("p",{className:"text-xs text-blue-600",children:n==null?void 0:n.email})]}),e.jsx(z,{className:"bg-blue-100 text-blue-800 border-blue-200",children:((v=m==null?void 0:m.name)==null?void 0:v.replace("_"," ").toUpperCase())||((E=m==null?void 0:m.display_name)==null?void 0:E.toUpperCase())||"USER"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Permissions:"}),e.jsx(z,{variant:"outline",className:"bg-white",children:j?"All Permissions":`${x.length} permissions`})]}),j&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[e.jsx(vs,{className:"h-4 w-4"}),e.jsx("span",{children:"You have full administrative access to the system"})]})]}),!j&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Permission Categories"}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>y(!f),className:"h-6 px-2 text-xs",children:[f?"Collapse":"Expand"," All",e.jsx(ya,{className:`h-3 w-3 ml-1 transition-transform ${f?"rotate-90":""}`})]})]}),e.jsx(Hs,{className:"max-h-96",children:e.jsx("div",{className:"space-y-2",children:Object.entries(S).map(([k,I])=>{var le,g;const N=((le=Fs[k])==null?void 0:le.icon)||ne;return(g=Fs[k])!=null&&g.color,e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 border-b",children:[e.jsx(N,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium text-sm text-gray-700",children:k}),e.jsxs(z,{variant:"outline",className:"ml-auto text-xs",children:[I.length," permissions"]})]}),e.jsx("div",{className:"p-3 space-y-2",children:I.map(R=>{const W=it[R.id]||Er;return e.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white rounded border",children:[e.jsx(W,{className:"h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:R.name}),e.jsx("p",{className:"text-xs text-gray-500",children:R.description})]})]},R.id)})})]},k)})})})]}),j&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Available System Permissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(Fs).map(([k,I])=>{const le=I.icon,g=Ts.filter(N=>N.category===k);return e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(le,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium text-sm text-gray-700",children:k}),e.jsx(z,{variant:"outline",className:"ml-auto text-xs",children:g.length})]}),e.jsxs("div",{className:"space-y-1",children:[g.slice(0,3).map(N=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:N.name})]},N.id)),g.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 ml-3.5",children:["+",g.length-3," more permissions"]})]})]},k)})})]})]})]})]})};return t?e.jsx(Ve,{open:!0,onOpenChange:r,children:e.jsxs(Le,{className:"max-w-4xl max-h-[80vh]",children:[e.jsxs(Oe,{children:[e.jsxs(Fe,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),"Your Role & Permissions"]}),e.jsx(Te,{children:"View your assigned role and the permissions you have in the Fish Management System"})]}),e.jsx(Hs,{className:"max-h-[60vh]",children:e.jsx(A,{})})]})}):e.jsx(A,{})}const Zs=i.createContext({open:!1,onOpenChange:()=>{}}),Oa=i.forwardRef((a,t)=>{var r=a,{open:n=!1,onOpenChange:m,children:l}=r,c=Q(r,["open","onOpenChange","children"]);return e.jsx(Zs.Provider,{value:{open:n,onOpenChange:m||(()=>{})},children:e.jsx("div",u(d({ref:t},c),{children:l}))})});Oa.displayName="Collapsible";const Fa=i.forwardRef((a,t)=>{var r=a,{asChild:n,children:m,onClick:l}=r,c=Q(r,["asChild","children","onClick"]);const{open:f,onOpenChange:y}=i.useContext(Zs),x=()=>{y(!f),l==null||l()};return n&&i.isValidElement(m)?i.cloneElement(m,u(d({},c),{ref:t,onClick:x})):e.jsx("button",u(d({ref:t,onClick:x},c),{children:m}))});Fa.displayName="CollapsibleTrigger";const Ta=i.forwardRef((a,t)=>{var r=a,{children:n}=r,m=Q(r,["children"]);const{open:l}=i.useContext(Zs);return l?e.jsx("div",u(d({ref:t},m),{children:n})):null});Ta.displayName="CollapsibleContent";function lt({onNavigate:a}){const[t,r]=i.useState([]),[n,m]=i.useState(!0),[l,c]=i.useState(""),[f,y]=i.useState("all"),[x,S]=i.useState("all"),[j,A]=i.useState(new Set),[v,E]=i.useState(!1),k=()=>H(this,null,function*(){try{m(!0);const{data:p,error:h}=yield ta(()=>H(this,null,function*(){return yield U.from("profiles").select("*").order("created_at",{ascending:!1})}));if(h)throw h;const{data:_,error:C}=yield ta(()=>H(this,null,function*(){return yield U.from("audit_logs").select(`
            *,
            user:profiles!audit_logs_user_id_fkey(first_name, last_name, email, role)
          `).order("created_at",{ascending:!1}).limit(1e3)}));if(C)throw C;const G=new Map;(_||[]).forEach(X=>{X.user_id&&(G.has(X.user_id)||G.set(X.user_id,[]),G.get(X.user_id).push(X))});const rs=(p||[]).map(X=>{var pe,_e,ws;return u(d({},X),{audit_logs:G.get(X.id)||[],total_activities:((pe=G.get(X.id))==null?void 0:pe.length)||0,last_login:((ws=(_e=G.get(X.id))==null?void 0:_e[0])==null?void 0:ws.created_at)||null})});rs.sort((X,pe)=>X.total_activities>0&&pe.total_activities===0?-1:X.total_activities===0&&pe.total_activities>0?1:X.total_activities>0&&pe.total_activities>0?new Date(pe.last_login||0).getTime()-new Date(X.last_login||0).getTime():new Date(pe.created_at).getTime()-new Date(X.created_at).getTime()),r(rs)}catch(p){const h=cr(p,"fetching audit logs");L.error(h)}finally{m(!1)}});i.useEffect(()=>{k()},[]);const I=t.filter(p=>{const h=l===""||p.first_name.toLowerCase().includes(l.toLowerCase())||p.last_name.toLowerCase().includes(l.toLowerCase())||p.email.toLowerCase().includes(l.toLowerCase()),_=f==="all"||p.role===f,C=v||p.total_activities>0;return h&&_&&C}),le=p=>x==="all"?p:p.filter(h=>h.action===x),g=p=>{const h=new Set(j);h.has(p)?h.delete(p):h.add(p),A(h)},N=p=>{switch(p){case"INSERT":case"CREATE":return"bg-green-100 text-green-800 border-green-200";case"UPDATE":return"bg-blue-100 text-blue-800 border-blue-200";case"DELETE":return"bg-red-100 text-red-800 border-red-200";case"LOGIN":return"bg-purple-100 text-purple-800 border-purple-200";case"LOGOUT":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}},R=p=>new Date(p).toLocaleString(),W=p=>{if(!p.record_id||p.action==="LOGIN"||p.action==="LOGOUT")return"";const h=p.table_name.toLowerCase();if(p.action.toLowerCase(),h.includes("user")||h.includes("profile"))return"User account";if(h.includes("order"))return"Order record";if(h.includes("inventory"))return"Inventory item";if(h.includes("warehouse")){if(p.new_values)try{const _=typeof p.new_values=="string"?JSON.parse(p.new_values):p.new_values,C=[];return _.total_weight&&C.push(`${_.total_weight}kg`),_.fish_type&&C.push(_.fish_type),_.condition&&C.push(`(${_.condition})`),_.entry_code&&C.push(`[${_.entry_code}]`),C.length>0?C.join(" "):"Warehouse entry record"}catch(_){return"Warehouse entry record"}return"Warehouse entry record"}else return h.includes("dispatch")?"Dispatch record":h.includes("outlet")?"Outlet record":h.includes("disposal")?"Disposal record":h.includes("transfer")?"Transfer record":h.includes("processing")?"Processing record":h.includes("sorting")?"Sorting record":`${h.replace("_"," ")} record`},$=p=>{const h=p.table_name.toLowerCase(),_=p.action.toLowerCase();if(_==="login")return"Logged into the system";if(_==="logout")return"Logged out of the system";if(_==="insert"||_==="create"){if(h.includes("user")||h.includes("profile"))return"Created new user account";if(h.includes("order"))return"Created new order";if(h.includes("inventory"))return"Added inventory item";if(h.includes("warehouse")){if(p.new_values)try{const C=typeof p.new_values=="string"?JSON.parse(p.new_values):p.new_values;if(C.fish_type&&C.total_weight)return`Created new warehouse entry: ${C.fish_type} (${C.total_weight}kg)`}catch(C){}return"Created new warehouse entry"}else return h.includes("dispatch")?"Created dispatch record":h.includes("outlet")?"Created outlet record":h.includes("disposal")?"Created disposal record":h.includes("transfer")?"Created transfer record":h.includes("processing")?"Created processing record":h.includes("sorting")?"Created sorting record":`Created new ${h.replace("_"," ")} record`}else if(_==="update"){if(h.includes("user")||h.includes("profile"))return"Updated user account";if(h.includes("order"))return"Updated order details";if(h.includes("inventory"))return"Updated inventory item";if(h.includes("warehouse")){if(p.new_values)try{const C=typeof p.new_values=="string"?JSON.parse(p.new_values):p.new_values;if(C.fish_type&&C.total_weight)return`Updated warehouse entry: ${C.fish_type} (${C.total_weight}kg)`}catch(C){}return"Updated warehouse entry details"}else return h.includes("dispatch")?"Updated dispatch record":h.includes("outlet")?"Updated outlet record":h.includes("disposal")?"Updated disposal record":h.includes("transfer")?"Updated transfer record":h.includes("processing")?"Updated processing record":h.includes("sorting")?"Updated sorting record":`Updated ${h.replace("_"," ")} record`}else return _==="delete"?h.includes("user")||h.includes("profile")?"Deleted user account":h.includes("order")?"Deleted order":h.includes("inventory")?"Deleted inventory item":h.includes("warehouse")?"Deleted warehouse entry":h.includes("dispatch")?"Deleted dispatch record":h.includes("outlet")?"Deleted outlet record":h.includes("disposal")?"Deleted disposal record":h.includes("transfer")?"Deleted transfer record":h.includes("processing")?"Deleted processing record":h.includes("sorting")?"Deleted sorting record":`Deleted ${h.replace("_"," ")} record`:`Performed ${_} action on ${h.replace("_"," ")}`},ce=p=>`${p.first_name.charAt(0)}${p.last_name.charAt(0)}`.toUpperCase();return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Audit Logs"}),e.jsx("p",{className:"text-gray-600",children:"Track user activities and system changes"})]}),e.jsxs(M,{onClick:k,variant:"outline",size:"sm",children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(te,{children:e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(F,{placeholder:"Search users...",value:l,onChange:p=>c(p.target.value),className:"pl-10"})]}),e.jsxs(je,{value:f,onValueChange:y,children:[e.jsx(be,{children:e.jsx(we,{placeholder:"Filter by role"})}),e.jsxs(Ne,{children:[e.jsx(T,{value:"all",children:"All Roles"}),e.jsx(T,{value:"admin",children:"Admin"}),e.jsx(T,{value:"manager",children:"Manager"}),e.jsx(T,{value:"operator",children:"Operator"}),e.jsx(T,{value:"viewer",children:"Viewer"})]})]}),e.jsxs(je,{value:x,onValueChange:S,children:[e.jsx(be,{children:e.jsx(we,{placeholder:"Filter by action"})}),e.jsxs(Ne,{children:[e.jsx(T,{value:"all",children:"All Actions"}),e.jsx(T,{value:"INSERT",children:"Create"}),e.jsx(T,{value:"UPDATE",children:"Update"}),e.jsx(T,{value:"DELETE",children:"Delete"}),e.jsx(T,{value:"LOGIN",children:"Login"}),e.jsx(T,{value:"LOGOUT",children:"Logout"})]})]}),e.jsxs(M,{variant:v?"default":"outline",onClick:()=>E(!v),className:"flex items-center gap-2",children:[v?e.jsx(lr,{className:"h-4 w-4"}):e.jsx(ss,{className:"h-4 w-4"}),v?"Hide Inactive":"Show Inactive"]})]})})}),e.jsx("div",{className:"space-y-4",children:I.map(p=>{const h=j.has(p.id),_=le(p.audit_logs);return e.jsx(te,{className:"overflow-hidden",children:e.jsxs(Oa,{open:h,onOpenChange:()=>g(p.id),children:[e.jsx(Fa,{asChild:!0,children:e.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:ce(p)}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[p.first_name," ",p.last_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:p.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(z,{variant:"outline",className:"text-xs",children:p.role}),e.jsx(z,{variant:p.is_active?"default":"secondary",className:`text-xs ${p.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.is_active?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.total_activities}),e.jsx("div",{className:"text-sm text-gray-500",children:"Activities"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Last Activity"}),e.jsx("div",{className:"text-sm font-medium",children:p.audit_logs.length>0?R(p.audit_logs[0].created_at):"Never"})]}),h?e.jsx(zs,{className:"h-5 w-5 text-gray-400"}):e.jsx(ya,{className:"h-5 w-5 text-gray-400"})]})]})})}),e.jsx(Ta,{children:e.jsx(ie,{className:"pt-0",children:_.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[e.jsx(Sr,{className:"h-4 w-4"}),"Showing ",_.length," of ",p.audit_logs.length," activities"]}),_.map(C=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-xs",children:e.jsx(ds,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(z,{className:`text-xs ${N(C.action)}`,children:C.action}),e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:C.table_name})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:$(C)}),C.record_id&&e.jsx("p",{className:"text-xs text-gray-500",children:W(C)})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(ja,{className:"h-3 w-3"}),R(C.created_at)]})})]})},C.id))]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ds,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No activities found for this user"}),x!=="all"&&e.jsx("p",{className:"text-sm",children:"Try changing the action filter"})]})})})]})},p.id)})}),I.length===0&&e.jsx(te,{children:e.jsxs(ie,{className:"text-center py-12",children:[e.jsx(Ue,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]})})]})}function Ft({onNavigate:a}){const[t,r]=i.useState([]),[n,m]=i.useState([]),[l,c]=i.useState([]),[f,y]=i.useState([]),[x,S]=i.useState([]),[j,A]=i.useState([]),[v,E]=i.useState([]),[k,I]=i.useState({provider:"sendgrid",from_email:"noreply@riofish.com",from_name:"RioFish System",api_key:""}),[le,g]=i.useState(!0),[N,R]=i.useState("users"),[W,$]=i.useState(!1),[ce,p]=i.useState(!1),[h,_]=i.useState(!1),[C,G]=i.useState(!1),[rs,X]=i.useState(!1),[pe,_e]=i.useState(!1),[ws,ot]=i.useState(!1),[$a,ts]=i.useState(!1),[Ua,Qe]=i.useState(!1),[q,Ns]=i.useState(null),[se,Ys]=i.useState(null),[de,Qs]=i.useState(null),[Je,Js]=i.useState(null),[is,qa]=i.useState(""),[_s,za]=i.useState("all"),[ct,dt]=i.useState("all"),[J,ee]=i.useState(null),[B,Ce]=i.useState({}),[He,fe]=i.useState({isValid:!0,message:""}),[We,Se]=i.useState({isValid:!0,message:""}),[Xe,ye]=i.useState({isValid:!0,message:""}),[b,ue]=i.useState({email:"",first_name:"",last_name:"",role:"",phone:"",is_active:!0,password:"",confirm_password:""}),[P,Pe]=i.useState({name:"",display_name:"",description:"",permissions:[],icon:"Shield",color:"bg-gray-100 text-gray-800 border-gray-200",is_active:!0}),Ia=s=>H(this,null,function*(){if(!s||s.length<3){fe({isValid:!0,message:""});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){fe({isValid:!1,message:"Please enter a valid email address"});return}try{let o=U.from("profiles").select("id").eq("email",s.toLowerCase().trim());q!=null&&q.id&&(o=o.neq("id",q.id));const{data:w,error:V}=yield o;if(V&&V.code!=="PGRST116"){fe({isValid:!0,message:""});return}w&&w.length>0?fe({isValid:!1,message:"This email is already in use"}):fe({isValid:!0,message:"Email is available"})}catch(o){fe({isValid:!0,message:""})}}),Ha=s=>H(this,null,function*(){if(!s||s.length<6){Se({isValid:!1,message:"Password must be at least 6 characters long"});return}try{const{data:o,error:w}=yield U.from("profiles").select("password_hash").not("password_hash","is",null);if(w){Se({isValid:!0,message:""});return}if(o&&o.length>0){const V=yield ks(()=>Ps(()=>As(()=>import("./index-D0a7Ul_G.js").then(O=>O.ap),__vite__mapDeps([0,1])).then(O=>O.ao),ms([0,1])).then(O=>O.ao),hs([0,1]));for(const O of o)if(O.password_hash&&(yield V.compare(s,O.password_hash))){Se({isValid:!1,message:"This password is already in use"});return}}Se({isValid:!0,message:"Password is available"})}catch(o){Se({isValid:!0,message:""})}}),Wa=s=>H(this,null,function*(){if(!s||s.trim()===""){ye({isValid:!0,message:""});return}if(!/^[\+]?[1-9][\d]{0,15}$/.test(s.replace(/[\s\-\(\)]/g,""))){ye({isValid:!1,message:"Please enter a valid phone number"});return}try{let o=U.from("profiles").select("id").eq("phone",s.trim());q!=null&&q.id&&(o=o.neq("id",q.id));const{data:w,error:V}=yield o;if(V&&V.code!=="PGRST116"){ye({isValid:!0,message:""});return}w&&w.length>0?ye({isValid:!1,message:"This phone number is already in use"}):ye({isValid:!0,message:"Phone number is available"})}catch(o){ye({isValid:!0,message:""})}}),[K,Ae]=i.useState({name:"",phone:"",location:"",rating:0,reliability:"fair",status:"active"}),[ae,ke]=i.useState({name:"",description:"",capacity_kg:1e3,temperature_celsius:4,humidity_percent:85,location_type:"cold_storage",status:"active"}),[re,De]=i.useState({name:"",location:"",phone:"",manager_name:"",status:"active"}),Ks=()=>H(this,null,function*(){try{const{data:s,error:o}=yield U.from("user_roles").select("*").order("name");if(o)throw o;m(s||[])}catch(s){console.warn("Could not fetch roles:",s),m([])}}),ns=()=>H(this,null,function*(){try{const{data:s,error:o}=yield U.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(100);if(o)console.warn("Could not fetch audit logs:",o),c([]);else{const w=yield Promise.all((s||[]).map(V=>H(this,null,function*(){if(V.user_id)try{const{data:O}=yield U.from("profiles").select("first_name, last_name, email").eq("id",V.user_id).single();return u(d({},V),{user:O})}catch(O){return console.warn("Could not fetch user for audit log:",O),V}return V})));c(w)}}catch(s){console.warn("Could not fetch audit logs:",s),c([])}}),Ke=(s,o,w,V,O)=>H(this,null,function*(){try{yield pr.custom(s,o,w,{old_values:V,new_values:O})}catch(Re){console.warn("Failed to log audit event:",Re)}}),Xa=()=>H(this,null,function*(){I({provider:"sendgrid",from_email:"noreply@riofish.com",from_name:"Rio Fish Management",api_key:""})}),ls=()=>H(this,null,function*(){try{console.log("Fetching storage locations...");const{data:s,error:o}=yield U.from("storage_locations").select("*").order("name");if(o)throw console.error("Error fetching storage locations:",o),o;console.log("Storage locations fetched successfully:",s),A(s||[])}catch(s){console.error("Could not fetch storage locations:",s),A([])}}),ea=()=>H(this,null,function*(){try{g(!0);const{data:s,error:o}=yield U.from("profiles").select("*").order("created_at",{ascending:!1});if(o)throw o;r(s||[])}catch(s){console.warn("Could not fetch users:",s),r([])}finally{g(!1)}}),Cs=()=>H(this,null,function*(){try{const{data:s,error:o}=yield U.from("farmers").select("*").order("name");if(o)throw o;S(s||[])}catch(s){console.warn("Could not fetch farmers:",s),S([])}}),Ss=()=>H(this,null,function*(){try{console.log("Fetching outlets...");const{data:s,error:o}=yield U.from("outlets").select("*").order("name");if(o)throw console.error("Error fetching outlets:",o),o.message.includes('relation "outlets" does not exist')&&(console.warn("Outlets table does not exist. Please run the database setup script."),L.error("Outlets table not found. Please contact administrator.")),o;console.log("Outlets fetched successfully:",(s==null?void 0:s.length)||0,"records"),E(s||[])}catch(s){console.warn("Could not fetch outlets:",s),E([])}});i.useEffect(()=>{Ks(),ea(),Cs(),Ss(),ns(),Xa(),ls()},[]);const Ba=()=>{const s={};return P.name.trim()?P.name.trim().length<2?s.name="Role name must be at least 2 characters":P.name.trim().length>50?s.name="Role name must be less than 50 characters":/^[a-zA-Z0-9_\s-]+$/.test(P.name.trim())||(s.name="Role name can only contain letters, numbers, spaces, hyphens, and underscores"):s.name="Role name is required",P.display_name.trim()?P.display_name.trim().length<2?s.display_name="Display name must be at least 2 characters":P.display_name.trim().length>100&&(s.display_name="Display name must be less than 100 characters"):s.display_name="Display name is required",P.description.trim().length>500&&(s.description="Description must be less than 500 characters"),!Array.isArray(P.permissions)||P.permissions.length===0?s.permissions="At least one permission must be selected":P.permissions.length>50&&(s.permissions="Too many permissions selected (maximum 50)"),Ce(s),Object.keys(s).length===0},Ga=()=>H(this,null,function*(){try{if(ee("saving-role"),!Ba())return;const s=P.name.toLowerCase().trim().replace(/\s+/g,"_");if(se){if(s!==se.name){const{data:V,error:O}=yield U.from("user_roles").select("id").eq("name",s).neq("id",se.id).single();if(O&&O.code!=="PGRST116")throw O;if(V){L.error("Role name already exists",{description:"Please choose a different name for the role"});return}}const o=[...new Set(P.permissions)],{error:w}=yield U.from("user_roles").update(u(d({},P),{name:s,permissions:o})).eq("id",se.id);if(w)throw w;L.success("Role updated successfully")}else{const{data:o,error:w}=yield U.from("user_roles").select("id").eq("name",s).single();if(w&&w.code!=="PGRST116")throw w;if(o){L.error("Role name already exists",{description:"Please choose a different name for the role"});return}const V=[...new Set(P.permissions)],{error:O}=yield U.from("user_roles").insert([u(d({},P),{name:s,permissions:V})]);if(O){if(O.code==="23505"){L.error("Role name already exists",{description:"Please choose a different name for the role"});return}throw O}L.success("Role created successfully")}G(!1),Ys(null),Pe({name:"",display_name:"",description:"",permissions:[],icon:"Shield",color:"bg-gray-100 text-gray-800 border-gray-200",is_active:!0}),Ce({}),Ks()}catch(s){L.error(`Role operation failed: ${s.message}`)}finally{ee(null)}}),Za=()=>H(this,null,function*(){var s;try{if(ee("saving-user"),!b.email||!b.first_name||!b.last_name){L.error("Please fill in all required fields");return}if(!He.isValid){L.error("Please fix email validation errors");return}if(!Xe.isValid){L.error("Please fix phone number validation errors");return}if(!q){if(!b.password||b.password.length<6){L.error("Password must be at least 6 characters long");return}if(!We.isValid){L.error("Please fix password validation errors");return}if(b.password!==b.confirm_password){L.error("Passwords do not match");return}}if(!(q!=null&&q.id)){const{data:o,error:w}=yield U.from("profiles").select("id, email").eq("email",b.email.toLowerCase().trim());if(w&&w.code!=="PGRST116")throw w;if(o&&o.length>0){L.error("Email already exists",{description:"Please choose a different email address"});return}}if(!(q!=null&&q.id)&&b.phone&&b.phone.trim()!==""){const{data:o,error:w}=yield U.from("profiles").select("id, phone").eq("phone",b.phone.trim());if(w&&w.code!=="PGRST116")throw w;if(o&&o.length>0){L.error("Phone number already exists",{description:"Please choose a different phone number"});return}}if(!q){const{data:o,error:w}=yield U.from("profiles").select("id, password_hash").not("password_hash","is",null);if(w)throw w;if(o&&o.length>0){const V=yield ks(()=>Ps(()=>As(()=>import("./index-D0a7Ul_G.js").then(O=>O.ap),__vite__mapDeps([0,1])).then(O=>O.ao),ms([0,1])).then(O=>O.ao),hs([0,1]));for(const O of o)if(O.password_hash&&(yield V.compare(b.password,O.password_hash))){L.error("Password already in use",{description:"Please choose a different password for security reasons"});return}}}if(q){const o={email:q.email,first_name:q.first_name,last_name:q.last_name,role:q.role,phone:q.phone,is_active:q.is_active},w={email:b.email,first_name:b.first_name,last_name:b.last_name,role:b.role,phone:b.phone,is_active:b.is_active},{error:V}=yield U.from("profiles").update(w).eq("id",q.id);if(V)throw V;yield Ke("UPDATE","profiles",q.id,o,w),L.success("User updated successfully")}else{const o=yield(yield ks(()=>Ps(()=>As(()=>import("./index-D0a7Ul_G.js").then(Re=>Re.ap),__vite__mapDeps([0,1])).then(Re=>Re.ao),ms([0,1])).then(Re=>Re.ao),hs([0,1]))).hash(b.password,10),w={email:b.email.toLowerCase().trim(),password_hash:o,first_name:b.first_name.trim(),last_name:b.last_name.trim(),role:b.role,phone:((s=b.phone)==null?void 0:s.trim())||null,is_active:b.is_active},{data:V,error:O}=yield U.from("profiles").insert([w]).select().single();if(O){if(O.code==="23505"){L.error("Email already exists",{description:"Please choose a different email address"});return}throw O}yield Ke("INSERT","profiles",V.id,null,w),L.success("User created successfully")}$(!1),Ns(null),ue({email:"",first_name:"",last_name:"",role:"",phone:"",is_active:!0,password:"",confirm_password:""}),fe({isValid:!0,message:""}),Se({isValid:!0,message:""}),ye({isValid:!0,message:""}),ea(),ns()}catch(o){L.error(`User operation failed: ${o.message}`)}finally{ee(null)}}),Ya=()=>H(this,null,function*(){try{if(ee("saving-farmer"),!K.name||!K.phone||!K.location){L.error("Please fill in all required fields");return}if(de){const s={name:de.name,phone:de.phone,location:de.location,rating:de.rating,reliability:de.reliability,status:de.status},{error:o}=yield U.from("farmers").update(K).eq("id",de.id);if(o)throw o;yield Ke("UPDATE","farmers",de.id,s,K),L.success("Farmer updated successfully")}else{const{data:s,error:o}=yield U.from("farmers").insert([K]).select().single();if(o)throw o;yield Ke("INSERT","farmers",s.id,null,K),L.success("Farmer created successfully")}_e(!1),Qs(null),Ae({name:"",phone:"",location:"",rating:0,reliability:"fair",status:"active"}),Cs(),ns()}catch(s){L.error(`Farmer operation failed: ${s.message}`)}finally{ee(null)}}),Qa=s=>H(this,null,function*(){if(confirm("Are you sure you want to delete this farmer?"))try{ee("deleting-farmer");const o=x.find(V=>V.id===s),{error:w}=yield U.from("farmers").delete().eq("id",s);if(w)throw w;o&&(yield Ke("DELETE","farmers",s,o,null)),L.success("Farmer deleted successfully"),Cs(),ns()}catch(o){L.error(`Failed to delete farmer: ${o.message}`)}finally{ee(null)}}),Ja=()=>H(this,null,function*(){try{ee("saving-storage");const{error:s}=yield U.from("storage_locations").insert([ae]);if(s)throw s;L.success("Storage location created successfully"),ts(!1),ke({name:"",description:"",capacity_kg:1e3,temperature_celsius:4,humidity_percent:85,location_type:"cold_storage",status:"active"}),ls()}catch(s){L.error(`Storage location creation failed: ${s.message}`)}finally{ee(null)}}),Ka=(s,o)=>H(this,null,function*(){try{ee(`toggle-storage-${s}`);const w=o==="active"?"inactive":"active",{error:V}=yield U.from("storage_locations").update({status:w,updated_at:new Date().toISOString()}).eq("id",s);if(V)throw V;L.success(`Storage location marked as ${w}`),ls()}catch(w){L.error(`Failed to update storage status: ${w.message}`)}finally{ee(null)}}),er=()=>H(this,null,function*(){try{ee("saving-outlet");const s={name:re.name,location:re.location,phone:re.phone,manager_name:re.manager_name||null,status:re.status};if(console.log("Submitting outlet data:",s),Je){const{error:o}=yield U.from("outlets").update(s).eq("id",Je.id);if(o)throw console.error("Update outlet error:",o),o;L.success("Outlet updated successfully")}else{const{error:o}=yield U.from("outlets").insert([s]);if(o)throw console.error("Create outlet error:",o),o;L.success("Outlet created successfully")}Qe(!1),Js(null),De({name:"",location:"",phone:"",manager_name:"",status:"active"}),Ss()}catch(s){L.error(`Outlet operation failed: ${s.message}`)}finally{ee(null)}}),sr=s=>H(this,null,function*(){if(confirm("Are you sure you want to delete this outlet?"))try{ee("deleting-outlet");const{error:o}=yield U.from("outlets").delete().eq("id",s);if(o)throw o;L.success("Outlet deleted successfully"),Ss()}catch(o){L.error(`Failed to delete outlet: ${o.message}`)}finally{ee(null)}}),sa=t.filter(s=>{const o=s.first_name.toLowerCase().includes(is.toLowerCase())||s.last_name.toLowerCase().includes(is.toLowerCase())||s.email.toLowerCase().includes(is.toLowerCase()),w=_s==="all"||s.role===_s;return o&&w}),ar=s=>({Shield:ne,Crown:vs,Package:us,Building:tr,Eye:ss,Tractor:ze,Warehouse:qe})[s]||ne;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 content-container",children:e.jsxs("div",{className:"space-y-8 responsive-padding max-w-7xl mx-auto",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 p-8 text-white shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Ue,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"User Management"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Comprehensive user, role, and system administration"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"System Active"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[t.length," Users"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[x.length," Farmers"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(M,{onClick:()=>X(!0),variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/30 backdrop-blur-sm transition-all duration-200",children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Email Config"]})})]})}),e.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 h-32 bg-white/5 rounded-full blur-2xl"})]}),e.jsxs(ur,{value:N,onValueChange:R,className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs(xr,{className:"flex w-full bg-gradient-to-r from-gray-50 to-gray-100 p-1 h-auto overflow-x-auto",children:[e.jsxs(Ee,{value:"users",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-blue-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 data-[state=active]:bg-blue-600 transition-colors duration-200",children:e.jsx(Ue,{className:"h-5 w-5 data-[state=active]:text-white text-blue-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Users"}),e.jsx("span",{className:"text-xs text-gray-500",children:t.length})]})]}),e.jsxs(Ee,{value:"farmers",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-green-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 data-[state=active]:bg-green-600 transition-colors duration-200",children:e.jsx(ze,{className:"h-5 w-5 data-[state=active]:text-white text-green-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Farmers"}),e.jsx("span",{className:"text-xs text-gray-500",children:x.length})]})]}),e.jsxs(Ee,{value:"storage",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-purple-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 data-[state=active]:bg-purple-600 transition-colors duration-200",children:e.jsx(qe,{className:"h-5 w-5 data-[state=active]:text-white text-purple-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Storage"}),e.jsx("span",{className:"text-xs text-gray-500",children:j.length})]})]}),e.jsxs(Ee,{value:"roles",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-orange-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100 data-[state=active]:bg-orange-600 transition-colors duration-200",children:e.jsx(ne,{className:"h-5 w-5 data-[state=active]:text-white text-orange-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Roles"}),e.jsx("span",{className:"text-xs text-gray-500",children:n.length})]})]}),e.jsxs(Ee,{value:"frontend",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-indigo-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 data-[state=active]:bg-indigo-600 transition-colors duration-200",children:e.jsx(ss,{className:"h-5 w-5 data-[state=active]:text-white text-indigo-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Public View"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Config"})]})]}),e.jsxs(Ee,{value:"audit",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-red-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100 data-[state=active]:bg-red-600 transition-colors duration-200",children:e.jsx(ds,{className:"h-5 w-5 data-[state=active]:text-white text-red-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Audit Logs"}),e.jsx("span",{className:"text-xs text-gray-500",children:l.length})]})]}),e.jsxs(Ee,{value:"outlets",className:"flex items-center gap-3 px-6 py-4 font-medium data-[state=active]:bg-white data-[state=active]:shadow-md data-[state=active]:text-purple-600 transition-all duration-200 hover:bg-white/50 rounded-xl whitespace-nowrap",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 data-[state=active]:bg-purple-600 transition-colors duration-200",children:e.jsx(Vs,{className:"h-5 w-5 data-[state=active]:text-white text-purple-600"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Outlets"}),e.jsx("span",{className:"text-xs text-gray-500",children:v.length})]})]})]})}),e.jsx(Me,{value:"users",className:"space-y-6",children:e.jsxs(te,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(xe,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(Ue,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs(ve,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["User Management",e.jsxs(z,{variant:"secondary",className:"bg-blue-100 text-blue-700 border-blue-200",children:[sa.length," Active"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and their permissions"})]})]}),e.jsxs(M,{onClick:()=>{Ns(null),ue({email:"",first_name:"",last_name:"",role:"",phone:"",is_active:!0,password:"",confirm_password:""}),fe({isValid:!0,message:""}),Se({isValid:!0,message:""}),ye({isValid:!0,message:""}),$(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),e.jsxs(ie,{className:"p-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(F,{placeholder:"Search users by name or email...",value:is,onChange:s=>qa(s.target.value),className:"pl-10 bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20"})]})}),e.jsxs(je,{value:_s,onValueChange:za,children:[e.jsxs(be,{className:"w-full sm:w-[200px] bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20",children:[e.jsx(rr,{className:"mr-2 h-4 w-4"}),e.jsx(we,{placeholder:"Filter by role"})]}),e.jsxs(Ne,{children:[e.jsx(T,{value:"all",children:"All Roles"}),n.filter(s=>s.name&&s.name.trim()!=="").map(s=>e.jsx(T,{value:s.name,children:s.display_name||s.name},s.id))]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"mobile-table-container",children:e.jsxs(Ds,{className:"mobile-table",children:[e.jsx(Rs,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs(Be,{className:"border-b border-gray-200",children:[e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"User"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Contact"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Role"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Status"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Last Login"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4 text-center",children:"Actions"})]})}),e.jsx(Es,{children:sa.map((s,o)=>e.jsxs(Be,{className:`hover:bg-blue-50/50 transition-colors duration-200 border-b border-gray-100 ${o%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:[s.first_name.charAt(0),s.last_name.charAt(0)]}),e.jsx("div",{children:e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.first_name," ",s.last_name]})})]})}),e.jsxs(Y,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ma,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ls,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.phone})]})]}),e.jsx(Y,{className:"py-4",children:e.jsx(z,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 font-medium",children:s.role.replace("_"," ")})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.is_active?"bg-green-500":"bg-gray-400"}`}),e.jsx(z,{variant:s.is_active?"default":"secondary",className:s.is_active?"bg-green-100 text-green-700 border-green-200":"",children:s.is_active?"Active":"Inactive"})]})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.last_login?new Date(s.last_login).toLocaleDateString():"Never"})]})}),e.jsx(Y,{className:"py-4",children:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx(M,{size:"sm",variant:"outline",className:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200",onClick:()=>{Ns(s),ue({email:s.email,first_name:s.first_name,last_name:s.last_name,role:s.role,phone:s.phone||"",is_active:s.is_active,password:"",confirm_password:""}),fe({isValid:!0,message:""}),Se({isValid:!0,message:""}),ye({isValid:!0,message:""}),$(!0)},children:e.jsx(cs,{className:"h-4 w-4"})})})})]},s.id))})]})})})]})]})}),e.jsx(Me,{value:"farmers",className:"space-y-6",children:e.jsxs(te,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(xe,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(ze,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs(ve,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Farmer Management",e.jsxs(z,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:[x.length," Registered"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage farmer profiles and relationships"})]})]}),e.jsxs(M,{onClick:()=>_e(!0),className:"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Farmer"]})]})}),e.jsx(ie,{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"mobile-table-container",children:e.jsxs(Ds,{className:"mobile-table",children:[e.jsx(Rs,{className:"bg-gradient-to-r from-green-50 to-emerald-50",children:e.jsxs(Be,{className:"border-b border-green-100",children:[e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Farmer"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Contact"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Location"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Rating"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Reliability"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Status"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4 text-center",children:"Actions"})]})}),e.jsx(Es,{children:x.map((s,o)=>e.jsxs(Be,{className:`hover:bg-green-50/50 transition-colors duration-200 border-b border-gray-100 ${o%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:s.name.charAt(0)}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-gray-900",children:s.name})})]})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.phone})]})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.location})]})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((w,V)=>e.jsx("div",{className:`w-4 h-4 ${V<s.rating?"text-yellow-400":"text-gray-300"}`,children:""},V))}),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",s.rating,"/5)"]})]})}),e.jsx(Y,{className:"py-4",children:e.jsx(z,{variant:"outline",className:`font-medium ${s.reliability==="excellent"?"bg-green-100 text-green-700 border-green-200":s.reliability==="good"?"bg-blue-100 text-blue-700 border-blue-200":s.reliability==="fair"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200"}`,children:s.reliability})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.status==="active"?"bg-green-500":"bg-gray-400"}`}),e.jsx(z,{variant:s.status==="active"?"default":"secondary",className:s.status==="active"?"bg-green-100 text-green-700 border-green-200":"",children:s.status})]})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(M,{size:"sm",variant:"outline",className:"hover:bg-green-50 hover:border-green-300 hover:text-green-700 transition-all duration-200",onClick:()=>{Qs(s),Ae({name:s.name,phone:s.phone,location:s.location,rating:s.rating,reliability:s.reliability,status:s.status}),_e(!0)},children:e.jsx(cs,{className:"h-4 w-4"})}),e.jsx(M,{size:"sm",variant:"outline",className:"hover:bg-red-50 hover:border-red-300 hover:text-red-700 transition-all duration-200",onClick:()=>Qa(s.id),disabled:J==="deleting-farmer",children:e.jsx(me,{className:"h-4 w-4"})})]})})]},s.id))})]})})})})]})}),e.jsx(Me,{value:"storage",className:"space-y-6",children:e.jsxs(te,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(xe,{className:"bg-gradient-to-r from-purple-50 to-violet-50 border-b border-purple-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(qe,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs(ve,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Storage Management",e.jsxs(z,{variant:"secondary",className:"bg-purple-100 text-purple-700 border-purple-200",children:[j.length," Locations"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor storage capacity and conditions"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:ls,variant:"outline",className:"border-purple-200 text-purple-700 hover:bg-purple-50",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(M,{onClick:()=>ts(!0),className:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Location"]})]})]})}),e.jsx(ie,{className:"p-6",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:j.map(s=>e.jsxs(te,{className:"hover:shadow-lg transition-all duration-200 border border-gray-200 bg-white",children:[e.jsx(xe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx(z,{variant:s.status==="active"?"default":"secondary",className:s.status==="active"?"bg-green-100 text-green-700 border-green-200":"",children:s.status})]})}),e.jsx(ie,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Type:"}),e.jsx("span",{className:"font-medium capitalize",children:s.location_type.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Capacity:"}),e.jsxs("span",{className:"font-medium",children:[s.current_usage_kg,"/",s.capacity_kg," kg"]})]}),s.temperature_celsius&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Temperature:"}),e.jsxs("span",{className:"font-medium",children:[s.temperature_celsius,"C"]})]}),s.humidity_percent&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Humidity:"}),e.jsxs("span",{className:"font-medium",children:[s.humidity_percent,"%"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[Math.round(s.current_usage_kg/s.capacity_kg*100),"% occupied"]}),e.jsx("div",{className:"pt-2 border-t border-gray-100",children:e.jsx(M,{size:"sm",variant:s.status==="active"?"destructive":"default",className:`w-full text-xs ${s.status==="active"?"bg-red-100 text-red-700 hover:bg-red-200 border-red-200":"bg-green-100 text-green-700 hover:bg-green-200 border-green-200"}`,onClick:()=>Ka(s.id,s.status),disabled:J===`toggle-storage-${s.id}`,children:J===`toggle-storage-${s.id}`?"Updating...":s.status==="active"?"Mark Inactive":"Mark Active"})})]})})]},s.id))})})]})}),e.jsxs(Me,{value:"roles",className:"space-y-6",children:[e.jsxs(te,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(xe,{className:"bg-gradient-to-r from-orange-50 to-amber-50 border-b border-orange-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:e.jsx(ne,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsxs(ve,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Role Management",e.jsxs(z,{variant:"secondary",className:"bg-orange-100 text-orange-700 border-orange-200",children:[n.length," Roles"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Define user roles and permissions"})]})]}),e.jsxs(M,{onClick:()=>G(!0),className:"bg-orange-600 hover:bg-orange-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Role"]})]})}),e.jsx(ie,{className:"p-6",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(s=>{const o=ar(s.icon);return e.jsxs(te,{className:"hover:shadow-lg transition-all duration-200 border border-gray-200 bg-white",children:[e.jsx(xe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(z,{className:`${s.color} px-3 py-1 font-medium`,children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),s.display_name]}),e.jsx("div",{className:"flex gap-1",children:e.jsx(M,{size:"sm",variant:"outline",className:"hover:bg-orange-50 hover:border-orange-300 hover:text-orange-700 transition-all duration-200",onClick:()=>{Ys(s),Pe({name:s.name,display_name:s.display_name,description:s.description,permissions:Array.isArray(s.permissions)?s.permissions:typeof s.permissions=="string"?JSON.parse(s.permissions):[],icon:s.icon,color:s.color,is_active:s.is_active}),G(!0)},children:e.jsx(cs,{className:"h-4 w-4"})})})]})}),e.jsxs(ie,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Permissions:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[Array.isArray(s.permissions)&&s.permissions.slice(0,3).map((w,V)=>e.jsx(z,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:w},V)),Array.isArray(s.permissions)&&s.permissions.length>3&&e.jsxs(z,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:["+",s.permissions.length-3," more"]})]})]})]})]},s.id)})})})]}),se&&e.jsxs(te,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(xe,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b border-green-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(ne,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs(ve,{className:"text-2xl font-bold text-gray-900",children:["Permissions for: ",se.display_name]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View permissions assigned to this role"})]})]})}),e.jsx(ie,{className:"p-6",children:e.jsx(nt,{className:"border-0 shadow-none bg-transparent"})})]})]}),e.jsx(Me,{value:"frontend",className:"space-y-6",children:e.jsxs(te,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(xe,{className:"bg-gradient-to-r from-indigo-50 to-blue-50 border-b border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:e.jsx(ss,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx(ve,{className:"text-2xl font-bold text-gray-900",children:"Public View Configuration"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure public-facing settings and appearance"})]})]})}),e.jsx(ie,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(aa,{className:"border-indigo-200 bg-indigo-50",children:[e.jsx(Dr,{className:"h-4 w-4 text-indigo-600"}),e.jsx(ra,{className:"text-indigo-800",children:"Configure public-facing settings and frontend appearance."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"site_name",className:"text-sm font-medium text-gray-700",children:"Site Name"}),e.jsx(F,{id:"site_name",placeholder:"Rio Fish Management",className:"mt-1 border-gray-200 focus:border-indigo-500 focus:ring-indigo-500/20"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"site_description",className:"text-sm font-medium text-gray-700",children:"Site Description"}),e.jsx(Ms,{id:"site_description",placeholder:"Professional fish management system",className:"mt-1 border-gray-200 focus:border-indigo-500 focus:ring-indigo-500/20"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"contact_email",className:"text-sm font-medium text-gray-700",children:"Contact Email"}),e.jsx(F,{id:"contact_email",type:"email",placeholder:"contact@riofish.com",className:"mt-1 border-gray-200 focus:border-indigo-500 focus:ring-indigo-500/20"})]})]}),e.jsx(M,{className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:"Save Configuration"})]})})]})}),e.jsx(Me,{value:"audit",className:"space-y-6",children:e.jsx(lt,{onNavigate:a})}),e.jsx(Me,{value:"outlets",className:"space-y-6",children:e.jsxs(te,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[e.jsx(xe,{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(Vs,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs(ve,{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:["Outlet Management",e.jsxs(z,{variant:"secondary",className:"bg-purple-100 text-purple-700 border-purple-200",children:[v.length," Outlets"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage retail outlets and distribution partners"})]})]}),e.jsxs(M,{onClick:()=>Qe(!0),className:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Outlet"]})]})}),e.jsx(ie,{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs(Ds,{children:[e.jsx(Rs,{className:"bg-gradient-to-r from-purple-50 to-indigo-50",children:e.jsxs(Be,{className:"border-b border-purple-100",children:[e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Outlet Name"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Location"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Contact"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Status"}),e.jsx(Z,{className:"font-semibold text-gray-700 py-4",children:"Actions"})]})}),e.jsx(Es,{children:v.map((s,o)=>e.jsxs(Be,{className:`hover:bg-purple-50/50 transition-colors duration-200 border-b border-gray-100 ${o%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name}),s.manager_name&&e.jsx("div",{className:"text-sm text-gray-500",children:s.manager_name})]})]})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:s.location})]})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:s.phone})]})}),e.jsx(Y,{className:"py-4",children:e.jsx(z,{className:`${s.status==="active"?"bg-green-100 text-green-800 border-green-200":s.status==="inactive"?"bg-gray-100 text-gray-800 border-gray-200":"bg-red-100 text-red-800 border-red-200"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),e.jsx(Y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:"sm",variant:"outline",onClick:()=>{Js(s),De({name:s.name,location:s.location,phone:s.phone,manager_name:s.manager_name||"",status:s.status}),Qe(!0)},className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:e.jsx(cs,{className:"h-4 w-4"})}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>sr(s.id),className:"border-red-200 text-red-700 hover:bg-red-50",children:e.jsx(me,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})})]}),e.jsx(Ve,{open:W,onOpenChange:$,children:e.jsxs(Le,{className:"max-w-2xl",children:[e.jsxs(Oe,{children:[e.jsx(Fe,{className:"text-xl font-semibold text-gray-900",children:q?"Edit User":"Add New User"}),e.jsx(Te,{className:"text-gray-600",children:q?"Update user information":"Create a new user account with a secure password"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Za()},className:"space-y-6",children:[!q&&e.jsxs(aa,{className:"border-blue-200 bg-blue-50",children:[e.jsx(ir,{className:"h-4 w-4 text-blue-600"}),e.jsx(ra,{className:"text-blue-800",children:"Password must be at least 6 characters long. The user will use this password to log in."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"first_name",className:"text-sm font-medium text-gray-700",children:"First Name *"}),e.jsx(F,{id:"first_name",value:b.first_name,onChange:s=>ue(u(d({},b),{first_name:s.target.value})),required:!0,className:"w-full",placeholder:"Enter first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"last_name",className:"text-sm font-medium text-gray-700",children:"Last Name *"}),e.jsx(F,{id:"last_name",value:b.last_name,onChange:s=>ue(u(d({},b),{last_name:s.target.value})),required:!0,className:"w-full",placeholder:"Enter last name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address *"}),e.jsx(F,{id:"email",type:"email",value:b.email,onChange:s=>{ue(u(d({},b),{email:s.target.value})),Ia(s.target.value)},required:!0,className:`w-full ${He.isValid?He.message==="Email is available"?"border-green-300 focus:border-green-500":"":"border-red-300 focus:border-red-500"}`,placeholder:"user@example.com"}),He.message&&e.jsx("p",{className:`text-xs ${He.isValid?"text-green-600":"text-red-600"}`,children:He.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"role",className:"text-sm font-medium text-gray-700",children:"Role *"}),e.jsxs(je,{value:b.role,onValueChange:s=>ue(u(d({},b),{role:s})),children:[e.jsx(be,{className:"w-full",children:e.jsx(we,{placeholder:"Select a role"})}),e.jsx(Ne,{children:n.filter(s=>s.name&&s.name.trim()!=="").map(s=>e.jsx(T,{value:s.name,children:s.display_name||s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx(F,{id:"phone",value:b.phone,onChange:s=>{ue(u(d({},b),{phone:s.target.value})),Wa(s.target.value)},className:`w-full ${Xe.isValid?Xe.message==="Phone number is available"?"border-green-300 focus:border-green-500":"":"border-red-300 focus:border-red-500"}`,placeholder:"+254 700 000 000"}),Xe.message&&e.jsx("p",{className:`text-xs ${Xe.isValid?"text-green-600":"text-red-600"}`,children:Xe.message})]}),!q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password *"}),e.jsx(F,{id:"password",type:"password",value:b.password,onChange:s=>{ue(u(d({},b),{password:s.target.value})),Ha(s.target.value)},required:!0,className:`w-full ${We.isValid?We.message==="Password is available"?"border-green-300 focus:border-green-500":"":"border-red-300 focus:border-red-500"}`,placeholder:"Enter a secure password"}),We.message&&e.jsx("p",{className:`text-xs ${We.isValid?"text-green-600":"text-red-600"}`,children:We.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"confirm_password",className:"text-sm font-medium text-gray-700",children:"Confirm Password *"}),e.jsx(F,{id:"confirm_password",type:"password",value:b.confirm_password,onChange:s=>ue(u(d({},b),{confirm_password:s.target.value})),required:!0,className:`w-full ${b.confirm_password&&b.password!==b.confirm_password?"border-red-300 focus:border-red-500":b.confirm_password&&b.password===b.confirm_password?"border-green-300 focus:border-green-500":""}`,placeholder:"Confirm the password"}),b.confirm_password&&e.jsx("p",{className:`text-xs ${b.password===b.confirm_password?"text-green-600":"text-red-600"}`,children:b.password===b.confirm_password?"Passwords match":"Passwords do not match"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:b.is_active,onChange:s=>ue(u(d({},b),{is_active:s.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx(D,{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"User is active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>$(!1),className:"px-6",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:J==="saving-user",className:"px-6 bg-blue-600 hover:bg-blue-700",children:J==="saving-user"?"Saving...":q?"Update User":"Create User"})]})]})]})}),e.jsx(Ve,{open:C,onOpenChange:s=>{G(s),s||Ce({})},children:e.jsxs(Le,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(Oe,{className:"pb-6 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-sm",children:e.jsx(ne,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx(Fe,{className:"text-xl font-semibold text-gray-900",children:se?"Edit Role":"Create New Role"}),e.jsx(Te,{className:"text-gray-600 mt-1",children:se?"Update role information and permissions":"Define a new role with specific permissions and access levels"})]})]})}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Ga()},className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{htmlFor:"name",className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Role Name *"]}),e.jsx(F,{id:"name",value:P.name,onChange:s=>{Pe(u(d({},P),{name:s.target.value})),B.name&&Ce(u(d({},B),{name:""}))},className:`transition-all duration-200 ${B.name?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-gray-300"} ${se?"bg-gray-50 cursor-not-allowed":""}`,placeholder:"e.g., warehouse_manager",maxLength:50,required:!0,disabled:!!se}),B.name&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1.5 font-medium",children:[e.jsx(os,{className:"h-3 w-3"}),B.name]}),e.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:se?"Role name cannot be changed after creation":"Internal identifier (lowercase, no spaces)"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{htmlFor:"display_name",className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Display Name *"]}),e.jsx(F,{id:"display_name",value:P.display_name,onChange:s=>{Pe(u(d({},P),{display_name:s.target.value})),B.display_name&&Ce(u(d({},B),{display_name:""}))},className:`transition-all duration-200 ${B.display_name?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-gray-300"} ${se?"bg-gray-50 cursor-not-allowed":""}`,placeholder:"e.g., Warehouse Manager",maxLength:100,required:!0,disabled:!!se}),B.display_name&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1.5 font-medium",children:[e.jsx(os,{className:"h-3 w-3"}),B.display_name]}),e.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:se?"Display name cannot be changed after creation":"User-friendly name shown in the interface"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{htmlFor:"description",className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Description"]}),e.jsx(Ms,{id:"description",value:P.description,onChange:s=>{Pe(u(d({},P),{description:s.target.value})),B.description&&Ce(u(d({},B),{description:""}))},className:`transition-all duration-200 resize-none ${B.description?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-gray-300"}`,placeholder:"Describe the role's responsibilities and scope...",maxLength:500,rows:3}),B.description&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1.5 font-medium",children:[e.jsx(os,{className:"h-3 w-3"}),B.description]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:"Optional description of the role's purpose"}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${P.description.length>450?"text-orange-600 bg-orange-50":"text-gray-500 bg-gray-50"}`,children:[P.description.length,"/500"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 p-5 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200 hover:shadow-sm transition-all duration-200",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:P.is_active,onChange:s=>Pe(u(d({},P),{is_active:s.target.checked})),className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all duration-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(D,{htmlFor:"is_active",className:"text-sm font-semibold text-gray-800 cursor-pointer",children:"Active Role"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Inactive roles cannot be assigned to users"})]}),e.jsx("div",{className:`p-2 rounded-full transition-all duration-200 ${P.is_active?"bg-green-100 shadow-sm":"bg-gray-200"}`,children:P.is_active?e.jsx(xs,{className:"h-5 w-5 text-green-600"}):e.jsx(na,{className:"h-5 w-5 text-gray-400"})})]})]}),P.is_active&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(D,{htmlFor:"permissions",className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Select Permissions *"]}),e.jsx("div",{className:`border-2 rounded-xl p-5 transition-all duration-200 ${B.permissions?"border-red-300 bg-red-50":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"}`,children:e.jsx("div",{className:"min-h-[60px] flex items-center",children:e.jsx(tt,{selectedPermissions:P.permissions,onPermissionsChange:s=>{Pe(u(d({},P),{permissions:s})),B.permissions&&Ce(u(d({},B),{permissions:""}))},className:"w-full"})})}),B.permissions?e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1.5 font-medium",children:[e.jsx(os,{className:"h-3 w-3"}),B.permissions]}):e.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:'Choose the specific permissions this role should have. Use "All Permissions" for full admin access.'})]}),Array.isArray(P.permissions)&&P.permissions.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(ne,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Selected Permissions (",(Array.isArray(P.permissions)?P.permissions:[]).length,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(Array.isArray(P.permissions)?P.permissions:[]).slice(0,8).map(s=>e.jsx(z,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 border border-blue-200 hover:bg-blue-200 transition-colors duration-200",children:s},s)),(Array.isArray(P.permissions)?P.permissions:[]).length>8&&e.jsxs(z,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 border border-blue-200",children:["+",(Array.isArray(P.permissions)?P.permissions:[]).length-8," more"]})]})]})]}),!P.is_active&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[e.jsx(na,{className:"h-6 w-6 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Role is Inactive"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Permissions are not available for inactive roles. Enable the role to configure permissions."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200 flex-shrink-0",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>{G(!1),Ce({})},className:"px-6 hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:J==="saving-role",className:"px-6 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-sm hover:shadow-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:J==="saving-role"?e.jsxs(e.Fragment,{children:[e.jsx(ca,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),se?"Update Role":"Create Role"]})})]})]})]})}),e.jsx(Ve,{open:pe,onOpenChange:_e,children:e.jsxs(Le,{className:"max-w-2xl",children:[e.jsxs(Oe,{children:[e.jsx(Fe,{children:de?"Edit Farmer":"Add New Farmer"}),e.jsx(Te,{children:de?"Update farmer information":"Add a new farmer to the system"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Ya()},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"name",children:"Name"}),e.jsx(F,{id:"name",value:K.name,onChange:s=>Ae(u(d({},K),{name:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"phone",children:"Phone"}),e.jsx(F,{id:"phone",value:K.phone,onChange:s=>Ae(u(d({},K),{phone:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"location",children:"Location"}),e.jsx(F,{id:"location",value:K.location,onChange:s=>Ae(u(d({},K),{location:s.target.value})),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"rating",children:"Rating (0-5)"}),e.jsx(F,{id:"rating",type:"number",min:"0",max:"5",value:K.rating,onChange:s=>Ae(u(d({},K),{rating:parseInt(s.target.value)||0}))})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"reliability",children:"Reliability"}),e.jsxs(je,{value:K.reliability,onValueChange:s=>Ae(u(d({},K),{reliability:s})),children:[e.jsx(be,{children:e.jsx(we,{})}),e.jsxs(Ne,{children:[e.jsx(T,{value:"excellent",children:"Excellent"}),e.jsx(T,{value:"good",children:"Good"}),e.jsx(T,{value:"fair",children:"Fair"}),e.jsx(T,{value:"poor",children:"Poor"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>_e(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:J==="saving-farmer",children:J==="saving-farmer"?"Saving...":de?"Update":"Create"})]})]})]})}),e.jsx(Ve,{open:rs,onOpenChange:X,children:e.jsxs(Le,{className:"max-w-2xl",children:[e.jsxs(Oe,{children:[e.jsxs(Fe,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ma,{className:"h-5 w-5 text-blue-600"}),"Email Configuration"]}),e.jsx(Te,{children:"Configure email settings for notifications and communications"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault()},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"provider",className:"text-sm font-medium text-gray-700",children:"Email Provider"}),e.jsxs(je,{value:k.provider,onValueChange:s=>I(u(d({},k),{provider:s})),children:[e.jsx(be,{className:"mt-1",children:e.jsx(we,{})}),e.jsxs(Ne,{children:[e.jsx(T,{value:"sendgrid",children:"SendGrid"}),e.jsx(T,{value:"ses",children:"AWS SES"}),e.jsx(T,{value:"smtp",children:"SMTP"}),e.jsx(T,{value:"resend",children:"Resend"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"from_email",className:"text-sm font-medium text-gray-700",children:"From Email"}),e.jsx(F,{id:"from_email",type:"email",value:k.from_email,onChange:s=>I(u(d({},k),{from_email:s.target.value})),className:"mt-1",placeholder:"noreply@riofish.com",required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"from_name",className:"text-sm font-medium text-gray-700",children:"From Name"}),e.jsx(F,{id:"from_name",value:k.from_name,onChange:s=>I(u(d({},k),{from_name:s.target.value})),className:"mt-1",placeholder:"Rio Fish Management",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"api_key",className:"text-sm font-medium text-gray-700",children:"API Key *"}),e.jsx(F,{id:"api_key",name:"api_key",type:"password",autoComplete:"off",value:k.api_key,onChange:s=>I(u(d({},k),{api_key:s.target.value})),className:"mt-1",disabled:J==="saving-email-config",placeholder:"Your email service API key",required:!0})]}),k.provider==="smtp"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"smtp_host",className:"text-sm font-medium text-gray-700",children:"SMTP Host"}),e.jsx(F,{id:"smtp_host",value:k.smtp_host||"",onChange:s=>I(u(d({},k),{smtp_host:s.target.value})),className:"mt-1",placeholder:"smtp.gmail.com"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"smtp_port",className:"text-sm font-medium text-gray-700",children:"SMTP Port"}),e.jsx(F,{id:"smtp_port",type:"number",value:k.smtp_port||"",onChange:s=>I(u(d({},k),{smtp_port:parseInt(s.target.value)||587})),className:"mt-1",placeholder:"587"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"smtp_username",className:"text-sm font-medium text-gray-700",children:"SMTP Username"}),e.jsx(F,{id:"smtp_username",value:k.smtp_username||"",onChange:s=>I(u(d({},k),{smtp_username:s.target.value})),className:"mt-1",placeholder:"your-email@gmail.com"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"smtp_pass",className:"text-sm font-medium text-gray-700",children:"SMTP Password"}),e.jsx(F,{id:"smtp_pass",name:"smtp_pass",type:"password",autoComplete:"off",value:k.smtp_pass||"",onChange:s=>I(u(d({},k),{smtp_pass:s.target.value})),className:"mt-1",disabled:J==="saving-email-config",placeholder:"your-app-password"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>X(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:J==="saving-email-config",children:J==="saving-email-config"?"Saving...":"Save Configuration"})]})]})]})}),e.jsx(Ve,{open:$a,onOpenChange:ts,children:e.jsxs(Le,{className:"max-w-2xl",children:[e.jsxs(Oe,{children:[e.jsxs(Fe,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5 text-purple-600"}),"Add New Storage Location"]}),e.jsx(Te,{children:"Create a new storage location for fish processing and storage"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Ja()},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"storage_name",className:"text-sm font-medium text-gray-700",children:"Location Name *"}),e.jsx(F,{id:"storage_name",value:ae.name,onChange:s=>ke(u(d({},ae),{name:s.target.value})),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",placeholder:"e.g., Cold Storage A",required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"storage_type",className:"text-sm font-medium text-gray-700",children:"Location Type *"}),e.jsxs(je,{value:ae.location_type,onValueChange:s=>ke(u(d({},ae),{location_type:s})),children:[e.jsx(be,{className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",children:e.jsx(we,{})}),e.jsxs(Ne,{children:[e.jsx(T,{value:"cold_storage",children:"Cold Storage"}),e.jsx(T,{value:"freezer",children:"Freezer"}),e.jsx(T,{value:"ambient",children:"Ambient"}),e.jsx(T,{value:"processing_area",children:"Processing Area"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"storage_description",className:"text-sm font-medium text-gray-700",children:"Description"}),e.jsx(Ms,{id:"storage_description",value:ae.description,onChange:s=>ke(u(d({},ae),{description:s.target.value})),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",placeholder:"Brief description of this storage location"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"storage_capacity",className:"text-sm font-medium text-gray-700",children:"Capacity (kg) *"}),e.jsx(F,{id:"storage_capacity",type:"number",min:"1",step:"0.01",value:ae.capacity_kg,onChange:s=>ke(u(d({},ae),{capacity_kg:parseFloat(s.target.value)||0})),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"storage_temperature",className:"text-sm font-medium text-gray-700",children:"Temperature (C)"}),e.jsx(F,{id:"storage_temperature",type:"number",step:"0.1",value:ae.temperature_celsius,onChange:s=>ke(u(d({},ae),{temperature_celsius:parseFloat(s.target.value)||0})),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",placeholder:"4.0"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"storage_humidity",className:"text-sm font-medium text-gray-700",children:"Humidity (%)"}),e.jsx(F,{id:"storage_humidity",type:"number",min:"0",max:"100",step:"0.1",value:ae.humidity_percent,onChange:s=>ke(u(d({},ae),{humidity_percent:parseFloat(s.target.value)||0})),className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",placeholder:"85.0"})]})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"storage_status",className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(je,{value:ae.status,onValueChange:s=>ke(u(d({},ae),{status:s})),children:[e.jsx(be,{className:"mt-1 border-gray-200 focus:border-purple-500 focus:ring-purple-500/20",children:e.jsx(we,{})}),e.jsxs(Ne,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"maintenance",children:"Maintenance"}),e.jsx(T,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>ts(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:J==="saving-storage",className:"bg-purple-600 hover:bg-purple-700",children:J==="saving-storage"?"Creating...":"Create Location"})]})]})]})}),e.jsx(Ve,{open:Ua,onOpenChange:Qe,children:e.jsxs(Le,{className:"max-w-2xl",children:[e.jsxs(Oe,{children:[e.jsxs(Fe,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Vs,{className:"h-5 w-5 text-purple-600"}),Je?"Edit Outlet":"Add New Outlet"]}),e.jsx(Te,{children:Je?"Update outlet information":"Create a new retail outlet or distribution partner"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),er()},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"outlet_name",children:"Outlet Name"}),e.jsx(F,{id:"outlet_name",value:re.name,onChange:s=>De(u(d({},re),{name:s.target.value})),placeholder:"e.g., Nakuru Fresh Fish Market",required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"outlet_location",children:"Location"}),e.jsx(F,{id:"outlet_location",value:re.location,onChange:s=>De(u(d({},re),{location:s.target.value})),placeholder:"e.g., Nakuru, Kenya",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"outlet_phone",children:"Phone Number"}),e.jsx(F,{id:"outlet_phone",value:re.phone,onChange:s=>De(u(d({},re),{phone:s.target.value})),placeholder:"e.g., +254722456789",required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"outlet_manager_name",children:"Manager Name (Optional)"}),e.jsx(F,{id:"outlet_manager_name",value:re.manager_name,onChange:s=>De(u(d({},re),{manager_name:s.target.value})),placeholder:"e.g., John Doe"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"outlet_status",children:"Status"}),e.jsxs(je,{value:re.status,onValueChange:s=>De(u(d({},re),{status:s})),children:[e.jsx(be,{children:e.jsx(we,{})}),e.jsxs(Ne,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"}),e.jsx(T,{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>Qe(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:J==="saving-outlet",className:"bg-purple-600 hover:bg-purple-700",children:J==="saving-outlet"?"Saving...":Je?"Update Outlet":"Create Outlet"})]})]})]})})]})})}export{Ft as default};
